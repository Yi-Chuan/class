<!doctype html>
<html>
<head>
	<meta charset=UTF-8"utf-8">
	<title>Laravel 5.1 中文文档：HTTP 控制器
</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="author" content="@summerblue">
	<meta name="description" content="HTTP 控制器,简介,基础控制器,控制器中间件,RESTful 资源控制器,部分资源路由,命名资源路由,嵌套资源,附加资源控制器,隐式控制器,依赖注入与控制器,路由缓存,简介,除了可以在单个的 routes.php 文件中定义所有的请求处理逻辑外，你可能还希望可以使用控制器类来组织此行为。控制器可将相关的 HTTP 请求处理逻辑组成一个类。控制器一般存放在 app/Http/Controller...
">
	<meta name="keywords" content="HTTP 控制器,laravel5.1文档,laravel5.1中文文档,laravel中国,laravel中文,laravel框架中文,laravel文档,laravel框架中国,laravel中文文档
">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--[if lte IE 9]>
		<script src="html5shiv.min.js" tppabs="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
	<![endif]-->
	<link rel="stylesheet" href="laravel.css" tppabs="http://laravel-china.org/assets/css/laravel.css">
	<style media="screen">
		div.main-content {
		  display: none;
		}
		.loading-effect {
			position: fixed;
			left: 50%;
			top:300px;
		    z-index: -1;
		}
	</style>
</head>
<body class="docs language-php ">

	<span class="overlay"></span>

	<div class="loading-effect">
		<div class="loader-inner line-scale">
		      <div></div>
		      <div></div>
		      <div></div>
		      <div></div>
		      <div></div>
		  </div>
	</div>


	<div class="main-content">

		<nav class="main">
			<div class="container">
				<a href="javascript:if(confirm('http://laravel-china.org/  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/" class="brand">
					<img src="laravel-logo.png" tppabs="http://laravel-china.org/assets/img/laravel-logo.png" height="30">
					Laravel
				</a>

				<div class="responsive-sidebar-nav">
					<a href="#" class="toggle-slide menu-link btn">&#9776;</a>
				</div>

									<div class="switcher">
	<div class="dropdown">
		<button class="btn dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
			<!--<span class="faint">v</span> -->
			5.1
			<span class="caret"></span>
		</button>
		<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
							<li role="presentation">
					<a role="menuitem" tabindex="-1" href="controllers.htm" tppabs="http://laravel-china.org/docs/5.1/controllers">5.1</a>
				</li>
							<li role="presentation">
					<a role="menuitem" tabindex="-1" href="controllers-1.htm" tppabs="http://laravel-china.org/docs/4.2/controllers">4.2</a>
				</li>
					</ul>
	</div>
</div>
				
				<ul class="main-nav">
					<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">文档</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS 速查表</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel 社区</a>
</li>
				</ul>
			</div>
		</nav>

		<nav id="slide-menu" class="slide-menu" role="navigation">

	<div class="brand">
		<a href="javascript:if(confirm('http://laravel-china.org/  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/">
			<img src="laravel-logo-white.png" tppabs="http://laravel-china.org/assets/img/laravel-logo-white.png" height="50">
		</a>
	</div>

	<ul class="slide-main-nav">
		<li><a href="javascript:if(confirm('http://laravel-china.org/  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/">Home</a></li>
		<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">文档</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS 速查表</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel 社区</a>
</li>
	</ul>

	<div class="slide-docs-nav">
		<h2>文档</h2>

		<a type="button" class="turnofflight"><i class="fa fa-lightbulb-o"></i> <i class="fa fa-star-o"></i> 夜间模式 </a>
		<ul>
<li>前言
<ul>
<li><a href="about.htm" tppabs="http://laravel-china.org/docs/5.1/about">翻译说明</a></li>
<li><a href="releases.htm" tppabs="http://laravel-china.org/docs/5.1/releases">发行说明</a></li>
<li><a href="upgrade.htm" tppabs="http://laravel-china.org/docs/5.1/upgrade">升级导引</a></li>
<li><a href="contributions.htm" tppabs="http://laravel-china.org/docs/5.1/contributions">贡献导引</a></li>
<li><a href="javascript:if(confirm('http://laravel-china.org/api/5.1  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://laravel-china.org/api/5.1'" tppabs="http://laravel-china.org/api/5.1">API 文档</a></li>
</ul></li>
<li>环境配置
<ul>
<li><a href="installation.htm" tppabs="http://laravel-china.org/docs/5.1/installation">安装</a></li>
<li><a href="homestead.htm" tppabs="http://laravel-china.org/docs/5.1/homestead">Homestead</a></li>
</ul></li>
<li>基本功能
<ul>
<li><a href="routing.htm" tppabs="http://laravel-china.org/docs/5.1/routing">路由</a></li>
<li><a href="middleware.htm" tppabs="http://laravel-china.org/docs/5.1/middleware">中间件</a></li>
<li><a href="controllers.htm" tppabs="http://laravel-china.org/docs/5.1/controllers">控制器</a></li>
<li><a href="requests.htm" tppabs="http://laravel-china.org/docs/5.1/requests">请求</a></li>
<li><a href="responses.htm" tppabs="http://laravel-china.org/docs/5.1/responses">响应</a></li>
<li><a href="views.htm" tppabs="http://laravel-china.org/docs/5.1/views">视图</a></li>
<li><a href="blade.htm" tppabs="http://laravel-china.org/docs/5.1/blade">Blade 模板</a></li>
</ul></li>
<li>教程
<ul>
<li><a href="quickstart.htm" tppabs="http://laravel-china.org/docs/5.1/quickstart">初级任务清单</a></li>
<li><a href="quickstart-intermediate.htm" tppabs="http://laravel-china.org/docs/5.1/quickstart-intermediate">中级任务清单</a></li>
</ul></li>
<li>系统架构
<ul>
<li><a href="lifecycle.htm" tppabs="http://laravel-china.org/docs/5.1/lifecycle">请求的生命周期</a></li>
<li><a href="structure.htm" tppabs="http://laravel-china.org/docs/5.1/structure">应用程序结构</a></li>
<li><a href="providers.htm" tppabs="http://laravel-china.org/docs/5.1/providers">服务提供者</a></li>
<li><a href="container.htm" tppabs="http://laravel-china.org/docs/5.1/container">服务容器</a></li>
<li><a href="contracts.htm" tppabs="http://laravel-china.org/docs/5.1/contracts">Contracts</a></li>
<li><a href="facades.htm" tppabs="http://laravel-china.org/docs/5.1/facades">Facades</a></li>
</ul></li>
<li>系统服务
<ul>
<li><a href="authentication.htm" tppabs="http://laravel-china.org/docs/5.1/authentication">用户认证</a></li>
<li><a href="authorization.htm" tppabs="http://laravel-china.org/docs/5.1/authorization">用户授权</a></li>
<li><a href="artisan.htm" tppabs="http://laravel-china.org/docs/5.1/artisan">Artisan 命令行</a></li>
<li><a href="billing.htm" tppabs="http://laravel-china.org/docs/5.1/billing">交易</a></li>
<li><a href="cache.htm" tppabs="http://laravel-china.org/docs/5.1/cache">缓存</a></li>
<li><a href="collections.htm" tppabs="http://laravel-china.org/docs/5.1/collections">集合</a></li>
<li><a href="elixir.htm" tppabs="http://laravel-china.org/docs/5.1/elixir">Elixir</a></li>
<li><a href="encryption.htm" tppabs="http://laravel-china.org/docs/5.1/encryption">加密与解密</a></li>
<li><a href="errors.htm" tppabs="http://laravel-china.org/docs/5.1/errors">错误与日志</a></li>
<li><a href="events.htm" tppabs="http://laravel-china.org/docs/5.1/events">事件</a></li>
<li><a href="filesystem.htm" tppabs="http://laravel-china.org/docs/5.1/filesystem">文件系统与云存储</a></li>
<li><a href="hashing.htm" tppabs="http://laravel-china.org/docs/5.1/hashing">哈希</a></li>
<li><a href="helpers.htm" tppabs="http://laravel-china.org/docs/5.1/helpers">辅助函数</a></li>
<li><a href="localization.htm" tppabs="http://laravel-china.org/docs/5.1/localization">本地化</a></li>
<li><a href="mail.htm" tppabs="http://laravel-china.org/docs/5.1/mail">邮件</a></li>
<li><a href="packages.htm" tppabs="http://laravel-china.org/docs/5.1/packages">扩展包开发</a></li>
<li><a href="pagination.htm" tppabs="http://laravel-china.org/docs/5.1/pagination">分页</a></li>
<li><a href="queues.htm" tppabs="http://laravel-china.org/docs/5.1/queues">队列</a></li>
<li><a href="redis.htm" tppabs="http://laravel-china.org/docs/5.1/redis">Redis</a></li>
<li><a href="session.htm" tppabs="http://laravel-china.org/docs/5.1/session">Session</a></li>
<li><a href="envoy.htm" tppabs="http://laravel-china.org/docs/5.1/envoy">Envoy</a></li>
<li><a href="scheduling.htm" tppabs="http://laravel-china.org/docs/5.1/scheduling">任务调度</a></li>
<li><a href="testing.htm" tppabs="http://laravel-china.org/docs/5.1/testing">测试</a></li>
<li><a href="validation.htm" tppabs="http://laravel-china.org/docs/5.1/validation">表单验证</a></li>
</ul></li>
<li>数据库
<ul>
<li><a href="database.htm" tppabs="http://laravel-china.org/docs/5.1/database">入门</a></li>
<li><a href="queries.htm" tppabs="http://laravel-china.org/docs/5.1/queries">查询构造器</a></li>
<li><a href="migrations.htm" tppabs="http://laravel-china.org/docs/5.1/migrations">数据库迁移</a></li>
<li><a href="seeding.htm" tppabs="http://laravel-china.org/docs/5.1/seeding">数据填充</a></li>
</ul></li>
<li>Eloquent ORM
<ul>
<li><a href="eloquent.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent">入门</a></li>
<li><a href="eloquent-relationships.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-relationships">模型关联</a></li>
<li><a href="eloquent-collections.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-collections">Eloquent 集合</a></li>
<li><a href="eloquent-mutators.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-mutators">Getter/Setter</a></li>
<li><a href="eloquent-serialization.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-serialization">序列化</a></li>
</ul></li>
</ul>
	</div>

</nav>

<div class="docs-wrapper container">

	<section class="sidebar">

		<div class="header">
			<a type="button" class="btn btn-primary btn-lg btn-block turnofflight"><i class="fa fa-lightbulb-o"></i> <i class="fa fa-star-o"></i> 夜间模式 </a>
		</div>

		<ul>
<li>前言
<ul>
<li><a href="about.htm" tppabs="http://laravel-china.org/docs/5.1/about">翻译说明</a></li>
<li><a href="releases.htm" tppabs="http://laravel-china.org/docs/5.1/releases">发行说明</a></li>
<li><a href="upgrade.htm" tppabs="http://laravel-china.org/docs/5.1/upgrade">升级导引</a></li>
<li><a href="contributions.htm" tppabs="http://laravel-china.org/docs/5.1/contributions">贡献导引</a></li>
<li><a href="javascript:if(confirm('http://laravel-china.org/api/5.1  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://laravel-china.org/api/5.1'" tppabs="http://laravel-china.org/api/5.1">API 文档</a></li>
</ul></li>
<li>环境配置
<ul>
<li><a href="installation.htm" tppabs="http://laravel-china.org/docs/5.1/installation">安装</a></li>
<li><a href="homestead.htm" tppabs="http://laravel-china.org/docs/5.1/homestead">Homestead</a></li>
</ul></li>
<li>基本功能
<ul>
<li><a href="routing.htm" tppabs="http://laravel-china.org/docs/5.1/routing">路由</a></li>
<li><a href="middleware.htm" tppabs="http://laravel-china.org/docs/5.1/middleware">中间件</a></li>
<li><a href="controllers.htm" tppabs="http://laravel-china.org/docs/5.1/controllers">控制器</a></li>
<li><a href="requests.htm" tppabs="http://laravel-china.org/docs/5.1/requests">请求</a></li>
<li><a href="responses.htm" tppabs="http://laravel-china.org/docs/5.1/responses">响应</a></li>
<li><a href="views.htm" tppabs="http://laravel-china.org/docs/5.1/views">视图</a></li>
<li><a href="blade.htm" tppabs="http://laravel-china.org/docs/5.1/blade">Blade 模板</a></li>
</ul></li>
<li>教程
<ul>
<li><a href="quickstart.htm" tppabs="http://laravel-china.org/docs/5.1/quickstart">初级任务清单</a></li>
<li><a href="quickstart-intermediate.htm" tppabs="http://laravel-china.org/docs/5.1/quickstart-intermediate">中级任务清单</a></li>
</ul></li>
<li>系统架构
<ul>
<li><a href="lifecycle.htm" tppabs="http://laravel-china.org/docs/5.1/lifecycle">请求的生命周期</a></li>
<li><a href="structure.htm" tppabs="http://laravel-china.org/docs/5.1/structure">应用程序结构</a></li>
<li><a href="providers.htm" tppabs="http://laravel-china.org/docs/5.1/providers">服务提供者</a></li>
<li><a href="container.htm" tppabs="http://laravel-china.org/docs/5.1/container">服务容器</a></li>
<li><a href="contracts.htm" tppabs="http://laravel-china.org/docs/5.1/contracts">Contracts</a></li>
<li><a href="facades.htm" tppabs="http://laravel-china.org/docs/5.1/facades">Facades</a></li>
</ul></li>
<li>系统服务
<ul>
<li><a href="authentication.htm" tppabs="http://laravel-china.org/docs/5.1/authentication">用户认证</a></li>
<li><a href="authorization.htm" tppabs="http://laravel-china.org/docs/5.1/authorization">用户授权</a></li>
<li><a href="artisan.htm" tppabs="http://laravel-china.org/docs/5.1/artisan">Artisan 命令行</a></li>
<li><a href="billing.htm" tppabs="http://laravel-china.org/docs/5.1/billing">交易</a></li>
<li><a href="cache.htm" tppabs="http://laravel-china.org/docs/5.1/cache">缓存</a></li>
<li><a href="collections.htm" tppabs="http://laravel-china.org/docs/5.1/collections">集合</a></li>
<li><a href="elixir.htm" tppabs="http://laravel-china.org/docs/5.1/elixir">Elixir</a></li>
<li><a href="encryption.htm" tppabs="http://laravel-china.org/docs/5.1/encryption">加密与解密</a></li>
<li><a href="errors.htm" tppabs="http://laravel-china.org/docs/5.1/errors">错误与日志</a></li>
<li><a href="events.htm" tppabs="http://laravel-china.org/docs/5.1/events">事件</a></li>
<li><a href="filesystem.htm" tppabs="http://laravel-china.org/docs/5.1/filesystem">文件系统与云存储</a></li>
<li><a href="hashing.htm" tppabs="http://laravel-china.org/docs/5.1/hashing">哈希</a></li>
<li><a href="helpers.htm" tppabs="http://laravel-china.org/docs/5.1/helpers">辅助函数</a></li>
<li><a href="localization.htm" tppabs="http://laravel-china.org/docs/5.1/localization">本地化</a></li>
<li><a href="mail.htm" tppabs="http://laravel-china.org/docs/5.1/mail">邮件</a></li>
<li><a href="packages.htm" tppabs="http://laravel-china.org/docs/5.1/packages">扩展包开发</a></li>
<li><a href="pagination.htm" tppabs="http://laravel-china.org/docs/5.1/pagination">分页</a></li>
<li><a href="queues.htm" tppabs="http://laravel-china.org/docs/5.1/queues">队列</a></li>
<li><a href="redis.htm" tppabs="http://laravel-china.org/docs/5.1/redis">Redis</a></li>
<li><a href="session.htm" tppabs="http://laravel-china.org/docs/5.1/session">Session</a></li>
<li><a href="envoy.htm" tppabs="http://laravel-china.org/docs/5.1/envoy">Envoy</a></li>
<li><a href="scheduling.htm" tppabs="http://laravel-china.org/docs/5.1/scheduling">任务调度</a></li>
<li><a href="testing.htm" tppabs="http://laravel-china.org/docs/5.1/testing">测试</a></li>
<li><a href="validation.htm" tppabs="http://laravel-china.org/docs/5.1/validation">表单验证</a></li>
</ul></li>
<li>数据库
<ul>
<li><a href="database.htm" tppabs="http://laravel-china.org/docs/5.1/database">入门</a></li>
<li><a href="queries.htm" tppabs="http://laravel-china.org/docs/5.1/queries">查询构造器</a></li>
<li><a href="migrations.htm" tppabs="http://laravel-china.org/docs/5.1/migrations">数据库迁移</a></li>
<li><a href="seeding.htm" tppabs="http://laravel-china.org/docs/5.1/seeding">数据填充</a></li>
</ul></li>
<li>Eloquent ORM
<ul>
<li><a href="eloquent.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent">入门</a></li>
<li><a href="eloquent-relationships.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-relationships">模型关联</a></li>
<li><a href="eloquent-collections.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-collections">Eloquent 集合</a></li>
<li><a href="eloquent-mutators.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-mutators">Getter/Setter</a></li>
<li><a href="eloquent-serialization.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-serialization">序列化</a></li>
</ul></li>
</ul>
	</section>

	<article>

		<div class="alert alert-warning" role="alert">

			<h4>拥抱 Laravel 5.1 LTS</h4>
			<p>
				强烈建议在 2018 年之前使用 Laravel 5.1 来构建项目，Laravel 5.1 是 LTS 的发行版本, 发行于 2015 年 6 月份，自发布起提供两年时间的 Bug 修复（2017 年 6 月）, 3 年时间的安全修复（2018 年 6 月）。
			</p>
			 <p>
			 	LTS 版本是此项目能提供的最长时间维护版本。一般的发行版本, 只提供 6 个月的 Bug 修复支持, 一年的安全修复支持.
			 </p>
		</div>

		<div class="main-content">
			<h1>HTTP 控制器</h1>
<ul>
<li><a href="#introduction">简介</a></li>
<li><a href="#basic-controllers">基础控制器</a></li>
<li><a href="#controller-middleware">控制器中间件</a></li>
<li><a href="#restful-resource-controllers">RESTful 资源控制器</a>
<ul>
<li><a href="#restful-partial-resource-routes">部分资源路由</a></li>
<li><a href="#restful-naming-resource-routes">命名资源路由</a></li>
<li><a href="#restful-nested-resources">嵌套资源</a></li>
<li><a href="#restful-supplementing-resource-controllers">附加资源控制器</a></li>
</ul></li>
<li><a href="#implicit-controllers">隐式控制器</a></li>
<li><a href="#dependency-injection-and-controllers">依赖注入与控制器</a></li>
<li><a href="#route-caching">路由缓存</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2>简介</h2>
<p>除了可以在单个的 <code>routes.php</code> 文件中定义所有的请求处理逻辑外，你可能还希望可以使用控制器类来组织此行为。控制器可将相关的 HTTP 请求处理逻辑组成一个类。控制器一般存放在 <code>app/Http/Controllers</code> 目录下。</p>
<blockquote>
<p><strong><a href="javascript:if(confirm('http://github.com/summerblue  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://github.com/summerblue'" tppabs="http://github.com/summerblue">Summer</a>：</strong> 请不要在 <code>routes.php</code> 文件里面写逻辑代码，逻辑处理代码请在 Controller 里书写。</p>
<ol>
<li>因为这是最佳实践，一开始做对了，后面节省你重构代码的时间；</li>
<li><a href="controllers.htm#%E8%B7%AF%E7%94%B1%E7%BC%93%E5%AD%98" tppabs="http://laravel-china.org/docs/5.1/controllers#%E8%B7%AF%E7%94%B1%E7%BC%93%E5%AD%98">路由缓存</a> 并不会作用在基于闭包的路由。</li>
</ol>
</blockquote>
<p><a name="basic-controllers"></a></p>
<h2>基础控制器</h2>
<p>这是一个基础控制器类的例子。所有 Laravel 控制器都应继承基础控制器类，它包含在 Laravel 的默认安装中：</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use App\User;
use App\Http\Controllers\Controller;

class UserController extends Controller
{
    /**
     * 显示指定用户的个人数据。
     *
     * @param  int  $id
     * @return Response
     */
    public function showProfile($id)
    {
        return view('user.profile', ['user' =&gt; User::findOrFail($id)]);
    }
}</code></pre>
<p>我们可以通过路由来指定控制器行为，就像这样：</p>
<pre><code>Route::get('user/{id}', 'UserController@showProfile');</code></pre>
<p>现在，当请求和此特定路由的 URI 相匹配时，<code>UserController</code> 类的 <code>showProfile</code> 方法就会被运行。当然，路由的参数也会被传递至该方法。</p>
<h4>控制器和命名空间</h4>
<p>有一点非常重要，那就是我们在定义控制器路由时，不需要指定完整的控制器命名空间。我们只需要定义「根」命名空间 <code>App\Http\Controllers</code> 之后的部分类名称即可。默认 <code>RouteServiceProvider</code> 会将 <code>routes.php</code> 文件里的路由规则包在根控制器命名空间的路由群组下。</p>
<p>若你选择在 <code>App\Http\Controllers</code> 目录内层使用 PHP 命名空间嵌套或组织控制器，只要使用相对于 <code>App\Http\Controllers</code> 根命名空间的特定类名称即可。因此，若你的控制器类全名为 <code>App\Http\Controllers\Photos\AdminController</code>，你可以像这样注册一个路由：</p>
<pre><code>Route::get('foo', 'Photos\AdminController@method');</code></pre>
<h4>命名控制器路由</h4>
<p>就像闭包路由，你可以指定控制器路由的名称：</p>
<pre><code>Route::get('foo', ['uses' =&gt; 'FooController@method', 'as' =&gt; 'name']);</code></pre>
<h4>控制器行为的 URLs</h4>
<p>你也可以使用 <code>route</code> 辅助函数，生成命名控制器路由的 URL：</p>
<pre><code>$url = route('name');</code></pre>
<p>一旦你指定了控制器路由的名称，则可以很容易地生成能实现该行为的 URL。你也可以使用 <code>action</code> 辅助函数生成指向控制器行为的 URL。同样地，我们只需指定基类命名空间 <code>App\Http\Controllers</code> 之后的部分控制器类名称就可以了：</p>
<pre><code>$url = action('FooController@method');</code></pre>
<p>你可以使用 <code>Route</code> facade 的 <code>currentRouteAction</code> 方法访问正在运行的控制器行为名称：</p>
<pre><code>$action = Route::currentRouteAction();</code></pre>
<p><a name="controller-middleware"></a></p>
<h2>控制器中间件</h2>
<p>可将<a href="middleware.htm" tppabs="http://laravel-china.org/docs/5.1/middleware">中间件</a>指定给控制器路由，例如：</p>
<pre><code>Route::get('profile', [
    'middleware' =&gt; 'auth',
    'uses' =&gt; 'UserController@showProfile'
]);</code></pre>
<p>不过，在控制器构造器中指定中间件会更为方便。在控制器构造器中使用 <code>middleware</code> 方法，你可以很容易地将中间件指定给控制器。你甚至可以对中间件作出限制，仅将它提供给控制器类中的某些方法。</p>
<pre><code>class UserController extends Controller
{
    /**
     * 添加一个 UserController 实例。
     *
     * @return void
     */
    public function __construct()
    {
        $this-&gt;middleware('auth');

        $this-&gt;middleware('log', ['only' =&gt; ['fooAction', 'barAction']]);

        $this-&gt;middleware('subscribed', ['except' =&gt; ['fooAction', 'barAction']]);
    }
}</code></pre>
<p><a name="restful-resource-controllers"></a></p>
<h2>RESTful 资源控制器</h2>
<p>资源控制器让你可以轻松地创建与资源相关的 RESTful 控制器。例如，你可能想要创建一个用来处理应用程序保存「相片」时发送 HTTP 请求的控制器。使用 <code>make:controller</code> Artisan 命令，我们可以快速地创建一个像这样的控制器：</p>
<pre><code>php artisan make:controller PhotosController</code></pre>
<p>此 Artisan 命令会生成 <code>app/Http/Controllers/PhotosController.php</code> 控制器文件。此控制器会包含用来操作可获取到的各种资源的方法。</p>
<p>接下来，你可以在控制器中注册资源化路由：</p>
<pre><code>Route::resource('photos', 'PhotosController');</code></pre>
<p>这一条路由声明会创建多个路由，用来处理各式各样和相片资源相关的的 RESTful 行为。同样地，生成的控制器有着各种和这些行为绑定的方法，包含要处理的 URI 及动词的记录通知。</p>
<h4>由资源控制器处理的行为</h4>
<table>
<thead>
<tr>
<th style="text-align: left;">动词</th>
<th style="text-align: left;">路径</th>
<th style="text-align: left;">行为（方法）</th>
<th style="text-align: left;">路由名称</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">GET</td>
<td style="text-align: left;"><code>/photos</code></td>
<td style="text-align: left;">index</td>
<td style="text-align: left;">photos.index</td>
</tr>
<tr>
<td style="text-align: left;">GET</td>
<td style="text-align: left;"><code>/photos/create</code></td>
<td style="text-align: left;">create</td>
<td style="text-align: left;">photos.create</td>
</tr>
<tr>
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/photos</code></td>
<td style="text-align: left;">store</td>
<td style="text-align: left;">photos.store</td>
</tr>
<tr>
<td style="text-align: left;">GET</td>
<td style="text-align: left;"><code>/photos/{id}</code></td>
<td style="text-align: left;">show</td>
<td style="text-align: left;">photos.show</td>
</tr>
<tr>
<td style="text-align: left;">GET</td>
<td style="text-align: left;"><code>/photos/{id}/edit</code></td>
<td style="text-align: left;">edit</td>
<td style="text-align: left;">photos.edit</td>
</tr>
<tr>
<td style="text-align: left;">PUT/PATCH</td>
<td style="text-align: left;"><code>/photos/{id}</code></td>
<td style="text-align: left;">update</td>
<td style="text-align: left;">photos.update</td>
</tr>
<tr>
<td style="text-align: left;">DELETE</td>
<td style="text-align: left;"><code>/photos/{id}</code></td>
<td style="text-align: left;">destroy</td>
<td style="text-align: left;">photos.destroy</td>
</tr>
</tbody>
</table>
<p><a name="restful-partial-resource-routes"></a></p>
<h4>部分资源路由</h4>
<p>声明资源路由时，你可以指定让此路由仅处理一部分的行为：</p>
<pre><code>Route::resource('photos', 'PhotosController',
                ['only' =&gt; ['index', 'show']]);

Route::resource('photos', 'PhotosController',
                ['except' =&gt; ['create', 'store', 'update', 'destroy']]);</code></pre>
<p><a name="restful-naming-resource-routes"></a></p>
<h4>命名资源路由</h4>
<p>所有的资源控制器行为默认都有一路由名称；不过你可以在选项中传递一个 <code>names</code> 数组来重写这些名称：</p>
<pre><code>Route::resource('photos', 'PhotosController',
                ['names' =&gt; ['create' =&gt; 'photo.build']]);</code></pre>
<p><a name="restful-nested-resources"></a></p>
<h4>嵌套资源</h4>
<p>有时你可能会需要对「嵌套」资源定义路由。例如，相片资源可能会附带多个「评论」。要「嵌套」此资源控制器，可在路由声明中使用「点」记号：</p>
<pre><code>Route::resource('photos.comments', 'PhotoCommentController');</code></pre>
<p>此路由会注册一个「嵌套」资源，可通过类似这样的 URL 来访问它：<code>photos/{photos}/comments/{comments}</code>。</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use App\Http\Controllers\Controller;

class PhotoCommentController extends Controller
{
    /**
     * 显示指定相片的评论。
     *
     * @param  int  $photoId
     * @param  int  $commentId
     * @return Response
     */
    public function show($photoId, $commentId)
    {
        //
    }
}</code></pre>
<p><a name="restful-supplementing-resource-controllers"></a></p>
<h4>附加资源控制器</h4>
<p>如果想在资源控制器中默认的资源路由之外加入其它额外路由，则应该在调用 <code>Route::resource</code> <strong>之前</strong> 定义这些路由。否则，由 <code>resource</code> 方法定义的路由可能会不小心覆盖你附加的路由：</p>
<pre><code>Route::get('photos/popular', 'PhotosController@method');

Route::resource('photos', 'PhotosController');</code></pre>
<p><a name="implicit-controllers"></a></p>
<h2>隐式控制器</h2>
<p>Laravel 让你能够轻易地通过定义单个路由来处理控制器类中的各种行为。首先，使用 <code>Route::controller</code> 方法来定义路由。<code>controller</code> 方法接受两个参数。第一个参数是控制器所处理的基本 URI，第二个是控制器的类名称：</p>
<pre><code>Route::controller('users', 'UserController');</code></pre>
<p>接下来，只要在控制器中加入方法。方法的名称应由它们所响应的 HTTP 动词作为开头，紧跟着首字母大写的 URI 所组成：</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

class UserController extends Controller
{
    /**
     * 响应对 GET /users 的请求
     */
    public function getIndex()
    {
        //
    }

    /**
     * 响应对 GET /users/show/1 的请求
     */
    public function getShow($id)
    {
        //
    }

    /**
     * 响应对 GET /users/admin-profile 的请求
     */
    public function getAdminProfile()
    {
        //
    }

    /**
     * 响应对 POST /users/profile 的请求
     */
    public function postProfile()
    {
        //
    }
}</code></pre>
<p>正如你在上述例子中所看到的，<code>index</code> 方法会响应控制器所处理的根 URI，在这个例子中是 <code>users</code>。</p>
<h4>分派路由名称</h4>
<p>如果你想要<a href="routing.htm#named-routes" tppabs="http://laravel-china.org/docs/5.1/routing#named-routes">命名</a>控制器中的某些路由，你可以在 <code>controller</code> 方法中传入一个名称数组作为第三个参数：</p>
<pre><code>Route::controller('users', 'UserController', [
    'getShow' =&gt; 'user.show',
]);</code></pre>
<p><a name="dependency-injection-and-controllers"></a></p>
<h2>依赖注入与控制器</h2>
<h4>构造器注入</h4>
<p>Laravel <a href="container.htm" tppabs="http://laravel-china.org/docs/5.1/container">服务容器</a>用于解析所有的 Laravel 控制器。因此，在此构造器中，你可以对控制器需要的任何依赖使用类型提示。依赖会自动被解析并注入控制器实例之中。</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use Illuminate\Routing\Controller;
use App\Repositories\UserRepository;

class UserController extends Controller
{
    /**
     * 用户保存库实例。
     */
    protected $users;

    /**
     * 创建新的控制器实例。
     *
     * @param  UserRepository  $users
     * @return void
     */
    public function __construct(UserRepository $users)
    {
        $this-&gt;users = $users;
    }
}</code></pre>
<p>当然，你也可以对任何的 <a href="contracts.htm" tppabs="http://laravel-china.org/docs/5.1/contracts">Laravel contract</a> 使用类型提示。若容器能够解析它，你就可以使用类型提示。</p>
<h4>方法注入</h4>
<p>除了构造器注入之外，你也可以对控制器行为方法的依赖使用类型提示。例如，让我们对 <code>Illuminate\Http\Request</code> 实例的其中一个方法使用类型提示：</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Routing\Controller;

class UserController extends Controller
{
    /**
     * 保存一个新的用户。
     *
     * @param  Request  $request
     * @return Response
     */
    public function store(Request $request)
    {
        $name = $request-&gt;input('name');

        //
    }
}</code></pre>
<p>若你想要控制器方法能预期从路由参数获得输入值，只要在你其它的依赖之后列出路由参数即可。例如，如果你的路由被定义成这个样子：</p>
<pre><code>Route::put('user/{id}', 'UserController@update');</code></pre>
<p>你依然可以做 <code>Illuminate\Http\Request</code> 类型提示并通过类似下面例子这样来定义你的控制器方法，访问你的路由参数 <code>id</code>：</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Routing\Controller;

class UserController extends Controller
{
    /**
     * 更新指定的用户。
     *
     * @param  Request  $request
     * @param  int  $id
     * @return Response
     */
    public function update(Request $request, $id)
    {
        //
    }
}</code></pre>
<p><a name="route-caching"></a></p>
<h2>路由缓存</h2>
<blockquote>
<p><strong>注意：</strong> 路由缓存并不会作用在基于闭包的路由。要使用路由缓存，你必须将所有闭包路由转换为控制器类。</p>
</blockquote>
<p>若你的应用程序完全通过控制器使用路由，你可以利用 Laravel 的路由缓存。使用路由缓存可以大幅降低注册你应用程序全部的路由所需的时间。在某些情况下，你的路由注册甚至可以快上一百倍！要生成路由缓存，只要运行 <code>route:cache</code> 此 Artisan 命令：</p>
<pre><code>php artisan route:cache</code></pre>
<p>这就可以了！现在你的缓存路由文件将被用来代替 <code>app/Http/routes.php</code> 这一文件。请记得，若你添加了任何新的路由，就必须生成新的路由缓存。因此你可能希望只在你的项目部署时才运行 <code>route:cache</code> 这一命令。</p>
<p>要移除缓存路由文件而不生成新的缓存，请使用 <code>route:clear</code> 命令：</p>
<pre><code>php artisan route:clear</code></pre>
<blockquote>
<p><strong><a href="javascript:if(confirm('http://github.com/summerblue  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://github.com/summerblue'" tppabs="http://github.com/summerblue">Summer</a>：</strong> 想知道更多 Laravel 程序调优的技巧？请参阅：<a href="javascript:if(confirm('https://phphub.org/topics/2020  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://phphub.org/topics/2020'" tppabs="https://phphub.org/topics/2020">Laravel 5 程序优化技巧</a></p>
</blockquote>
		</div>

		<div class="main-footer" style="border-top:1px dashed rgba(0, 0, 0, 0.1);padding-top: 30px;margin-top:30px;margin-bottom: 20px;">
			<div class="prev-next-wrap clearfix">

									<a class="btn btn-default pull-left" href="middleware.htm" tppabs="http://laravel-china.org/docs/5.1/middleware"><i class="fa fa-arrow-left"></i> 中间件</a>
				
			    &nbsp;
								    <a class="btn btn-default pull-right" href="requests.htm" tppabs="http://laravel-china.org/docs/5.1/requests">请求 <i class="fa fa-arrow-right"></i></a>
							</div>
		</div>

	</article>
</div>

		<footer class="main">
			<ul>
				<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">文档</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS 速查表</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\nļδ Teleport Pro أΪ һʹδ֧Эĵַ(: gopher)  \n\nҪӷ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel 社区</a>
</li>
			</ul>
			<p>Laravel is a trademark of Taylor Otwell. Copyright &copy; Taylor Otwell.</p>
			<p class="less-significant"><a href="javascript:if(confirm('http://jackmcdade.com/  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://jackmcdade.com/'" tppabs="http://jackmcdade.com/">Design by Jack McDade</a></p>

			<p class="less-significant">
				<a href="javascript:if(confirm('http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao  \n\nļδ Teleport Pro أΪ λʼַõı߽·С  \n\nҪӷ?'))window.location='http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao'" tppabs="http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao" target="_blank">由 UCloud 赞助  <img src="dYfOYswiQY.png" tppabs="https://dn-phphub.qbox.me/uploads/images/201605/03/1/dYfOYswiQY.png" width="98" data-toggle="tooltip" data-placement="top" title="本站服务器由 UCloud 赞助"></a>.
		      </p>
		</footer>

	</div>

	<script src="laravel.js" tppabs="http://laravel-china.org/assets/js/laravel.js"></script>
	<script src="viewport-units-buggyfill.js" tppabs="http://laravel-china.org/assets/js/viewport-units-buggyfill.js"></script>
	<script>window.viewportUnitsBuggyfill.init();</script>
    <script>

		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','analytics.js'/*tpa=http://7xijlf.com2.z0.glb.qiniucdn.com/js/analytics.js*/,'ga');

		ga('create', 'UA-53903425-7', 'auto');
		ga('send', 'pageview');

		$(window).load(function() {
		  // When the page has loaded
		  $(".main-content").fadeIn(10);
		});
    </script>
</body>
</html>
