<!doctype html>
<html>
<head>
	<meta charset=UTF-8"utf-8">
	<title>Laravel 4.2 ä¸­æ–‡æ–‡æ¡£ï¼šEloquent ORM
</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="author" content="@summerblue">
	<meta name="description" content="Eloquent ORM,ä»‹ç»,åŸºæœ¬ç”¨æ³•,Mass Assignment,æ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤,è½¯åˆ é™¤ï¼ˆ Soft Deleting ï¼‰,æ—¶é—´æˆ³è®°,èŒƒå›´æŸ¥è¯¢,å…³è”,å…³è”æŸ¥è¯¢,é¢„è½½å…¥ï¼ˆ Eager Loading ï¼‰,æ–°å¢å…³è”æ¨¡å‹,æ›´æ–°ä¸Šå±‚æ¨¡å‹æ—¶é—´æˆ³,æ“ä½œæ¢çº½è¡¨,Collections,è·å–å™¨å’Œä¿®æ”¹å™¨,æ—¥æœŸè½¬æ¢å™¨,æ¨¡å‹äº‹ä»¶,æ¨¡å‹è§‚å¯Ÿè€…,è½¬æ¢æ•°ç»„ / JSON,ä»‹ç»,Laravel çš„ Eloquent...
">
	<meta name="keywords" content="Eloquent ORM,laravel4.2æ–‡æ¡£,laravel4.2ä¸­æ–‡æ–‡æ¡£,laravelä¸­å›½,laravelä¸­æ–‡,laravelæ¡†æ¶ä¸­æ–‡,laravelæ–‡æ¡£,laravelæ¡†æ¶ä¸­å›½,laravelä¸­æ–‡æ–‡æ¡£
">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--[if lte IE 9]>
		<script src="html5shiv.min.js" tppabs="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
	<![endif]-->
	<link rel="stylesheet" href="laravel.css" tppabs="http://laravel-china.org/assets/css/laravel.css">
	<style media="screen">
		div.main-content {
		  display: none;
		}
		.loading-effect {
			position: fixed;
			left: 50%;
			top:300px;
		    z-index: -1;
		}
	</style>
</head>
<body class="docs language-php ">

	<span class="overlay"></span>

	<div class="loading-effect">
		<div class="loader-inner line-scale">
		      <div></div>
		      <div></div>
		      <div></div>
		      <div></div>
		      <div></div>
		  </div>
	</div>


	<div class="main-content">

		<nav class="main">
			<div class="container">
				<a href="javascript:if(confirm('http://laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/" class="brand">
					<img src="laravel-logo.png" tppabs="http://laravel-china.org/assets/img/laravel-logo.png" height="30">
					Laravel
				</a>

				<div class="responsive-sidebar-nav">
					<a href="#" class="toggle-slide menu-link btn">&#9776;</a>
				</div>

									<div class="switcher">
	<div class="dropdown">
		<button class="btn dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
			<!--<span class="faint">v</span> -->
			4.2
			<span class="caret"></span>
		</button>
		<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
							<li role="presentation">
					<a role="menuitem" tabindex="-1" href="eloquent.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent">5.1</a>
				</li>
							<li role="presentation">
					<a role="menuitem" tabindex="-1" href="eloquent-1.htm" tppabs="http://laravel-china.org/docs/4.2/eloquent">4.2</a>
				</li>
					</ul>
	</div>
</div>
				
				<ul class="main-nav">
					<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">æ–‡æ¡£</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS é€ŸæŸ¥è¡¨</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel ç¤¾åŒº</a>
</li>
				</ul>
			</div>
		</nav>

		<nav id="slide-menu" class="slide-menu" role="navigation">

	<div class="brand">
		<a href="javascript:if(confirm('http://laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/">
			<img src="laravel-logo-white.png" tppabs="http://laravel-china.org/assets/img/laravel-logo-white.png" height="50">
		</a>
	</div>

	<ul class="slide-main-nav">
		<li><a href="javascript:if(confirm('http://laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/">Home</a></li>
		<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">æ–‡æ¡£</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS é€ŸæŸ¥è¡¨</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel ç¤¾åŒº</a>
</li>
	</ul>

	<div class="slide-docs-nav">
		<h2>æ–‡æ¡£</h2>

		<a type="button" class="turnofflight"><i class="fa fa-lightbulb-o"></i> <i class="fa fa-star-o"></i> å¤œé—´æ¨¡å¼ </a>
		<ul>
<li>å‰è¨€
<ul>
<li><a href="introduction.htm" tppabs="http://laravel-china.org/docs/4.2/introduction">Laravel ä»‹ç»</a></li>
<li><a href="quick.htm" tppabs="http://laravel-china.org/docs/4.2/quick">å¿«é€Ÿå…¥é—¨</a></li>
<li><a href="releases-1.htm" tppabs="http://laravel-china.org/docs/4.2/releases">æ¡†æ¶æ›´æ–°è®°å½•</a></li>
<li><a href="upgrade-1.htm" tppabs="http://laravel-china.org/docs/4.2/upgrade">å‡çº§æŒ‡å—</a></li>
</ul></li>
<li>å¿«é€Ÿä¸Šæ‰‹
<ul>
<li><a href="installation-1.htm" tppabs="http://laravel-china.org/docs/4.2/installation">å®‰è£…æ–‡æ¡£</a></li>
<li><a href="configuration.htm" tppabs="http://laravel-china.org/docs/4.2/configuration">é…ç½®ä¿¡æ¯</a></li>
<li><a href="homestead-1.htm" tppabs="http://laravel-china.org/docs/4.2/homestead">Homestead</a></li>
<li><a href="lifecycle-1.htm" tppabs="http://laravel-china.org/docs/4.2/lifecycle">ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ</a></li>
<li><a href="routing-1.htm" tppabs="http://laravel-china.org/docs/4.2/routing">è·¯ç”± Routing</a></li>
<li><a href="requests-1.htm" tppabs="http://laravel-china.org/docs/4.2/requests">å¤„ç†ç”¨æˆ·è¯·æ±‚å’Œè¾“å…¥</a></li>
<li><a href="responses-1.htm" tppabs="http://laravel-china.org/docs/4.2/responses">è§†å›¾å’Œå“åº”</a></li>
<li><a href="controllers-1.htm" tppabs="http://laravel-china.org/docs/4.2/controllers">æ§åˆ¶å™¨</a></li>
<li><a href="errors-1.htm" tppabs="http://laravel-china.org/docs/4.2/errors">é”™è¯¯å’Œæ—¥å¿—</a></li>
</ul></li>
<li>æ›´å¤š Laravel çŸ¥è¯†
<ul>
<li><a href="security.htm" tppabs="http://laravel-china.org/docs/4.2/security">èº«ä»½è®¤è¯åŠŸèƒ½</a></li>
<li><a href="billing-1.htm" tppabs="http://laravel-china.org/docs/4.2/billing">æ”¶è´¹ç³»ç»Ÿ</a></li>
<li><a href="cache-1.htm" tppabs="http://laravel-china.org/docs/4.2/cache">ç¼“å­˜</a></li>
<li><a href="extending.htm" tppabs="http://laravel-china.org/docs/4.2/extending">æ‰©å±•æ¡†æ¶</a></li>
<li><a href="events-1.htm" tppabs="http://laravel-china.org/docs/4.2/events">äº‹ä»¶</a></li>
<li><a href="facades-1.htm" tppabs="http://laravel-china.org/docs/4.2/facades">Facades</a></li>
<li><a href="html.htm" tppabs="http://laravel-china.org/docs/4.2/html">è¡¨å•å’ŒHTML</a></li>
<li><a href="helpers-1.htm" tppabs="http://laravel-china.org/docs/4.2/helpers">å¸®åŠ©å‡½æ•°</a></li>
<li><a href="ioc.htm" tppabs="http://laravel-china.org/docs/4.2/ioc">IoC Container</a></li>
<li><a href="localization-1.htm" tppabs="http://laravel-china.org/docs/4.2/localization">æœ¬åœ°åŒ–</a></li>
<li><a href="mail-1.htm" tppabs="http://laravel-china.org/docs/4.2/mail">é‚®ä»¶å‘é€ Mail</a></li>
<li><a href="packages-1.htm" tppabs="http://laravel-china.org/docs/4.2/packages">æ‰©å±•åŒ…å¼€å‘</a></li>
<li><a href="pagination-1.htm" tppabs="http://laravel-china.org/docs/4.2/pagination">åˆ†é¡µåŠŸèƒ½</a></li>
<li><a href="queues-1.htm" tppabs="http://laravel-china.org/docs/4.2/queues">é˜Ÿåˆ—</a></li>
<li><a href="security.htm" tppabs="http://laravel-china.org/docs/4.2/security">å®‰å…¨</a></li>
<li><a href="session-1.htm" tppabs="http://laravel-china.org/docs/4.2/session">ä¼šè¯</a></li>
<li><a href="ssh.htm" tppabs="http://laravel-china.org/docs/4.2/ssh">è¿œç¨‹è¿æ¥æ¨¡å— SSH</a></li>
<li><a href="templates.htm" tppabs="http://laravel-china.org/docs/4.2/templates">æ¨¡ç‰ˆå¼•æ“</a></li>
<li><a href="testing-1.htm" tppabs="http://laravel-china.org/docs/4.2/testing">å•å…ƒæµ‹è¯•</a></li>
<li><a href="validation-1.htm" tppabs="http://laravel-china.org/docs/4.2/validation">è¡¨å•éªŒè¯</a></li>
</ul></li>
<li>æ•°æ®åº“ Database
<ul>
<li><a href="database-1.htm" tppabs="http://laravel-china.org/docs/4.2/database">æ•°æ®åº“ç®€å•ä½¿ç”¨</a></li>
<li><a href="queries-1.htm" tppabs="http://laravel-china.org/docs/4.2/queries">æŸ¥è¯¢æ„é€ å™¨</a></li>
<li><a href="eloquent-1.htm" tppabs="http://laravel-china.org/docs/4.2/eloquent">Eloquent ORM</a></li>
<li><a href="schema.htm" tppabs="http://laravel-china.org/docs/4.2/schema">è¡¨ç»“æ„æ„é€ å™¨</a></li>
<li><a href="migrations-1.htm" tppabs="http://laravel-china.org/docs/4.2/migrations">Migrations &amp; Seeding</a></li>
<li><a href="redis-1.htm" tppabs="http://laravel-china.org/docs/4.2/redis">Redis</a></li>
</ul></li>
<li>å‘½ä»¤è¡Œ Artisan CLI
<ul>
<li><a href="artisan-1.htm" tppabs="http://laravel-china.org/docs/4.2/artisan">å‘½ä»¤è¡Œ Artisan ä»‹ç»</a></li>
<li><a href="commands.htm" tppabs="http://laravel-china.org/docs/4.2/commands">å¼€å‘ Artisan å‘½ä»¤</a></li>
</ul></li>
</ul>
	</div>

</nav>

<div class="docs-wrapper container">

	<section class="sidebar">

		<div class="header">
			<a type="button" class="btn btn-primary btn-lg btn-block turnofflight"><i class="fa fa-lightbulb-o"></i> <i class="fa fa-star-o"></i> å¤œé—´æ¨¡å¼ </a>
		</div>

		<ul>
<li>å‰è¨€
<ul>
<li><a href="introduction.htm" tppabs="http://laravel-china.org/docs/4.2/introduction">Laravel ä»‹ç»</a></li>
<li><a href="quick.htm" tppabs="http://laravel-china.org/docs/4.2/quick">å¿«é€Ÿå…¥é—¨</a></li>
<li><a href="releases-1.htm" tppabs="http://laravel-china.org/docs/4.2/releases">æ¡†æ¶æ›´æ–°è®°å½•</a></li>
<li><a href="upgrade-1.htm" tppabs="http://laravel-china.org/docs/4.2/upgrade">å‡çº§æŒ‡å—</a></li>
</ul></li>
<li>å¿«é€Ÿä¸Šæ‰‹
<ul>
<li><a href="installation-1.htm" tppabs="http://laravel-china.org/docs/4.2/installation">å®‰è£…æ–‡æ¡£</a></li>
<li><a href="configuration.htm" tppabs="http://laravel-china.org/docs/4.2/configuration">é…ç½®ä¿¡æ¯</a></li>
<li><a href="homestead-1.htm" tppabs="http://laravel-china.org/docs/4.2/homestead">Homestead</a></li>
<li><a href="lifecycle-1.htm" tppabs="http://laravel-china.org/docs/4.2/lifecycle">ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ</a></li>
<li><a href="routing-1.htm" tppabs="http://laravel-china.org/docs/4.2/routing">è·¯ç”± Routing</a></li>
<li><a href="requests-1.htm" tppabs="http://laravel-china.org/docs/4.2/requests">å¤„ç†ç”¨æˆ·è¯·æ±‚å’Œè¾“å…¥</a></li>
<li><a href="responses-1.htm" tppabs="http://laravel-china.org/docs/4.2/responses">è§†å›¾å’Œå“åº”</a></li>
<li><a href="controllers-1.htm" tppabs="http://laravel-china.org/docs/4.2/controllers">æ§åˆ¶å™¨</a></li>
<li><a href="errors-1.htm" tppabs="http://laravel-china.org/docs/4.2/errors">é”™è¯¯å’Œæ—¥å¿—</a></li>
</ul></li>
<li>æ›´å¤š Laravel çŸ¥è¯†
<ul>
<li><a href="security.htm" tppabs="http://laravel-china.org/docs/4.2/security">èº«ä»½è®¤è¯åŠŸèƒ½</a></li>
<li><a href="billing-1.htm" tppabs="http://laravel-china.org/docs/4.2/billing">æ”¶è´¹ç³»ç»Ÿ</a></li>
<li><a href="cache-1.htm" tppabs="http://laravel-china.org/docs/4.2/cache">ç¼“å­˜</a></li>
<li><a href="extending.htm" tppabs="http://laravel-china.org/docs/4.2/extending">æ‰©å±•æ¡†æ¶</a></li>
<li><a href="events-1.htm" tppabs="http://laravel-china.org/docs/4.2/events">äº‹ä»¶</a></li>
<li><a href="facades-1.htm" tppabs="http://laravel-china.org/docs/4.2/facades">Facades</a></li>
<li><a href="html.htm" tppabs="http://laravel-china.org/docs/4.2/html">è¡¨å•å’ŒHTML</a></li>
<li><a href="helpers-1.htm" tppabs="http://laravel-china.org/docs/4.2/helpers">å¸®åŠ©å‡½æ•°</a></li>
<li><a href="ioc.htm" tppabs="http://laravel-china.org/docs/4.2/ioc">IoC Container</a></li>
<li><a href="localization-1.htm" tppabs="http://laravel-china.org/docs/4.2/localization">æœ¬åœ°åŒ–</a></li>
<li><a href="mail-1.htm" tppabs="http://laravel-china.org/docs/4.2/mail">é‚®ä»¶å‘é€ Mail</a></li>
<li><a href="packages-1.htm" tppabs="http://laravel-china.org/docs/4.2/packages">æ‰©å±•åŒ…å¼€å‘</a></li>
<li><a href="pagination-1.htm" tppabs="http://laravel-china.org/docs/4.2/pagination">åˆ†é¡µåŠŸèƒ½</a></li>
<li><a href="queues-1.htm" tppabs="http://laravel-china.org/docs/4.2/queues">é˜Ÿåˆ—</a></li>
<li><a href="security.htm" tppabs="http://laravel-china.org/docs/4.2/security">å®‰å…¨</a></li>
<li><a href="session-1.htm" tppabs="http://laravel-china.org/docs/4.2/session">ä¼šè¯</a></li>
<li><a href="ssh.htm" tppabs="http://laravel-china.org/docs/4.2/ssh">è¿œç¨‹è¿æ¥æ¨¡å— SSH</a></li>
<li><a href="templates.htm" tppabs="http://laravel-china.org/docs/4.2/templates">æ¨¡ç‰ˆå¼•æ“</a></li>
<li><a href="testing-1.htm" tppabs="http://laravel-china.org/docs/4.2/testing">å•å…ƒæµ‹è¯•</a></li>
<li><a href="validation-1.htm" tppabs="http://laravel-china.org/docs/4.2/validation">è¡¨å•éªŒè¯</a></li>
</ul></li>
<li>æ•°æ®åº“ Database
<ul>
<li><a href="database-1.htm" tppabs="http://laravel-china.org/docs/4.2/database">æ•°æ®åº“ç®€å•ä½¿ç”¨</a></li>
<li><a href="queries-1.htm" tppabs="http://laravel-china.org/docs/4.2/queries">æŸ¥è¯¢æ„é€ å™¨</a></li>
<li><a href="eloquent-1.htm" tppabs="http://laravel-china.org/docs/4.2/eloquent">Eloquent ORM</a></li>
<li><a href="schema.htm" tppabs="http://laravel-china.org/docs/4.2/schema">è¡¨ç»“æ„æ„é€ å™¨</a></li>
<li><a href="migrations-1.htm" tppabs="http://laravel-china.org/docs/4.2/migrations">Migrations &amp; Seeding</a></li>
<li><a href="redis-1.htm" tppabs="http://laravel-china.org/docs/4.2/redis">Redis</a></li>
</ul></li>
<li>å‘½ä»¤è¡Œ Artisan CLI
<ul>
<li><a href="artisan-1.htm" tppabs="http://laravel-china.org/docs/4.2/artisan">å‘½ä»¤è¡Œ Artisan ä»‹ç»</a></li>
<li><a href="commands.htm" tppabs="http://laravel-china.org/docs/4.2/commands">å¼€å‘ Artisan å‘½ä»¤</a></li>
</ul></li>
</ul>
	</section>

	<article>

		<div class="alert alert-warning" role="alert">

			<h4>æ‹¥æŠ± Laravel 5.1 LTS</h4>
			<p>
				å¼ºçƒˆå»ºè®®åœ¨ 2018 å¹´ä¹‹å‰ä½¿ç”¨ Laravel 5.1 æ¥æ„å»ºé¡¹ç›®ï¼ŒLaravel 5.1 æ˜¯ LTS çš„å‘è¡Œç‰ˆæœ¬, å‘è¡Œäº 2015 å¹´ 6 æœˆä»½ï¼Œè‡ªå‘å¸ƒèµ·æä¾›ä¸¤å¹´æ—¶é—´çš„ Bug ä¿®å¤ï¼ˆ2017 å¹´ 6 æœˆï¼‰, 3 å¹´æ—¶é—´çš„å®‰å…¨ä¿®å¤ï¼ˆ2018 å¹´ 6 æœˆï¼‰ã€‚
			</p>
			 <p>
			 	LTS ç‰ˆæœ¬æ˜¯æ­¤é¡¹ç›®èƒ½æä¾›çš„æœ€é•¿æ—¶é—´ç»´æŠ¤ç‰ˆæœ¬ã€‚ä¸€èˆ¬çš„å‘è¡Œç‰ˆæœ¬, åªæä¾› 6 ä¸ªæœˆçš„ Bug ä¿®å¤æ”¯æŒ, ä¸€å¹´çš„å®‰å…¨ä¿®å¤æ”¯æŒ.
			 </p>
		</div>

		<div class="main-content">
			<h1>Eloquent ORM</h1>
<ul>
<li><a href="#introduction">ä»‹ç»</a></li>
<li><a href="#basic-usage">åŸºæœ¬ç”¨æ³•</a></li>
<li><a href="#mass-assignment">Mass Assignment</a></li>
<li><a href="#insert-update-delete">æ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤</a></li>
<li><a href="#soft-deleting">è½¯åˆ é™¤ï¼ˆ Soft Deleting ï¼‰</a></li>
<li><a href="#timestamps">æ—¶é—´æˆ³è®°</a></li>
<li><a href="#query-scopes">èŒƒå›´æŸ¥è¯¢</a></li>
<li><a href="#relationships">å…³è”</a></li>
<li><a href="#querying-relations">å…³è”æŸ¥è¯¢</a></li>
<li><a href="#eager-loading">é¢„è½½å…¥ï¼ˆ Eager Loading ï¼‰</a></li>
<li><a href="#inserting-related-models">æ–°å¢å…³è”æ¨¡å‹</a></li>
<li><a href="#touching-parent-timestamps">æ›´æ–°ä¸Šå±‚æ¨¡å‹æ—¶é—´æˆ³</a></li>
<li><a href="#working-with-pivot-tables">æ“ä½œæ¢çº½è¡¨</a></li>
<li><a href="#collections">Collections</a></li>
<li><a href="#accessors-and-mutators">è·å–å™¨å’Œä¿®æ”¹å™¨</a></li>
<li><a href="#date-mutators">æ—¥æœŸè½¬æ¢å™¨</a></li>
<li><a href="#model-events">æ¨¡å‹äº‹ä»¶</a></li>
<li><a href="#model-observers">æ¨¡å‹è§‚å¯Ÿè€…</a></li>
<li><a href="#converting-to-arrays-or-json">è½¬æ¢æ•°ç»„ / JSON</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2>ä»‹ç»</h2>
<p>Laravel çš„ Eloquent ORM æä¾›äº†æ¼‚äº®ã€ç®€æ´çš„ ActiveRecord å®ç°æ¥å’Œæ•°æ®åº“çš„äº’åŠ¨ã€‚ æ¯ä¸ªæ•°æ®åº“è¡¨ä¼šå’Œä¸€ä¸ªå¯¹åº”çš„ã€Œæ¨¡å‹ã€äº’åŠ¨ã€‚</p>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè®°å¾—æŠŠ <code>app/config/database.php</code> é‡Œçš„æ•°æ®åº“è¿æ¥é…ç½®å¥½ã€‚</p>
<p><a name="basic-usage"></a></p>
<h2>åŸºæœ¬ç”¨æ³•</h2>
<p>æˆ‘ä»¬å…ˆä»å»ºç«‹ä¸€ä¸ª Eloquent æ¨¡å‹å¼€å§‹ã€‚æ¨¡å‹é€šå¸¸æ”¾åœ¨ <code>app/models</code> ç›®å½•ä¸‹ï¼Œä½†æ˜¯æ‚¨å¯ä»¥å°†å®ƒä»¬æ”¾åœ¨ä»»ä½•åœ°æ–¹ï¼Œåªè¦èƒ½é€šè¿‡ <code>composer.json</code> è¢«è‡ªåŠ¨è½½å…¥ã€‚</p>
<h4>å®šä¹‰ä¸€ä¸ª Eloquent æ¨¡å‹</h4>
<pre><code>class User extends Eloquent {}</code></pre>
<p>æ³¨æ„æˆ‘ä»¬å¹¶æ²¡æœ‰å‘Šè¯‰ Eloquent <code>User</code> æ¨¡å‹ä¼šä½¿ç”¨å“ªä¸ªæ•°æ®åº“è¡¨ã€‚è‹¥æ²¡æœ‰ç‰¹åˆ«æŒ‡å®šï¼Œç³»ç»Ÿä¼šé»˜è®¤è‡ªåŠ¨å¯¹åº”åç§°ä¸ºã€Œç±»åç§°çš„å°å†™å¤æ•°å½¢æ€ã€çš„æ•°æ®åº“è¡¨ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ Eloquent ä¼šå‡è®¾ <code>User</code> å°†æŠŠæ•°æ®å­˜åœ¨ <code>users</code> æ•°æ®åº“è¡¨ã€‚å¯ä»¥åœ¨ç±»é‡Œå®šä¹‰ <code>table</code> å±æ€§è‡ªå®šä¹‰è¦å¯¹åº”çš„æ•°æ®åº“è¡¨ã€‚</p>
<pre><code>class User extends Eloquent {

    protected $table = 'my_users';

}</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> Eloquent ä¹Ÿä¼šå‡è®¾æ¯ä¸ªæ•°æ®åº“è¡¨éƒ½æœ‰ä¸€ä¸ªå­—æ®µåç§°ä¸º <code>id</code> çš„ä¸»é”®ã€‚æ‚¨å¯ä»¥åœ¨ç±»é‡Œå®šä¹‰ <code>primaryKey</code> å±æ€§æ¥é‡å†™ã€‚åŒæ ·çš„ï¼Œæ‚¨ä¹Ÿå¯ä»¥å®šä¹‰ <code>connection</code> å±æ€§ï¼ŒæŒ‡å®šæ¨¡å‹è¿æ¥åˆ°ä¸“å±çš„æ•°æ®åº“è¿æ¥ã€‚</p>
</blockquote>
<p>å®šä¹‰å¥½æ¨¡å‹ä¹‹åï¼Œæ‚¨å°±å¯ä»¥ä»æ•°æ®åº“è¡¨æ–°å¢åŠè·å–æ•°æ®äº†ã€‚æ³¨æ„åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨æ•°æ®åº“è¡¨é‡Œéœ€è¦æœ‰ <code>updated_at</code> å’Œ <code>created_at</code> ä¸¤ä¸ªå­—æ®µã€‚å¦‚æœæ‚¨ä¸æƒ³è®¾å®šæˆ–è‡ªåŠ¨æ›´æ–°è¿™ä¸¤ä¸ªå­—æ®µï¼Œåˆ™å°†ç±»é‡Œçš„ <code>$timestamps</code> å±æ€§è®¾ä¸º <code>false</code>å³å¯ã€‚</p>
<h4>å–å‡ºæ‰€æœ‰æ¨¡å‹æ•°æ®</h4>
<pre><code>$users = User::all();</code></pre>
<h4>æ ¹æ®ä¸»é”®å–å‡ºä¸€æ¡æ•°æ®</h4>
<pre><code>$user = User::find(1);

var_dump($user-&gt;name);</code></pre>
<blockquote>
<p><strong>æç¤ºï¼š</strong> æ‰€æœ‰<a href="queries-1.htm" tppabs="http://laravel-china.org/docs/4.2/queries">æŸ¥è¯¢æ„é€ å™¨</a>é‡Œçš„æ–¹æ³•ï¼ŒæŸ¥è¯¢ Eloquent æ¨¡å‹æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚</p>
</blockquote>
<h4>æ ¹æ®ä¸»é”®å–å‡ºä¸€æ¡æ•°æ®æˆ–æŠ›å‡ºå¼‚å¸¸</h4>
<p>æœ‰æ—¶, æ‚¨å¯èƒ½æƒ³è¦åœ¨æ‰¾ä¸åˆ°æ¨¡å‹æ•°æ®æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œä»¥æ•æ‰å¼‚å¸¸å¹¶è®© <code>App::error</code> å¤„ç†å¹¶æ˜¾ç¤º 404 é¡µé¢ã€‚</p>
<pre><code>$model = User::findOrFail(1);

$model = User::where('votes', '&gt;', 100)-&gt;firstOrFail();</code></pre>
<p>è¦æ³¨å†Œé”™è¯¯å¤„ç†ï¼Œå¯ä»¥ç›‘å¬ <code>ModelNotFoundException</code></p>
<pre><code>use Illuminate\Database\Eloquent\ModelNotFoundException;

App::error(function(ModelNotFoundException $e)
{
    return Response::make('Not Found', 404);
});</code></pre>
<h4>Eloquent æ¨¡å‹ç»“åˆæŸ¥è¯¢è¯­æ³•</h4>
<pre><code>$users = User::where('votes', '&gt;', 100)-&gt;take(10)-&gt;get();

foreach ($users as $user)
{
    var_dump($user-&gt;name);
}</code></pre>
<h4>Eloquent èšåˆæŸ¥è¯¢</h4>
<p>å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨æŸ¥è¯¢æ„é€ å™¨çš„èšåˆæŸ¥è¯¢æ–¹æ³•ã€‚</p>
<pre><code>$count = User::where('votes', '&gt;', 100)-&gt;count();</code></pre>
<p>å¦‚æœæ²¡åŠæ³•ä½¿ç”¨æµç•…çš„æ¥å£äº§ç”Ÿå‡ºæŸ¥è¯¢è¯­å¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>whereRaw</code>ï¼š</p>
<pre><code>$users = User::whereRaw('age &gt; ? and votes = 100', array(25))-&gt;get();</code></pre>
<h4>æ‹†åˆ†æŸ¥è¯¢</h4>
<p>å¦‚æœæ‚¨è¦å¤„ç†éå¸¸å¤šï¼ˆæ•°åƒæ¡ï¼‰Eloquent æŸ¥è¯¢ç»“æœï¼Œä½¿ç”¨ <code>chunk</code> æ–¹æ³•å¯ä»¥è®©æ‚¨é¡ºåˆ©å·¥ä½œè€Œä¸ä¼šåƒæ‰å†…å­˜ï¼š</p>
<pre><code>User::chunk(200, function($users)
{
    foreach ($users as $user)
    {
        //
    }
});</code></pre>
<p>ä¼ åˆ°æ–¹æ³•é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ¯æ¬¡ã€Œæ‹†åˆ†ã€è¦å–å‡ºçš„æ•°æ®æ•°é‡ã€‚ç¬¬äºŒä¸ªå‚æ•°çš„é—­åˆå‡½æ•°ä¼šåœ¨æ¯æ¬¡å–å‡ºæ•°æ®æ—¶è¢«è°ƒç”¨ã€‚</p>
<h4>æŒ‡å®šæŸ¥è¯¢æ—¶è¿æ¥æ•°æ®åº“</h4>
<p>æ‚¨ä¹Ÿå¯ä»¥æŒ‡å®šåœ¨æ‰§è¡Œ Eloquent æŸ¥è¯¢æ—¶è¦ä½¿ç”¨å“ªä¸ªæ•°æ®åº“è¿çº¿ã€‚åªè¦ä½¿ç”¨ <code>on</code> æ–¹æ³•ï¼š</p>
<pre><code>$user = User::on('connection-name')-&gt;find(1);</code></pre>
<p><a name="mass-assignment"></a></p>
<h2>Mass Assignment</h2>
<p>åœ¨å»ºç«‹ä¸€ä¸ªæ–°çš„æ¨¡å‹æ—¶ï¼Œæ‚¨æŠŠå±æ€§ä»¥æ•°ç»„çš„æ–¹å¼ä¼ å…¥ <code>create</code> æ–¹æ³•ï¼Œè¿™äº›å±æ€§å€¼ä¼šç»ç”± mass-assignment å­˜æˆæ¨¡å‹æ•°æ®ã€‚è¿™éå¸¸æ–¹ä¾¿ï¼Œç„¶è€Œï¼Œè‹¥ç›²ç›®åœ°å°†ç”¨æˆ·è¾“å…¥å­˜åˆ°æ¨¡å‹æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆä¸¥é‡çš„å®‰å…¨éšæ‚£ã€‚å¦‚æœç›²ç›®çš„å­˜å…¥ç”¨æˆ·è¾“å…¥ï¼Œç”¨æˆ·å¯ä»¥éšæ„çš„ä¿®æ”¹<strong>ä»»ä½•</strong>ä»¥åŠ<strong>æ‰€æœ‰</strong>æ¨¡å‹çš„å±æ€§ã€‚åŸºäºè¿™ä¸ªç†ç”±ï¼Œæ‰€æœ‰ Eloquent æ¨¡å‹é»˜è®¤ä¼šé˜²æ­¢ mass-assignment ã€‚</p>
<p>åœ¨æ¨¡å‹é‡Œè®¾å®š <code>fillable</code> æˆ– <code>guarded</code> å±æ€§ä½œä¸ºå¼€å§‹ã€‚</p>
<h4>å®šä¹‰æ¨¡å‹ Fillable å±æ€§</h4>
<p><code>fillable</code> å±æ€§æŒ‡å®šäº†å“ªäº›å­—æ®µæ”¯æŒ mass-assignable ã€‚å¯ä»¥è®¾å®šåœ¨ç±»é‡Œæˆ–æ˜¯å»ºç«‹å®ä¾‹åè®¾å®šã€‚</p>
<pre><code>class User extends Eloquent {

    protected $fillable = array('first_name', 'last_name', 'email');

}</code></pre>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œåªæœ‰ä¸‰ä¸ªå±æ€§ mass-assignable ã€‚</p>
<h4>å®šä¹‰æ¨¡å‹ Guarded å±æ€§</h4>
<p><code>guarded</code> ä¸ <code>fillable</code> ç›¸åï¼Œæ˜¯ä½œä¸ºã€Œé»‘åå•ã€è€Œä¸æ˜¯ã€Œç™½åå•ã€ï¼š</p>
<pre><code>class User extends Eloquent {

    protected $guarded = array('id', 'password');

}</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> ä½¿ç”¨ <code>guarded</code> æ—¶ï¼Œ <code>Input::get()</code> æˆ–ä»»ä½•ç”¨æˆ·å¯ä»¥æ§åˆ¶çš„æœªè¿‡æ»¤æ•°æ®ï¼Œæ°¸è¿œä¸åº”è¯¥ä¼ å…¥ <code>save</code> æˆ– <code>update</code> æ–¹æ³•ï¼Œå› ä¸ºæ²¡æœ‰åœ¨ã€Œé»‘åå•ã€å†…çš„å­—æ®µå¯èƒ½è¢«æ›´æ–°ã€‚</p>
</blockquote>
<h4>é˜»æŒ¡æ‰€æœ‰å±æ€§è¢« Mass Assignment</h4>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ <code>id</code> å’Œ <code>password</code> å±æ€§<strong>ä¸ä¼š</strong>è¢« mass assignedï¼Œè€Œæ‰€æœ‰å…¶ä»–çš„å±æ€§åˆ™æ˜¯ mass assignableã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ guard å±æ€§é˜»æ­¢<strong>æ‰€æœ‰</strong>å±æ€§è¢« mass assignment ï¼š</p>
<pre><code>protected $guarded = array('*');</code></pre>
<p><a name="insert-update-delete"></a></p>
<h2>æ–°å¢ï¼Œæ›´æ–°ï¼Œåˆ é™¤</h2>
<p>è¦ä»æ¨¡å‹æ–°å¢ä¸€æ¡æ•°æ®åˆ°æ•°æ®åº“ï¼Œåªè¦å»ºç«‹ä¸€ä¸ªæ¨¡å‹å®ä¾‹å¹¶è°ƒç”¨ <code>save</code> æ–¹æ³•å³å¯ã€‚</p>
<h4>å‚¨å­˜æ–°çš„æ¨¡å‹æ•°æ®</h4>
<pre><code>$user = new User;

$user-&gt;name = 'John';

$user-&gt;save();</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> é€šå¸¸ Eloquent æ¨¡å‹ä¸»é”®å€¼ä¼šè‡ªåŠ¨é€’å¢ã€‚ä½†æ˜¯æ‚¨è‹¥æƒ³è‡ªå®šä¹‰ä¸»é”®ï¼Œå°† <code>incrementing</code> å±æ€§è®¾æˆ <code>false</code> ã€‚</p>
</blockquote>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>create</code> æ–¹æ³•å­˜å…¥æ–°çš„æ¨¡å‹æ•°æ®ï¼Œæ–°å¢å®Œåä¼šå›ä¼ æ–°å¢çš„æ¨¡å‹å®ä¾‹ã€‚ä½†æ˜¯åœ¨æ–°å¢å‰ï¼Œéœ€è¦å…ˆåœ¨æ¨¡å‹ç±»é‡Œè®¾å®šå¥½ <code>fillable</code> æˆ– <code>guarded</code> å±æ€§ï¼Œå› ä¸º Eloquent é»˜è®¤ä¼šé˜²æ­¢ mass-assignment ã€‚</p>
<p>åœ¨æ–°æ¨¡å‹æ•°æ®è¢«å‚¨å­˜æˆ–æ–°å¢åï¼Œè‹¥æ¨¡å‹æœ‰è‡ªåŠ¨é€’å¢ä¸»é”®ï¼Œå¯ä»¥ä»å¯¹è±¡å–å¾— <code>id</code> å±æ€§å€¼ï¼š</p>
<pre><code>$insertedId = $user-&gt;id;</code></pre>
<h4>åœ¨æ¨¡å‹é‡Œè®¾å®š Guarded å±æ€§</h4>
<pre><code>class User extends Eloquent {

    protected $guarded = array('id', 'account_id');

}</code></pre>
<h4>ä½¿ç”¨æ¨¡å‹çš„ Create æ–¹æ³•</h4>
<pre><code>// åœ¨æ•°æ®åº“å»ºç«‹ä¸€æ¡æ–°çš„ç”¨æˆ·...
$user = User::create(array('name' =&gt; 'John'));

// ä»¥å±æ€§æ‰¾ç”¨æˆ·ï¼Œè‹¥æ²¡æœ‰åˆ™æ–°å¢å¹¶å–å¾—æ–°çš„å®ä¾‹...
$user = User::firstOrCreate(array('name' =&gt; 'John'));

// ä»¥å±æ€§æ‰¾ç”¨æˆ·ï¼Œè‹¥æ²¡æœ‰åˆ™å»ºç«‹æ–°çš„å®ä¾‹...
$user = User::firstOrNew(array('name' =&gt; 'John'));</code></pre>
<h4>æ›´æ–°å–å‡ºçš„æ¨¡å‹</h4>
<p>è¦æ›´æ–°æ¨¡å‹ï¼Œå¯ä»¥å–å‡ºå®ƒï¼Œæ›´æ”¹å±æ€§å€¼ï¼Œç„¶åä½¿ç”¨ <code>save</code> æ–¹æ³•ï¼š</p>
<pre><code>$user = User::find(1);

$user-&gt;email = 'john@foo.com';

$user-&gt;save();</code></pre>
<h4>å‚¨å­˜æ¨¡å‹å’Œå…³è”æ•°æ®</h4>
<p>æœ‰æ—¶æ‚¨å¯èƒ½ä¸åªæƒ³è¦å‚¨å­˜æ¨¡å‹æœ¬èº«ï¼Œä¹Ÿæƒ³è¦å‚¨å­˜å…³è”çš„æ•°æ®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>push</code> æ–¹æ³•è¾¾åˆ°ç›®çš„ï¼š</p>
<pre><code>$user-&gt;push();</code></pre>
<p>æ‚¨å¯ä»¥ç»“åˆæŸ¥è¯¢è¯­å¥ï¼Œæ‰¹æ¬¡æ›´æ–°æ¨¡å‹ï¼š</p>
<pre><code>$affectedRows = User::where('votes', '&gt;', 100)-&gt;update(array('status' =&gt; 2));</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> è‹¥ä½¿ç”¨ Eloquent æŸ¥è¯¢æ„é€ å™¨æ‰¹æ¬¡æ›´æ–°æ¨¡å‹ï¼Œåˆ™ä¸ä¼šè§¦å‘<code>æ¨¡å‹äº‹ä»¶</code>ã€‚</p>
</blockquote>
<h4>åˆ é™¤æ¨¡å‹</h4>
<p>è¦åˆ é™¤æ¨¡å‹ï¼Œåªè¦ä½¿ç”¨å®ä¾‹è°ƒç”¨ <code>delete</code> æ–¹æ³•ï¼š</p>
<pre><code>$user = User::find(1);

$user-&gt;delete();</code></pre>
<h4>ä¾ä¸»é”®å€¼åˆ é™¤æ¨¡å‹</h4>
<pre><code>User::destroy(1);

User::destroy(array(1, 2, 3));

User::destroy(1, 2, 3);</code></pre>
<p>å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç»“åˆæŸ¥è¯¢è¯­å¥æ‰¹æ¬¡åˆ é™¤æ¨¡å‹ï¼š</p>
<pre><code>$affectedRows = User::where('votes', '&gt;', 100)-&gt;delete();</code></pre>
<h4>åªæ›´æ–°æ¨¡å‹çš„æ—¶é—´æˆ³</h4>
<p>å¦‚æœæ‚¨åªæƒ³è¦æ›´æ–°æ¨¡å‹çš„æ—¶é—´æˆ³ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>touch</code> æ–¹æ³•ï¼š</p>
<pre><code>$user-&gt;touch();</code></pre>
<p><a name="soft-deleting"></a></p>
<h2>è½¯åˆ é™¤</h2>
<p>é€šè¿‡è½¯åˆ é™¤æ–¹å¼åˆ é™¤äº†ä¸€ä¸ªæ¨¡å‹åï¼Œæ¨¡å‹ä¸­çš„æ•°æ®å¹¶ä¸æ˜¯çœŸçš„ä»æ•°æ®åº“è¢«ç§»é™¤ã€‚è€Œæ˜¯ä¼šè®¾å®š <code>deleted_at</code> æ—¶é—´æˆ³ã€‚è¦è®©æ¨¡å‹ä½¿ç”¨è½¯åˆ é™¤åŠŸèƒ½ï¼Œåªè¦åœ¨æ¨¡å‹ç±»é‡ŒåŠ å…¥ <code>SoftDeletingTrait</code> å³å¯ï¼š</p>
<pre><code>use Illuminate\Database\Eloquent\SoftDeletingTrait;

class User extends Eloquent {

    use SoftDeletingTrait;

    protected $dates = ['deleted_at'];

}</code></pre>
<p>è¦åŠ å…¥ <code>deleted_at</code> å­—æ®µåˆ°æ•°æ®åº“è¡¨ï¼Œå¯ä»¥åœ¨è¿ç§»æ–‡ä»¶é‡Œä½¿ç”¨ <code>softDeletes</code> æ–¹æ³•ï¼š</p>
<pre><code>$table-&gt;softDeletes();</code></pre>
<p>ç°åœ¨å½“æ‚¨ä½¿ç”¨æ¨¡å‹è°ƒç”¨ <code>delete</code> æ–¹æ³•æ—¶ï¼Œ <code>deleted_at</code> å­—æ®µä¼šè¢«æ›´æ–°æˆç°åœ¨çš„æ—¶é—´æˆ³ã€‚åœ¨æŸ¥è¯¢ä½¿ç”¨è½¯åˆ é™¤åŠŸèƒ½çš„æ¨¡å‹æ—¶ï¼Œè¢«ã€Œåˆ é™¤ã€çš„æ¨¡å‹æ•°æ®ä¸ä¼šå‡ºç°åœ¨æŸ¥è¯¢ç»“æœé‡Œã€‚</p>
<h4>å¼ºåˆ¶æŸ¥è¯¢è½¯åˆ é™¤æ•°æ®</h4>
<p>è¦å¼ºåˆ¶è®©å·²è¢«è½¯åˆ é™¤çš„æ¨¡å‹æ•°æ®å‡ºç°åœ¨æŸ¥è¯¢ç»“æœé‡Œï¼Œåœ¨æŸ¥è¯¢æ—¶ä½¿ç”¨ <code>withTrashed</code> æ–¹æ³•ï¼š</p>
<pre><code>$users = User::withTrashed()-&gt;where('account_id', 1)-&gt;get();</code></pre>
<p><code>withTrashed</code> ä¹Ÿå¯ä»¥ç”¨åœ¨å…³è”æŸ¥è¯¢ï¼š</p>
<pre><code>$user-&gt;posts()-&gt;withTrashed()-&gt;get();</code></pre>
<p>å¦‚æœæ‚¨<strong>åªæƒ³</strong>æŸ¥è¯¢è¢«è½¯åˆ é™¤çš„æ¨¡å‹æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>onlyTrashed</code> æ–¹æ³•ï¼š</p>
<pre><code>$users = User::onlyTrashed()-&gt;where('account_id', 1)-&gt;get();</code></pre>
<p>è¦æŠŠè¢«è½¯åˆ é™¤çš„æ¨¡å‹æ•°æ®æ¢å¤ï¼Œä½¿ç”¨ <code>restore</code> æ–¹æ³•ï¼š</p>
<pre><code>$user-&gt;restore();</code></pre>
<p>æ‚¨ä¹Ÿå¯ä»¥ç»“åˆæŸ¥è¯¢è¯­å¥ä½¿ç”¨ <code>restore</code> ï¼š</p>
<pre><code>User::withTrashed()-&gt;where('account_id', 1)-&gt;restore();</code></pre>
<p>å¦‚åŒ <code>withTrashed</code> ï¼Œ <code>restore</code> æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨åœ¨å…³è”å¯¹è±¡ï¼š</p>
<pre><code>$user-&gt;posts()-&gt;restore();</code></pre>
<p>å¦‚æœæƒ³è¦çœŸçš„ä»æ¨¡å‹æ•°æ®åº“åˆ é™¤ï¼Œä½¿ç”¨ <code>forceDelete</code> æ–¹æ³•ï¼š</p>
<pre><code>$user-&gt;forceDelete();</code></pre>
<p><code>forceDelete</code> æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨åœ¨å…³è”å¯¹è±¡ï¼š</p>
<pre><code>$user-&gt;posts()-&gt;forceDelete();</code></pre>
<p>è¦ç¡®è®¤æ¨¡å‹æ˜¯å¦è¢«è½¯åˆ é™¤äº†ï¼Œå¯ä»¥ä½¿ç”¨ <code>trashed</code> æ–¹æ³•ï¼š</p>
<pre><code>if ($user-&gt;trashed())
{
    //
}</code></pre>
<p><a name="timestamps"></a></p>
<h2>æ—¶é—´æˆ³</h2>
<p>é»˜è®¤ Eloquent ä¼šè‡ªåŠ¨ç»´æŠ¤æ•°æ®åº“è¡¨çš„ <code>created_at</code> å’Œ <code>updated_at</code> å­—æ®µã€‚åªè¦æŠŠè¿™ä¸¤ä¸ªã€Œæ—¶é—´æˆ³ã€å­—æ®µåŠ åˆ°æ•°æ®åº“è¡¨ï¼Œ Eloquent å°±ä¼šå¤„ç†å‰©ä¸‹çš„å·¥ä½œã€‚å¦‚æœä¸æƒ³è®© Eloquent è‡ªåŠ¨ç»´æŠ¤è¿™äº›å­—æ®µï¼ŒæŠŠä¸‹é¢çš„å±æ€§åŠ åˆ°æ¨¡å‹ç±»é‡Œï¼š</p>
<h4>å…³é—­è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³</h4>
<pre><code>class User extends Eloquent {

    protected $table = 'users';

    public $timestamps = false;

}</code></pre>
<h4>è‡ªå®šä¹‰æ—¶é—´æˆ³æ ¼å¼</h4>
<p>å¦‚æœæƒ³è¦è‡ªå®šä¹‰æ—¶é—´æˆ³æ ¼å¼ï¼Œå¯ä»¥åœ¨æ¨¡å‹ç±»é‡Œé‡å†™ <code>getDateFormat</code> æ–¹æ³•ï¼š</p>
<pre><code>class User extends Eloquent {

    protected function getDateFormat()
    {
        return 'U';
    }

}</code></pre>
<p><a name="query-scopes"></a></p>
<h2>èŒƒå›´æŸ¥è¯¢</h2>
<h4>å®šä¹‰èŒƒå›´æŸ¥è¯¢</h4>
<p>èŒƒå›´æŸ¥è¯¢å¯ä»¥è®©æ‚¨è½»æ¾çš„é‡å¤åˆ©ç”¨æ¨¡å‹çš„æŸ¥è¯¢é€»è¾‘ã€‚è¦è®¾å®šèŒƒå›´æŸ¥è¯¢ï¼Œåªè¦å®šä¹‰æœ‰ <code>scope</code> å‰ç¼€çš„æ¨¡å‹æ–¹æ³•ï¼š</p>
<pre><code>class User extends Eloquent {

    public function scopePopular($query)
    {
        return $query-&gt;where('votes', '&gt;', 100);
    }

    public function scopeWomen($query)
    {
        return $query-&gt;whereGender('W');
    }

}</code></pre>
<h4>ä½¿ç”¨èŒƒå›´æŸ¥è¯¢</h4>
<pre><code>$users = User::popular()-&gt;women()-&gt;orderBy('created_at')-&gt;get();</code></pre>
<h4>åŠ¨æ€èŒƒå›´æŸ¥è¯¢</h4>
<p>æœ‰æ—¶æ‚¨å¯èƒ½æƒ³è¦å®šä¹‰å¯æ¥å—å‚æ•°çš„èŒƒå›´æŸ¥è¯¢æ–¹æ³•ã€‚åªè¦æŠŠå‚æ•°åŠ åˆ°æ–¹æ³•é‡Œï¼š</p>
<pre><code>class User extends Eloquent {

    public function scopeOfType($query, $type)
    {
        return $query-&gt;whereType($type);
    }

}</code></pre>
<p>ç„¶åæŠŠå‚æ•°å€¼ä¼ åˆ°èŒƒå›´æŸ¥è¯¢æ–¹æ³•è°ƒç”¨é‡Œï¼š</p>
<pre><code>$users = User::ofType('member')-&gt;get();</code></pre>
<p><a name="relationships"></a></p>
<h2>å…³è”</h2>
<p>å½“ç„¶ï¼Œæ‚¨çš„æ•°æ®åº“è¡¨å¾ˆå¯èƒ½è·Ÿå¦ä¸€å¼ è¡¨ç›¸å…³è”ã€‚ä¾‹å¦‚ï¼Œä¸€ç¯‡ blog æ–‡ç« å¯èƒ½æœ‰å¾ˆå¤šè¯„è®ºï¼Œæˆ–æ˜¯ä¸€å¼ è®¢å•è·Ÿä¸‹å•å®¢æˆ·ç›¸å…³è”ã€‚ Eloquent è®©ç®¡ç†å’Œå¤„ç†è¿™äº›å…³è”å˜å¾—å¾ˆå®¹æ˜“ã€‚ Laravel æœ‰å¾ˆå¤šç§å…³è”ç§ç±»ï¼š</p>
<ul>
<li><a href="#one-to-one">ä¸€å¯¹ä¸€</a></li>
<li><a href="#one-to-many">ä¸€å¯¹å¤š</a></li>
<li><a href="#many-to-many">å¤šå¯¹å¤š</a></li>
<li><a href="#has-many-through">è¿œå±‚ä¸€å¯¹å¤šå…³è”</a></li>
<li><a href="#polymorphic-relations">å¤šæ€å…³è”</a></li>
<li><a href="#many-to-many-polymorphic-relations">å¤šæ€çš„å¤šå¯¹å¤šå…³è”</a></li>
</ul>
<p><a name="one-to-one"></a></p>
<h3>ä¸€å¯¹ä¸€</h3>
<h4>å®šä¹‰ä¸€å¯¹ä¸€å…³è”</h4>
<p>ä¸€å¯¹ä¸€å…³è”æ˜¯å¾ˆåŸºæœ¬çš„å…³è”ã€‚ä¾‹å¦‚ä¸€ä¸ª <code>User</code> æ¨¡å‹ä¼šå¯¹åº”åˆ°ä¸€ä¸ª <code>Phone</code> ã€‚ åœ¨ Eloquent é‡Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å®šä¹‰å…³è”ï¼š</p>
<pre><code>class User extends Eloquent {

    public function phone()
    {
        return $this-&gt;hasOne('Phone');
    }

}</code></pre>
<p>ä¼ åˆ° <code>hasOne</code> æ–¹æ³•é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…³è”æ¨¡å‹çš„ç±»åç§°ã€‚å®šä¹‰å¥½å…³è”ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ Eloquent çš„<a href="#dynamic-properties">åŠ¨æ€å±æ€§</a>å–å¾—å…³è”å¯¹è±¡ï¼š</p>
<pre><code>$phone = User::find(1)-&gt;phone;</code></pre>
<p>SQL ä¼šæ‰§è¡Œå¦‚ä¸‹è¯­å¥ï¼š</p>
<pre><code>select * from users where id = 1

select * from phones where user_id = 1</code></pre>
<p>æ³¨æ„ï¼Œ Eloquent å‡è®¾å¯¹åº”çš„å…³è”æ¨¡å‹æ•°æ®åº“è¡¨é‡Œï¼Œå¤–é”®åç§°æ˜¯åŸºäºæ¨¡å‹åç§°ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œé»˜è®¤ <code>Phone</code> æ¨¡å‹æ•°æ®åº“è¡¨ä¼šä»¥ <code>user_id</code> ä½œä¸ºå¤–é”®ã€‚å¦‚æœæƒ³è¦æ›´æ”¹è¿™ä¸ªé»˜è®¤ï¼Œå¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°åˆ° <code>hasOne</code> æ–¹æ³•é‡Œã€‚æ›´è¿›ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ŒæŒ‡å®šå…³è”çš„å¤–é”®è¦å¯¹åº”åˆ°æœ¬èº«çš„å“ªä¸ªå­—æ®µï¼š</p>
<pre><code>return $this-&gt;hasOne('Phone', 'foreign_key');

return $this-&gt;hasOne('Phone', 'foreign_key', 'local_key');</code></pre>
<h4>å®šä¹‰ç›¸å¯¹çš„å…³è”</h4>
<p>è¦åœ¨ <code>Phone</code> æ¨¡å‹é‡Œå®šä¹‰ç›¸å¯¹çš„å…³è”ï¼Œå¯ä»¥ä½¿ç”¨ <code>belongsTo</code> æ–¹æ³•ï¼š</p>
<pre><code>class Phone extends Eloquent {

    public function user()
    {
        return $this-&gt;belongsTo('User');
    }

}</code></pre>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œ Eloquent é»˜è®¤ä¼šä½¿ç”¨ <code>phones</code> æ•°æ®åº“è¡¨çš„ <code>user_id</code> å­—æ®µæŸ¥è¯¢å…³è”ã€‚å¦‚æœæƒ³è¦è‡ªå·±æŒ‡å®šå¤–é”®å­—æ®µï¼Œå¯ä»¥åœ¨ <code>belongsTo</code> æ–¹æ³•é‡Œä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼š</p>
<pre><code>class Phone extends Eloquent {

    public function user()
    {
        return $this-&gt;belongsTo('User', 'local_key');
    }

}</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šè¦å‚ç…§ä¸Šå±‚æ•°æ®åº“è¡¨çš„å“ªä¸ªå­—æ®µï¼š</p>
<pre><code>class Phone extends Eloquent {

    public function user()
    {
        return $this-&gt;belongsTo('User', 'local_key', 'parent_key');
    }

}</code></pre>
<p><a name="one-to-many"></a></p>
<h3>ä¸€å¯¹å¤š</h3>
<p>ä¸€å¯¹å¤šå…³è”çš„ä¾‹å­å¦‚ï¼Œä¸€ç¯‡ Blog æ–‡ç« å¯èƒ½ã€Œæœ‰å¾ˆå¤šã€è¯„è®ºã€‚å¯ä»¥åƒè¿™æ ·å®šä¹‰å…³è”ï¼š</p>
<pre><code>class Post extends Eloquent {

    public function comments()
    {
        return $this-&gt;hasMany('Comment');
    }

}</code></pre>
<p>ç°åœ¨å¯ä»¥ç»ç”±<a href="#dynamic-properties">åŠ¨æ€å±æ€§</a>å–å¾—æ–‡ç« çš„è¯„è®ºï¼š</p>
<pre><code>$comments = Post::find(1)-&gt;comments;</code></pre>
<p>å¦‚æœéœ€è¦å¢åŠ æ›´å¤šæ¡ä»¶é™åˆ¶ï¼Œå¯ä»¥åœ¨è°ƒç”¨ <code>comments</code> æ–¹æ³•åé¢ä¸²æ¥æŸ¥è¯¢æ¡ä»¶æ–¹æ³•ï¼š</p>
<pre><code>$comments = Post::find(1)-&gt;comments()-&gt;where('title', '=', 'foo')-&gt;first();</code></pre>
<p>åŒæ ·çš„ï¼Œæ‚¨å¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°åˆ° <code>hasMany</code> æ–¹æ³•æ›´æ”¹é»˜è®¤çš„å¤–é”®åç§°ã€‚ä»¥åŠï¼Œå¦‚åŒ <code>hasOne</code> å…³è”ï¼Œå¯ä»¥æŒ‡å®šæœ¬èº«çš„å¯¹åº”å­—æ®µï¼š</p>
<pre><code>return $this-&gt;hasMany('Comment', 'foreign_key');

return $this-&gt;hasMany('Comment', 'foreign_key', 'local_key');</code></pre>
<h4>å®šä¹‰ç›¸å¯¹çš„å…³è”</h4>
<p>è¦åœ¨ <code>Comment</code> æ¨¡å‹å®šä¹‰ç›¸å¯¹åº”çš„å…³è”ï¼Œå¯ä½¿ç”¨ <code>belongsTo</code> æ–¹æ³•ï¼š</p>
<pre><code>class Comment extends Eloquent {

    public function post()
    {
        return $this-&gt;belongsTo('Post');
    }

}</code></pre>
<p><a name="many-to-many"></a></p>
<h3>å¤šå¯¹å¤š</h3>
<p>å¤šå¯¹å¤šå…³è”æ›´ä¸ºå¤æ‚ã€‚è¿™ç§å…³è”çš„ä¾‹å­å¦‚ï¼Œä¸€ä¸ªç”¨æˆ·ï¼ˆ user ï¼‰å¯èƒ½ç”¨æœ‰å¾ˆå¤šèº«ä»½ï¼ˆ role ï¼‰ï¼Œè€Œä¸€ç§èº«ä»½å¯èƒ½å¾ˆå¤šç”¨æˆ·éƒ½æœ‰ã€‚ä¾‹å¦‚å¾ˆå¤šç”¨æˆ·éƒ½æ˜¯ã€Œç®¡ç†è€…ã€ã€‚å¤šå¯¹å¤šå…³è”éœ€è¦ç”¨åˆ°ä¸‰ä¸ªæ•°æ®åº“è¡¨ï¼š <code>users</code> ï¼Œ <code>roles</code> ï¼Œå’Œ <code>role_user</code> ã€‚ <code>role_user</code> æ¢çº½è¡¨å‘½åæ˜¯ä»¥ç›¸å…³è”çš„ä¸¤ä¸ªæ¨¡å‹æ•°æ®åº“è¡¨ï¼Œä¾ç…§å­—æ¯é¡ºåºå‘½åï¼Œæ¢çº½è¡¨é‡Œé¢åº”è¯¥è¦æœ‰ <code>user_id</code> å’Œ <code>role_id</code> å­—æ®µã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ <code>belongsToMany</code> æ–¹æ³•å®šä¹‰å¤šå¯¹å¤šå…³ç³»ï¼š</p>
<pre><code>class User extends Eloquent {

    public function roles()
    {
        return $this-&gt;belongsToMany('Role');
    }

}</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä» <code>User</code> æ¨¡å‹å–å¾— rolesï¼š</p>
<pre><code>$roles = User::find(1)-&gt;roles;</code></pre>
<p>å¦‚æœä¸æƒ³ä½¿ç”¨é»˜è®¤çš„æ¢çº½æ•°æ®åº“è¡¨å‘½åæ–¹å¼ï¼Œå¯ä»¥ä¼ é€’æ•°æ®åº“è¡¨åç§°ä½œä¸º <code>belongsToMany</code> æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š</p>
<pre><code>return $this-&gt;belongsToMany('Role', 'user_roles');</code></pre>
<p>ä¹Ÿå¯ä»¥æ›´æ”¹é»˜è®¤çš„å…³è”å­—æ®µåç§°ï¼š</p>
<pre><code>return $this-&gt;belongsToMany('Role', 'user_roles', 'user_id', 'foo_id');</code></pre>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨ <code>Role</code> æ¨¡å‹å®šä¹‰ç›¸å¯¹çš„å…³è”ï¼š</p>
<pre><code>class Role extends Eloquent {

    public function users()
    {
        return $this-&gt;belongsToMany('User');
    }

}</code></pre>
<p><a name="has-many-through"></a></p>
<h3>è¿œå±‚ä¸€å¯¹å¤šå…³è”</h3>
<p>ã€Œè¿œå±‚ä¸€å¯¹å¤šå…³è”ã€æä¾›äº†æ–¹ä¾¿ç®€çŸ­çš„æ–¹æ³•ï¼Œå¯ä»¥ç»ç”±å¤šå±‚é—´çš„å…³è”å–å¾—è¿œå±‚çš„å…³è”ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª <code>Country</code> æ¨¡å‹å¯èƒ½é€šè¿‡ <code>Users</code> å…³è”åˆ°å¾ˆå¤š <code>Posts</code> æ¨¡å‹ã€‚ æ•°æ®åº“è¡¨é—´çš„å…³ç³»å¯èƒ½çœ‹èµ·æ¥å¦‚ä¸‹ï¼š</p>
<pre><code>countries
    id - integer
    name - string

users
    id - integer
    country_id - integer
    name - string

posts
    id - integer
    user_id - integer
    title - string</code></pre>
<p>è™½ç„¶ <code>posts</code> æ•°æ®åº“è¡¨æœ¬èº«æ²¡æœ‰ <code>country_id</code> å­—æ®µï¼Œä½† <code>hasManyThrough</code> æ–¹æ³•è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>$country-&gt;posts</code> å–å¾— country çš„ postsã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä»¥ä¸‹å…³è”ï¼š</p>
<pre><code>class Country extends Eloquent {

    public function posts()
    {
        return $this-&gt;hasManyThrough('Post', 'User');
    }

}</code></pre>
<p>å¦‚æœæƒ³è¦æ‰‹åŠ¨æŒ‡å®šå…³è”çš„å­—æ®µåç§°ï¼Œå¯ä»¥ä¼ å…¥ç¬¬ä¸‰å’Œç¬¬å››ä¸ªå‚æ•°åˆ°æ–¹æ³•é‡Œï¼š</p>
<pre><code>class Country extends Eloquent {

    public function posts()
    {
        return $this-&gt;hasManyThrough('Post', 'User', 'country_id', 'user_id');
    }

}</code></pre>
<p><a name="polymorphic-relations"></a></p>
<h3>å¤šæ€å…³è”</h3>
<p>å¤šæ€å…³è”å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„å…³è”æ–¹æ³•ï¼Œå°±è®©ä¸€ä¸ªæ¨¡å‹åŒæ—¶å…³è”å¤šä¸ªæ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æƒ³è®© photo æ¨¡å‹åŒæ—¶å’Œä¸€ä¸ª staff æˆ– order æ¨¡å‹å…³è”ã€‚å¯ä»¥å®šä¹‰å…³è”å¦‚ä¸‹ï¼š</p>
<pre><code>class Photo extends Eloquent {

    public function imageable()
    {
        return $this-&gt;morphTo();
    }

}

class Staff extends Eloquent {

    public function photos()
    {
        return $this-&gt;morphMany('Photo', 'imageable');
    }

}

class Order extends Eloquent {

    public function photos()
    {
        return $this-&gt;morphMany('Photo', 'imageable');
    }

}</code></pre>
<h4>å–å¾—å¤šæ€å…³è”å¯¹è±¡</h4>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä» staff æˆ– order æ¨¡å‹å–å¾—å¤šæ€å…³è”å¯¹è±¡ï¼š</p>
<pre><code>$staff = Staff::find(1);

foreach ($staff-&gt;photos as $photo)
{
    //
}</code></pre>
<h4>å–å¾—å¤šæ€å…³è”å¯¹è±¡çš„æ‹¥æœ‰è€…</h4>
<p>ç„¶è€Œï¼Œå¤šæ€å…³è”çœŸæ­£ç¥å¥‡çš„åœ°æ–¹ï¼Œåœ¨äºè¦ä» <code>Photo</code> æ¨¡å‹å–å¾— staff æˆ– order å¯¹è±¡æ—¶ï¼š</p>
<pre><code>$photo = Photo::find(1);

$imageable = $photo-&gt;imageable;</code></pre>
<p><code>Photo</code> æ¨¡å‹é‡Œçš„ <code>imageable</code> å…³è”ä¼šå›ä¼  <code>Staff</code> æˆ– <code>Order</code> å®ä¾‹ï¼Œå–å†³äºè¿™æ˜¯å“ªä¸€ç§æ¨¡å‹æ‹¥æœ‰çš„ç…§ç‰‡ã€‚</p>
<h4>å¤šæ€å…³è”çš„æ•°æ®åº“è¡¨ç»“æ„</h4>
<p>ä¸ºäº†ç†è§£å¤šæ€å…³è”çš„è¿ä½œæœºåˆ¶ï¼Œæ¥çœ‹çœ‹å®ƒä»¬çš„æ•°æ®åº“è¡¨ç»“æ„ï¼š</p>
<pre><code>staff
    id - integer
    name - string

orders
    id - integer
    price - integer

photos
    id - integer
    path - string
    imageable_id - integer
    imageable_type - string</code></pre>
<p>è¦æ³¨æ„çš„é‡ç‚¹æ˜¯ <code>photos</code> æ•°æ®åº“è¡¨çš„ <code>imageable_id</code> å’Œ <code>imageable_type</code>ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œ ID å­—æ®µä¼šåŒ…å« staff æˆ– order çš„ IDï¼Œè€Œ type æ˜¯æ‹¥æœ‰è€…çš„æ¨¡å‹ç±»åç§°ã€‚è¿™å°±æ˜¯è®© ORM åœ¨å–å¾— <code>imageable</code> å…³è”å¯¹è±¡æ—¶ï¼Œå†³å®šè¦å“ªä¸€ç§æ¨¡å‹å¯¹è±¡çš„æœºåˆ¶ã€‚</p>
<p><a name="many-to-many-polymorphic-relations"></a></p>
<h3>å¤šæ€çš„å¤šå¯¹å¤šå…³è”</h3>
<h4>å¤šæ€çš„å¤šå¯¹å¤šå…³è”æ•°æ®åº“è¡¨ç»“æ„</h4>
<p>é™¤äº†ä¸€èˆ¬çš„å¤šæ€å…³è”ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤šå¯¹å¤šçš„å¤šæ€å…³è”ã€‚ä¾‹å¦‚ï¼ŒBlog çš„ <code>Post</code> å’Œ <code>Video</code> æ¨¡å‹å¯ä»¥å…±ç”¨å¤šæ€çš„ <code>Tag</code> å…³è”æ¨¡å‹ã€‚é¦–å…ˆï¼Œæ¥çœ‹çœ‹æ•°æ®åº“è¡¨ç»“æ„ï¼š</p>
<pre><code>posts
    id - integer
    name - string

videos
    id - integer
    name - string

tags
    id - integer
    name - string

taggables
    tag_id - integer
    taggable_id - integer
    taggable_type - string</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡å¥½è®¾å®šæ¨¡å‹å…³è”äº†ã€‚ <code>Post</code> å’Œ <code>Video</code> æ¨¡å‹éƒ½å¯ä»¥ç»ç”± <code>tags</code> æ–¹æ³•å»ºç«‹ <code>morphToMany</code> å…³è”ï¼š</p>
<pre><code>class Post extends Eloquent {

    public function tags()
    {
        return $this-&gt;morphToMany('Tag', 'taggable');
    }

}</code></pre>
<p>åœ¨ <code>Tag</code> æ¨¡å‹é‡Œé’ˆå¯¹æ¯ä¸€ç§å…³è”å»ºç«‹ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<pre><code>class Tag extends Eloquent {

    public function posts()
    {
        return $this-&gt;morphedByMany('Post', 'taggable');
    }

    public function videos()
    {
        return $this-&gt;morphedByMany('Video', 'taggable');
    }

}</code></pre>
<p><a name="querying-relations"></a></p>
<h2>å…³è”æŸ¥è¯¢</h2>
<h4>æ ¹æ®å…³è”æ¡ä»¶æŸ¥è¯¢</h4>
<p>åœ¨å–å¾—æ¨¡å‹æ•°æ®æ—¶ï¼Œæ‚¨å¯èƒ½æƒ³è¦ä»¥å…³è”æ¨¡å‹ä½œä¸ºæŸ¥è¯¢é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æƒ³è¦å–å¾—æ‰€æœ‰ã€Œè‡³å°‘æœ‰ä¸€ç¯‡è¯„è®ºã€çš„Blog æ–‡ç« ã€‚å¯ä»¥ä½¿ç”¨ <code>has</code> æ–¹æ³•è¾¾æˆç›®çš„ï¼š</p>
<pre><code>$posts = Post::has('comments')-&gt;get();</code></pre>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šè¿ç®—å­å’Œæ•°é‡ï¼š</p>
<pre><code>$posts = Post::has('comments', '&gt;=', 3)-&gt;get();</code></pre>
<p>å¦‚æœæƒ³è¦æ›´è¿›é˜¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>whereHas</code> å’Œ <code>orWhereHas</code> æ–¹æ³•ï¼Œåœ¨ <code>has</code> æŸ¥è¯¢é‡Œè®¾ç½® &quot;where&quot; æ¡ä»¶ ï¼š</p>
<pre><code>$posts = Post::whereHas('comments', function($q)
{
    $q-&gt;where('content', 'like', 'foo%');

})-&gt;get();</code></pre>
<p><a name="dynamic-properties"></a></p>
<h3>åŠ¨æ€å±æ€§</h3>
<p>Eloquent å¯ä»¥ç»ç”±åŠ¨æ€å±æ€§å–å¾—å…³è”å¯¹è±¡ã€‚ Eloquent ä¼šè‡ªåŠ¨è¿›è¡Œå…³è”æŸ¥è¯¢ï¼Œè€Œä¸”ä¼šå¾ˆèªæ˜çš„çŸ¥é“åº”è¯¥è¦ä½¿ç”¨ <code>get</code>ï¼ˆç”¨åœ¨ä¸€å¯¹å¤šå…³è”ï¼‰æˆ–æ˜¯ <code>first</code> ï¼ˆç”¨åœ¨ä¸€å¯¹ä¸€å…³è”ï¼‰æ–¹æ³•ã€‚å¯ä»¥ç»ç”±å’Œã€Œå…³è”æ–¹æ³•åç§°ç›¸åŒã€çš„åŠ¨æ€å±æ€§å–å¾—å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹é¢çš„æ¨¡å‹å¯¹è±¡ <code>$phone</code>ï¼š</p>
<pre><code>class Phone extends Eloquent {

    public function user()
    {
        return $this-&gt;belongsTo('User');
    }

}

$phone = Phone::find(1);</code></pre>
<p>æˆ–æ˜¯åƒä¸‹é¢è¿™æ ·æ‰“å°ç”¨æˆ·çš„ email ï¼š</p>
<pre><code>echo $phone-&gt;user()-&gt;first()-&gt;email;</code></pre>
<p>å¯ä»¥ç®€å†™å¦‚ä¸‹ï¼š</p>
<pre><code>echo $phone-&gt;user-&gt;email;</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> è‹¥å–å¾—çš„æ˜¯è®¸å¤šå…³è”å¯¹è±¡ï¼Œä¼šè¿”å› <code>Illuminate\Database\Eloquent\Collection</code> å¯¹è±¡ï¼š</p>
</blockquote>
<p><a name="eager-loading"></a></p>
<h2>é¢„è½½å…¥</h2>
<p>é¢„è½½å…¥æ˜¯ç”¨æ¥å‡å°‘ N + 1 æŸ¥è¯¢é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª <code>Book</code> æ¨¡å‹æ•°æ®ä¼šå…³è”åˆ°ä¸€ä¸ª <code>Author</code> ã€‚å…³è”ä¼šåƒä¸‹é¢è¿™æ ·å®šä¹‰ï¼š</p>
<pre><code>class Book extends Eloquent {

    public function author()
    {
        return $this-&gt;belongsTo('Author');
    }

}</code></pre>
<p>ç°åœ¨è€ƒè™‘ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code>foreach (Book::all() as $book)
{
    echo $book-&gt;author-&gt;name;
}</code></pre>
<p>ä¸Šé¢çš„å¾ªç¯ä¼šæ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢å–å›æ‰€æœ‰æ•°æ®åº“è¡¨ä¸Šçš„ä¹¦ç±ï¼Œç„¶è€Œæ¯æœ¬ä¹¦ç±éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢å–å¾—ä½œè€…ã€‚æ‰€ä»¥è‹¥æˆ‘ä»¬æœ‰ 25 æœ¬ä¹¦ï¼Œå°±ä¼šè¿›è¡Œ 26æ¬¡æŸ¥è¯¢ã€‚</p>
<p>å¾ˆå¹¸è¿åœ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¢„è½½å…¥å¤§é‡å‡å°‘æŸ¥è¯¢æ¬¡æ•°ã€‚ä½¿ç”¨ <code>with</code> æ–¹æ³•æŒ‡å®šæƒ³è¦é¢„è½½å…¥çš„å…³è”å¯¹è±¡ï¼š</p>
<pre><code>foreach (Book::with('author')-&gt;get() as $book)
{
    echo $book-&gt;author-&gt;name;
}</code></pre>
<p>ç°åœ¨ï¼Œä¸Šé¢çš„å¾ªç¯æ€»å…±åªä¼šæ‰§è¡Œä¸¤æ¬¡æŸ¥è¯¢ï¼š</p>
<pre><code>select * from books

select * from authors where id in (1, 2, 3, 4, 5, ...)</code></pre>
<p>ä½¿ç”¨é¢„è½½å…¥å¯ä»¥å¤§å¤§æé«˜ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åŒæ—¶è½½å…¥å¤šç§å…³è”ï¼š</p>
<pre><code>$books = Book::with('author', 'publisher')-&gt;get();</code></pre>
<p>ç”šè‡³å¯ä»¥é¢„è½½å…¥å·¢çŠ¶å…³è”ï¼š</p>
<pre><code>$books = Book::with('author.contacts')-&gt;get();</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ <code>author</code> å…³è”ä¼šè¢«é¢„è½½å…¥ï¼Œ author çš„ <code>contacts</code> å…³è”ä¹Ÿä¼šè¢«é¢„è½½å…¥ã€‚</p>
<h3>é¢„è½½å…¥æ¡ä»¶é™åˆ¶</h3>
<p>æœ‰æ—¶æ‚¨å¯èƒ½æƒ³è¦é¢„è½½å…¥å…³è”ï¼ŒåŒæ—¶ä¹Ÿæƒ³è¦æŒ‡å®šè½½å…¥æ—¶çš„æŸ¥è¯¢é™åˆ¶ã€‚ä¸‹é¢æœ‰ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>$users = User::with(array('posts' =&gt; function($query)
{
    $query-&gt;where('title', 'like', '%first%');

}))-&gt;get();</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬é¢„è½½å…¥äº† user çš„ posts å…³è”ï¼Œå¹¶é™åˆ¶æ¡ä»¶ä¸º post çš„ title å­—æ®µéœ€åŒ…å« &quot;first&quot; ã€‚</p>
<p>å½“ç„¶ï¼Œé¢„è½½å…¥çš„é—­åˆå‡½æ•°é‡Œä¸ä¸€å®šåªèƒ½åŠ ä¸Šæ¡ä»¶é™åˆ¶ï¼Œä¹Ÿå¯ä»¥åŠ ä¸Šæ’åºï¼š</p>
<pre><code>$users = User::with(array('posts' =&gt; function($query)
{
    $query-&gt;orderBy('created_at', 'desc');

}))-&gt;get();</code></pre>
<h3>å»¶è¿Ÿé¢„è½½å…¥</h3>
<p>ä¹Ÿå¯ä»¥ç›´æ¥ä»æ¨¡å‹çš„ collection é¢„è½½å…¥å…³è”å¯¹è±¡ã€‚è¿™å¯¹äºéœ€è¦æ ¹æ®æƒ…å†µå†³å®šæ˜¯å¦è½½å…¥å…³è”å¯¹è±¡æ—¶ï¼Œæˆ–æ˜¯è·Ÿç¼“å­˜ä¸€èµ·ä½¿ç”¨æ—¶å¾ˆæœ‰ç”¨ã€‚</p>
<pre><code>$books = Book::all();

$books-&gt;load('author', 'publisher');</code></pre>
<p><a name="inserting-related-models"></a></p>
<h2>æ–°å¢å…³è”æ¨¡å‹</h2>
<h4>é™„åŠ ä¸€ä¸ªå…³è”æ¨¡å‹</h4>
<p>æ‚¨å¸¸å¸¸ä¼šéœ€è¦åŠ å…¥æ–°çš„å…³è”æ¨¡å‹ã€‚ä¾‹å¦‚æ–°å¢ä¸€ä¸ª comment åˆ° post ã€‚é™¤äº†æ‰‹åŠ¨è®¾å®šæ¨¡å‹çš„ <code>post_id</code> å¤–é”®ï¼Œä¹Ÿå¯ä»¥ä»ä¸Šå±‚çš„ <code>Post</code> æ¨¡å‹æ–°å¢å…³è”çš„ comment ï¼š</p>
<pre><code>$comment = new Comment(array('message' =&gt; 'A new comment.'));

$post = Post::find(1);

$comment = $post-&gt;comments()-&gt;save($comment);</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæ–°å¢çš„ comment <code>post_id</code> å­—æ®µä¼šè¢«è‡ªåŠ¨è®¾å®šã€‚</p>
<p>å¦‚æœæƒ³è¦åŒæ—¶æ–°å¢å¾ˆå¤šå…³è”æ¨¡å‹ï¼š</p>
<pre><code>$comments = array(
    new Comment(array('message' =&gt; 'A new comment.')),
    new Comment(array('message' =&gt; 'Another comment.')),
    new Comment(array('message' =&gt; 'The latest comment.'))
);

$post = Post::find(1);

$post-&gt;comments()-&gt;saveMany($comments);</code></pre>
<h3>ä»å±å…³è”æ¨¡å‹ ( Belongs To )</h3>
<p>è¦æ›´æ–° <code>belongsTo</code> å…³è”æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>associate</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè®¾å®šå­æ¨¡å‹çš„å¤–é”®ï¼š</p>
<pre><code>$account = Account::find(10);

$user-&gt;account()-&gt;associate($account);

$user-&gt;save();</code></pre>
<h3>æ–°å¢å¤šå¯¹å¤šå…³è”æ¨¡å‹ ( Many To Many )</h3>
<p>æ‚¨ä¹Ÿå¯ä»¥æ–°å¢å¤šå¯¹å¤šçš„å…³è”æ¨¡å‹ã€‚è®©æˆ‘ä»¬ç»§ç»­ä½¿ç”¨ <code>User</code> å’Œ <code>Role</code> æ¨¡å‹ä½œä¸ºä¾‹å­ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>attach</code> æ–¹æ³•ç®€å•åœ°æŠŠ roles é™„åŠ ç»™ä¸€ä¸ª userï¼š</p>
<h4>é™„åŠ å¤šå¯¹å¤šæ¨¡å‹</h4>
<pre><code>$user = User::find(1);

$user-&gt;roles()-&gt;attach(1);</code></pre>
<p>ä¹Ÿå¯ä»¥ä¼ å…¥è¦å­˜åœ¨æ¢çº½è¡¨ä¸­çš„å±æ€§æ•°ç»„ï¼š</p>
<pre><code>$user-&gt;roles()-&gt;attach(1, array('expires' =&gt; $expires));</code></pre>
<p>å½“ç„¶ï¼Œæœ‰ <code>attach</code> å°±ä¼šæœ‰ç›¸åçš„ <code>detach</code>ï¼š</p>
<pre><code>$user-&gt;roles()-&gt;detach(1);</code></pre>
<p><code>attach</code> å’Œ <code>detach</code> æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨ ID æ•°ç»„ä½œä¸ºå‚æ•°ï¼š</p>
<pre><code>$user = User::find(1);

$user-&gt;roles()-&gt;detach([1, 2, 3]);

$user-&gt;roles()-&gt;attach([1 =&gt; ['attribute1' =&gt; 'value1'], 2, 3]);</code></pre>
<h4>ä½¿ç”¨ Sync æ–¹æ³•åŒæ—¶é™„åŠ ä¸€ä¸ªä»¥ä¸Šå¤šå¯¹å¤šå…³è”</h4>
<p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>sync</code> æ–¹æ³•é™„åŠ å…³è”æ¨¡å‹ã€‚ <code>sync</code> æ–¹æ³•ä¼šæŠŠæ ¹æ® ID æ•°ç»„æŠŠå…³è”å­˜åˆ°æ¢çº½è¡¨ã€‚é™„åŠ å®Œå…³è”åï¼Œæ¢çº½è¡¨é‡Œçš„æ¨¡å‹åªä¼šå…³è”åˆ° ID æ•°ç»„é‡Œçš„ id ï¼š</p>
<pre><code>$user-&gt;roles()-&gt;sync(array(1, 2, 3));</code></pre>
<h4>Sync æ—¶åœ¨æ¢çº½è¡¨åŠ å…¥é¢å¤–æ•°æ®</h4>
<p>ä¹Ÿå¯ä»¥åœ¨æŠŠæ¯ä¸ª ID åŠ å…¥æ¢çº½è¡¨æ—¶ï¼ŒåŠ å…¥å…¶ä»–å­—æ®µçš„æ•°æ®ï¼š</p>
<pre><code>$user-&gt;roles()-&gt;sync(array(1 =&gt; array('expires' =&gt; true)));</code></pre>
<p>æœ‰æ—¶æ‚¨å¯èƒ½æƒ³è¦ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œåœ¨å»ºç«‹æ–°æ¨¡å‹æ•°æ®çš„åŒæ—¶é™„åŠ å…³è”ã€‚å¯ä»¥ä½¿ç”¨ <code>save</code> æ–¹æ³•è¾¾æˆç›®çš„ï¼š</p>
<pre><code>$role = new Role(array('name' =&gt; 'Editor'));

User::find(1)-&gt;roles()-&gt;save($role);</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæ–°çš„ <code>Role</code> æ¨¡å‹å¯¹è±¡ä¼šåœ¨å‚¨å­˜çš„åŒæ—¶å…³è”åˆ° user æ¨¡å‹ã€‚ä¹Ÿå¯ä»¥ä¼ å…¥å±æ€§æ•°ç»„æŠŠæ•°æ®åŠ åˆ°å…³è”æ•°æ®åº“è¡¨ï¼š</p>
<pre><code>User::find(1)-&gt;roles()-&gt;save($role, array('expires' =&gt; $expires));</code></pre>
<p><a name="touching-parent-timestamps"></a></p>
<h2>æ›´æ–°ä¸Šå±‚æ—¶é—´æˆ³</h2>
<p>å½“æ¨¡å‹ <code>belongsTo</code> å¦ä¸€ä¸ªæ¨¡å‹ï¼Œæ¯”æ–¹è¯´ä¸€ä¸ª <code>Comment</code> å±äºä¸€ä¸ª <code>Post</code> ï¼Œå¦‚æœèƒ½åœ¨å­æ¨¡å‹è¢«æ›´æ–°æ—¶ï¼Œæ›´æ–°ä¸Šå±‚çš„æ—¶é—´æˆ³ï¼Œè¿™å°†ä¼šå¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå½“ <code>Comment</code> æ¨¡å‹æ›´æ–°æ—¶ï¼Œæ‚¨å¯èƒ½æƒ³è¦èƒ½å¤ŸåŒæ—¶è‡ªåŠ¨æ›´æ–° <code>Post</code> çš„ <code>updated_at</code> æ—¶é—´æˆ³ã€‚ Eloquent è®©äº‹æƒ…å˜å¾—å¾ˆç®€å•ã€‚åªè¦åœ¨å­å…³è”çš„ç±»é‡Œï¼ŒæŠŠå…³è”æ–¹æ³•åç§°åŠ å…¥ <code>touches</code> å±æ€§å³å¯ï¼š</p>
<pre><code>class Comment extends Eloquent {

    protected $touches = array('post');

    public function post()
    {
        return $this-&gt;belongsTo('Post');
    }

}</code></pre>
<p>ç°åœ¨ï¼Œå½“æ‚¨æ›´æ–° <code>Comment</code> æ—¶ï¼Œå¯¹åº”çš„ <code>Post</code> ä¼šè‡ªåŠ¨æ›´æ–° <code>updated_at</code> å­—æ®µï¼š</p>
<pre><code>$comment = Comment::find(1);

$comment-&gt;text = 'Edit to this comment!';

$comment-&gt;save();</code></pre>
<p><a name="working-with-pivot-tables"></a></p>
<h2>ä½¿ç”¨æ¢çº½è¡¨</h2>
<p>å¦‚æ‚¨æ‰€çŸ¥ï¼Œè¦æ“ä½œå¤šå¯¹å¤šå…³è”éœ€è¦ä¸€ä¸ªä¸­é—´çš„æ•°æ®åº“è¡¨ã€‚ Eloquent æä¾›äº†ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•å¯ä»¥å’Œè¿™å¼ è¡¨äº’åŠ¨ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ <code>User</code> å¯¹è±¡å…³è”åˆ°å¾ˆå¤š <code>Role</code> å¯¹è±¡ã€‚å–å‡ºè¿™äº›å…³è”å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…³è”æ¨¡å‹ä¸Šå–å¾— <code>pivot</code> æ•°æ®åº“è¡¨çš„æ•°æ®ï¼š</p>
<pre><code>$user = User::find(1);

foreach ($user-&gt;roles as $role)
{
    echo $role-&gt;pivot-&gt;created_at;
}</code></pre>
<p>æ³¨æ„æˆ‘ä»¬å–å‡ºçš„æ¯ä¸ª <code>Role</code> æ¨¡å‹å¯¹è±¡ä¼šè‡ªåŠ¨ç»™ä¸€ä¸ª <code>pivot</code> å±æ€§ã€‚è¿™å±æ€§åŒ…å«äº†æ¢çº½è¡¨çš„æ¨¡å‹æ•°æ®ï¼Œå¯ä»¥åƒä¸€èˆ¬çš„ Eloquent æ¨¡å‹ä¸€æ ·ä½¿ç”¨ã€‚</p>
<p>é»˜è®¤ <code>pivot</code> å¯¹è±¡åªä¼šæœ‰å…³è”é”®çš„å±æ€§ã€‚å¦‚æœæ‚¨æƒ³è®© <code>pivot</code> å¯ä»¥åŒ…å«å…¶ä»–æ¢çº½è¡¨çš„å­—æ®µï¼Œå¯ä»¥åœ¨å®šä¹‰å…³è”æ–¹æ³•æ—¶æŒ‡å®šé‚£äº›å­—æ®µï¼š</p>
<pre><code>return $this-&gt;belongsToMany('Role')-&gt;withPivot('foo', 'bar');</code></pre>
<p>ç°åœ¨å¯ä»¥åœ¨ <code>Role</code> æ¨¡å‹çš„ <code>pivot</code> å¯¹è±¡ä¸Šå–å¾— <code>foo</code> å’Œ <code>bar</code> å±æ€§äº†ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³è¦å¯ä»¥è‡ªåŠ¨ç»´æŠ¤æ¢çº½è¡¨çš„ <code>created_at</code> å’Œ <code>updated_at</code> æ—¶é—´æˆ³ï¼Œåœ¨å®šä¹‰å…³è”æ–¹æ³•æ—¶åŠ ä¸Š <code>withTimestamps</code> æ–¹æ³•ï¼š</p>
<pre><code>return $this-&gt;belongsToMany('Role')-&gt;withTimestamps();</code></pre>
<h4>åˆ é™¤æ¢çº½è¡¨çš„å…³è”æ•°æ®</h4>
<p>è¦åˆ é™¤æ¨¡å‹åœ¨æ¢çº½è¡¨çš„æ‰€æœ‰å…³è”æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>detach</code> æ–¹æ³•ï¼š</p>
<pre><code>User::find(1)-&gt;roles()-&gt;detach();</code></pre>
<p>æ³¨æ„ï¼Œå¦‚ä¸Šçš„æ“ä½œä¸ä¼šç§»é™¤ <code>roles</code> æ•°æ®åº“è¡¨é‡Œé¢çš„æ•°æ®ï¼Œåªä¼šç§»é™¤æ¢çº½è¡¨é‡Œçš„å…³è”æ•°æ®ã€‚</p>
<h4>æ›´æ–°æ¢çº½è¡¨çš„æ•°æ®</h4>
<p>æœ‰æ—¶æ‚¨åªæƒ³æ›´æ–°æ¢çº½è¡¨çš„æ•°æ®ï¼Œè€Œæ²¡æœ‰è¦ç§»é™¤å…³è”ã€‚å¦‚æœæ‚¨æƒ³æ›´æ–°æ¢çº½è¡¨ï¼Œå¯ä»¥åƒä¸‹é¢çš„ä¾‹å­ä½¿ç”¨ <code>updateExistingPivot</code> æ–¹æ³•ï¼š</p>
<pre><code>User::find(1)-&gt;roles()-&gt;updateExistingPivot($roleId, $attributes);</code></pre>
<h4>è‡ªå®šä¹‰æ¢çº½æ¨¡å‹</h4>
<p>Laravel å…è®¸æ‚¨è‡ªå®šä¹‰æ¢çº½æ¨¡å‹ã€‚è¦è‡ªå®šä¹‰æ¨¡å‹ï¼Œé¦–å…ˆè¦å»ºç«‹ä¸€ä¸ªç»§æ‰¿ <code>Eloquent</code> çš„ã€ŒåŸºæœ¬ã€æ¨¡å‹ç±»ã€‚åœ¨å…¶ä»–çš„ Eloquent æ¨¡å‹ç»§æ‰¿è¿™ä¸ªè‡ªå®šä¹‰çš„åŸºæœ¬ç±»ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„ <code>Eloquent</code> ã€‚åœ¨åŸºæœ¬æ¨¡å‹ç±»é‡Œï¼ŒåŠ å…¥ä¸‹é¢çš„æ–¹æ³•å›ä¼ è‡ªå®šä¹‰çš„æ¢çº½æ¨¡å‹å®ä¾‹ï¼š</p>
<pre><code>public function newPivot(Model $parent, array $attributes, $table, $exists)
{
    return new YourCustomPivot($parent, $attributes, $table, $exists);
}</code></pre>
<p><a name="collections"></a></p>
<h2>Collections</h2>
<p>æ‰€æœ‰ Eloquent æŸ¥è¯¢å›ä¼ çš„æ•°æ®ï¼Œå¦‚æœç»“æœå¤šäºä¸€æ¡ï¼Œä¸ç®¡æ˜¯ç»ç”± <code>get</code> æ–¹æ³•æˆ–æ˜¯ <code>relationship</code>ï¼Œéƒ½ä¼šè½¬æ¢æˆ collection å¯¹è±¡å›ä¼ ã€‚è¿™ä¸ªå¯¹è±¡å®ç°äº† <code>IteratorAggregate</code> PHP æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥åƒæ•°ç»„ä¸€èˆ¬è¿›è¡Œéå†ã€‚è€Œ Collections å¯¹è±¡æœ¬èº«è¿˜æ‹¥æœ‰å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•å¯ä»¥æ“ä½œæ¨¡å‹æ•°æ®ã€‚</p>
<h4>ç¡®è®¤ Collection é‡Œæ˜¯å¦åŒ…å«ç‰¹å®šé”®å€¼</h4>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>contains</code> æ–¹æ³•ï¼Œç¡®è®¤ç»“æœæ•°æ®ä¸­ï¼Œæ˜¯å¦åŒ…å«ä¸»é”®ä¸ºç‰¹å®šå€¼çš„å¯¹è±¡ã€‚</p>
<pre><code>$roles = User::find(1)-&gt;roles;

if ($roles-&gt;contains(2))
{
    //
}</code></pre>
<p>Collection ä¹Ÿå¯ä»¥è½¬æ¢æˆæ•°ç»„æˆ– JSONï¼š</p>
<pre><code>$roles = User::find(1)-&gt;roles-&gt;toArray();

$roles = User::find(1)-&gt;roles-&gt;toJson();</code></pre>
<p>å¦‚æœ collection è¢«ç±»å‹è½¬æ¢æˆå­—ä¸²ï¼Œä¼šå›ä¼  JSON æ ¼å¼ï¼š</p>
<pre><code>$roles = (string) User::find(1)-&gt;roles;</code></pre>
<h4>Collections éå†</h4>
<p>Eloquent collections é‡ŒåŒ…å«äº†ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•å¯ä»¥è¿›è¡Œå¾ªç¯æˆ–æ˜¯è¿›è¡Œè¿‡æ»¤ï¼š</p>
<pre><code>$roles = $user-&gt;roles-&gt;each(function($role)
{
    //
});</code></pre>
<h4>Collection è¿‡æ»¤</h4>
<p>è¿‡æ»¤ collection æ—¶ï¼Œå›è°ƒå‡½æ•°çš„ä½¿ç”¨æ–¹å¼å’Œ <a href="javascript:if(confirm('http://php.net/manual/en/function.array-filter.php  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://php.net/manual/en/function.array-filter.php'" tppabs="http://php.net/manual/en/function.array-filter.php">array_filter</a> é‡Œä¸€æ ·ã€‚</p>
<pre><code>$users = $users-&gt;filter(function($user)
{
    return $user-&gt;isAdmin();
});</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœè¦åœ¨è¿‡æ»¤ collection ä¹‹åè½¬æˆ JSONï¼Œè½¬æ¢ä¹‹å‰å…ˆè°ƒç”¨ <code>values</code> æ–¹æ³•é‡è®¾æ•°ç»„çš„é”®å€¼ã€‚</p>
</blockquote>
<h4>éå†ä¼ å…¥ Collection é‡Œçš„æ¯ä¸ªå¯¹è±¡åˆ°å›è°ƒå‡½æ•°</h4>
<pre><code>$roles = User::find(1)-&gt;roles;

$roles-&gt;each(function($role)
{
    //
});</code></pre>
<h4>ä¾ç…§å±æ€§å€¼æ’åº</h4>
<pre><code>$roles = $roles-&gt;sortBy(function($role)
{
    return $role-&gt;created_at;
});</code></pre>
<h4>ä¾ç…§å±æ€§å€¼æ’åº</h4>
<pre><code>$roles = $roles-&gt;sortBy('created_at');</code></pre>
<h4>å›ä¼ è‡ªå®šä¹‰çš„é›†åˆå¯¹è±¡</h4>
<p>æœ‰æ—¶æ‚¨å¯èƒ½æƒ³è¦å›ä¼ è‡ªå®šä¹‰çš„é›†åˆå¯¹è±¡ï¼Œè®©æ‚¨å¯ä»¥åœ¨é›†åˆç±»é‡ŒåŠ å…¥æƒ³è¦çš„æ–¹æ³•ã€‚å¯ä»¥åœ¨ Eloquent æ¨¡å‹ç±»é‡Œé‡å†™ <code>newCollection</code> æ–¹æ³•ï¼š</p>
<pre><code>class User extends Eloquent {

    public function newCollection(array $models = array())
    {
        return new CustomCollection($models);
    }

}</code></pre>
<p><a name="accessors-and-mutators"></a></p>
<h2>è·å–å™¨å’Œä¿®æ”¹å™¨</h2>
<h4>å®šä¹‰è·å–å™¨</h4>
<p>Eloquent æä¾›äº†ä¾¿åˆ©çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨å–å¾—æˆ–è®¾å®šå±æ€§æ—¶è¿›è¡Œè½¬æ¢ã€‚è¦å®šä¹‰è·å–å™¨ï¼Œåªè¦åœ¨æ¨¡å‹é‡ŒåŠ å…¥ç±»ä¼¼ <code>getFooAttribute</code> çš„æ–¹æ³•ã€‚æ³¨æ„æ–¹æ³•åç§°åº”è¯¥ä½¿ç”¨é©¼å³°å¼å¤§å°å†™å‘½åï¼Œè€Œå¯¹åº”çš„ database å­—æ®µåç§°æ˜¯åº•çº¿åˆ†éš”å°å†™å‘½åï¼š</p>
<pre><code>class User extends Eloquent {

    public function getFirstNameAttribute($value)
    {
        return ucfirst($value);
    }

}</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ <code>first_name</code> å­—æ®µè®¾å®šäº†ä¸€ä¸ªè·å–å™¨ã€‚æ³¨æ„ä¼ å…¥æ–¹æ³•çš„å‚æ•°æ˜¯åŸæœ¬çš„å­—æ®µæ•°æ®ã€‚</p>
<h4>å®šä¹‰ä¿®æ”¹å™¨</h4>
<p>ä¿®æ”¹å™¨çš„å®šä¹‰æ–¹å¼å¾ˆé›·åŒï¼š</p>
<pre><code>class User extends Eloquent {

    public function setFirstNameAttribute($value)
    {
        $this-&gt;attributes['first_name'] = strtolower($value);
    }

}</code></pre>
<p><a name="date-mutators"></a></p>
<h2>æ—¥æœŸè½¬æ¢å™¨</h2>
<p>é»˜è®¤ Eloquent ä¼šæŠŠ <code>created_at</code> å’Œ <code>updated_at</code> å­—æ®µå±æ€§è½¬æ¢æˆ <a href="javascript:if(confirm('https://github.com/briannesbitt/Carbon  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://github.com/briannesbitt/Carbon'" tppabs="https://github.com/briannesbitt/Carbon">Carbon</a> å®ä¾‹ï¼Œå®ƒæä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œå¹¶ç»§æ‰¿äº† PHP åŸç”Ÿçš„ <code>DateTime</code> ç±»ã€‚</p>
<p>æ‚¨å¯ä»¥ç»ç”±é‡å†™æ¨¡å‹çš„ <code>getDates</code> æ–¹æ³•ï¼Œè‡ªå®šä¹‰å“ªä¸ªå­—æ®µå¯ä»¥è¢«è‡ªåŠ¨è½¬æ¢ï¼Œæˆ–ç”šè‡³å®Œå…¨ä¸è¦è®©æ—¥æœŸè½¬æ¢æˆ Carbonï¼š</p>
<pre><code>public function getDates()
{
    return array('created_at');
}</code></pre>
<p>å½“å­—æ®µæ˜¯è¡¨ç¤ºæ—¥æœŸçš„æ—¶å€™ï¼Œå¯ä»¥å°†å€¼è®¾ä¸º UNIX timestamp ã€æ—¥æœŸå­—ä¸²ï¼ˆ <code>Y-m-d</code> ï¼‰ã€ æ—¥æœŸæ—¶é—´ï¼ˆ date-time ï¼‰å­—ä¸²ï¼Œå½“ç„¶è¿˜æœ‰ <code>DateTime</code> æˆ– <code>Carbon</code> å®ä¾‹ã€‚</p>
<p>è¦å®Œå…¨å…³é—­æ—¥æœŸè½¬æ¢åŠŸèƒ½ï¼Œåªè¦ä» <code>getDates</code> æ–¹æ³•å›ä¼ ç©ºæ•°ç»„å³å¯ï¼š</p>
<pre><code>public function getDates()
{
    return array();
}</code></pre>
<p><a name="model-events"></a></p>
<h2>Model Events</h2>
<p>Eloquent æ¨¡å‹æœ‰å¾ˆå¤šäº‹ä»¶å¯ä»¥é©±åŠ¨ï¼Œè®©æ‚¨å¯ä»¥åœ¨æ¨¡å‹æ“ä½œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¸åŒæ—¶é—´ç‚¹ï¼Œä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ç»‘å®šäº‹ä»¶ï¼š <code>creating</code> ã€ <code>created</code> ã€ <code>updating</code> ã€ <code>updated</code> ã€ <code>saving</code> ã€ <code>saved</code> ã€ <code>deleting</code> ã€ <code>deleted</code> ã€ <code>restoring</code> ã€ <code>restored</code> ã€‚</p>
<p>å½“ä¸€ä¸ªå¯¹è±¡åˆæ¬¡è¢«å‚¨å­˜åˆ°æ•°æ®åº“ï¼Œ <code>creating</code> å’Œ <code>created</code> äº‹ä»¶ä¼šè¢«é©±åŠ¨ã€‚å¦‚æœä¸æ˜¯æ–°å¯¹è±¡è€Œè°ƒç”¨äº† <code>save</code> æ–¹æ³•ï¼Œ <code>updating</code> / <code>updated</code> äº‹ä»¶ä¼šè¢«é©±åŠ¨ã€‚è€Œä¸¤è€…çš„ <code>saving</code> / <code>saved</code> äº‹ä»¶éƒ½ä¼šè¢«é©±åŠ¨ã€‚</p>
<h4>ä½¿ç”¨äº‹ä»¶å–æ¶ˆæ•°æ®åº“æ“ä½œ</h4>
<p>å¦‚æœ <code>creating</code> ã€ <code>updating</code> ã€ <code>saving</code> ã€ <code>deleting</code> äº‹ä»¶å›ä¼  <code>false</code> çš„è¯ï¼Œå°±ä¼šå–æ¶ˆæ•°æ®åº“æ“ä½œï¼š</p>
<pre><code>User::creating(function($user)
{
    if ( ! $user-&gt;isValid()) return false;
});</code></pre>
<h4>è®¾å®šæ¨¡å‹ Boot æ–¹æ³•</h4>
<p>Eloquent æ¨¡å‹æœ‰é™æ€çš„ <code>boot</code> æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ–¹ä¾¿çš„æ³¨å†Œäº‹ä»¶ç»‘å®šã€‚</p>
<pre><code>class User extends Eloquent {

    public static function boot()
    {
        parent::boot();

        // Setup event bindings...
    }

}</code></pre>
<p><a name="model-observers"></a></p>
<h2>æ¨¡å‹è§‚å¯Ÿè€…</h2>
<p>è¦æ•´åˆæ¨¡å‹çš„äº‹ä»¶å¤„ç†ï¼Œå¯ä»¥æ³¨å†Œä¸€ä¸ªæ¨¡å‹è§‚å¯Ÿè€…ã€‚è§‚å¯Ÿè€…ç±»é‡Œè¦è®¾å®šå¯¹åº”æ¨¡å‹äº‹ä»¶çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œè§‚å¯Ÿè€…ç±»é‡Œå¯èƒ½æœ‰ <code>creating</code> ã€ <code>updating</code> ã€ <code>saving</code> æ–¹æ³•ï¼Œè¿˜æœ‰å…¶ä»–å¯¹åº”æ¨¡å‹äº‹ä»¶åç§°çš„æ–¹æ³•ï¼š</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨¡å‹è§‚å¯Ÿè€…ç±»å¯èƒ½çœ‹èµ·æ¥å¦‚ä¸‹ï¼š</p>
<pre><code>class UserObserver {

    public function saving($model)
    {
        //
    }

    public function saved($model)
    {
        //
    }

}</code></pre>
<p>å¯ä»¥ä½¿ç”¨ <code>observe</code> æ–¹æ³•æ³¨å†Œä¸€ä¸ªè§‚å¯Ÿè€…å®ä¾‹ï¼š</p>
<pre><code>User::observe(new UserObserver);</code></pre>
<p><a name="converting-to-arrays-or-json"></a></p>
<h2>è½¬æ¢æˆæ•°ç»„ / JSON</h2>
<h4>å°†æ¨¡å‹æ•°æ®è½¬æˆæ•°ç»„</h4>
<p>å»ºç«‹ JSON API æ—¶ï¼Œæ‚¨å¯èƒ½å¸¸å¸¸éœ€è¦æŠŠæ¨¡å‹å’Œå…³è”å¯¹è±¡è½¬æ¢æˆæ•°ç»„æˆ– JSON ã€‚æ‰€ä»¥ Eloquent é‡Œå·²ç»åŒ…å«äº†è¿™äº›æ–¹æ³•ã€‚è¦æŠŠæ¨¡å‹å’Œå·²è½½å…¥çš„å…³è”å¯¹è±¡è½¬æˆæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨ <code>toArray</code> æ–¹æ³•ï¼š</p>
<pre><code>$user = User::with('roles')-&gt;first();

return $user-&gt;toArray();</code></pre>
<p>è®°å¾—ä¹Ÿå¯ä»¥æŠŠæ¨¡å‹ collection è½¬æ¢æˆæ•°ç»„ï¼š</p>
<pre><code>return User::all()-&gt;toArray();</code></pre>
<h4>æŠŠæ¨¡å‹è½¬æ¢æˆ JSON</h4>
<p>è¦æŠŠæ¨¡å‹è½¬æ¢æˆ JSONï¼Œå¯ä»¥ä½¿ç”¨ <code>toJson</code> æ–¹æ³•ï¼š</p>
<pre><code>return User::find(1)-&gt;toJson();</code></pre>
<h4>ä»è·¯ç”±å›ä¼ æ¨¡å‹</h4>
<p>æ³¨æ„å½“æ¨¡å‹æˆ– collection è¢«ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²æ—¶ä¼šè‡ªåŠ¨è½¬æ¢æˆ JSON æ ¼å¼ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥ç›´æ¥ä»è·¯ç”±å›ä¼  Eloquent å¯¹è±¡ï¼</p>
<pre><code>Route::get('users', function()
{
    return User::all();
});</code></pre>
<h4>è½¬æ¢æˆæ•°ç»„æˆ– JSON æ—¶éšè—å±æ€§</h4>
<p>æœ‰æ—¶æ‚¨å¯èƒ½æƒ³è¦é™åˆ¶èƒ½å‡ºç°åœ¨æ•°ç»„æˆ– JSON æ ¼å¼çš„å±æ€§æ•°æ®ï¼Œæ¯”å¦‚å¯†ç ã€‚åªè¦åœ¨æ¨¡å‹é‡Œå¢åŠ  <code>hidden</code> å±æ€§å³å¯ï¼š</p>
<pre><code>class User extends Eloquent {

    protected $hidden = array('password');

}</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> è¦éšè—å…³è”æ•°æ®ï¼Œè¦ä½¿ç”¨å…³è”çš„<strong>æ–¹æ³•</strong>åç§°ï¼Œè€Œä¸æ˜¯åŠ¨æ€è·å–çš„å±æ€§åç§°ã€‚</p>
</blockquote>
<p>æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨ <code>visible</code> å±æ€§å®šä¹‰ç™½åå•ï¼š</p>
<pre><code>protected $visible = array('first_name', 'last_name');</code></pre>
<p><a name="array-appends"></a>
æœ‰æ—¶å€™æ‚¨å¯èƒ½æƒ³è¦å¢åŠ ä¸å­˜åœ¨æ•°æ®åº“å­—æ®µçš„å±æ€§æ•°æ®ã€‚è¿™æ—¶å€™åªè¦å®šä¹‰ä¸€ä¸ªè·å–å™¨å³å¯ï¼š</p>
<pre><code>public function getIsAdminAttribute()
{
    return $this-&gt;attributes['admin'] == 'yes';
}</code></pre>
<p>å®šä¹‰å¥½è·å–å™¨ä¹‹åï¼Œå†æŠŠå¯¹åº”çš„å±æ€§åç§°åŠ åˆ°æ¨¡å‹é‡Œçš„ <code>appends</code> å±æ€§ï¼š</p>
<pre><code>protected $appends = array('is_admin');</code></pre>
<p>æŠŠå±æ€§åŠ åˆ° <code>appends</code> æ•°ç»„ä¹‹åï¼Œåœ¨æ¨¡å‹æ•°æ®è½¬æ¢æˆæ•°ç»„æˆ– JSON æ ¼å¼æ—¶å°±ä¼šæœ‰å¯¹åº”çš„å€¼ã€‚åœ¨ <code>appends</code> æ•°ç»„ä¸­çš„å€¼ä¼šéµå¾ª <code>visible</code> å’Œ <code>hidden</code> çš„è®¾å®šã€‚</p>
		</div>

		<div class="main-footer" style="border-top:1px dashed rgba(0, 0, 0, 0.1);padding-top: 30px;margin-top:30px;margin-bottom: 20px;">
			<div class="prev-next-wrap clearfix">

				
			    &nbsp;
							</div>
		</div>

	</article>
</div>

		<footer class="main">
			<ul>
				<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">æ–‡æ¡£</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS é€ŸæŸ¥è¡¨</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel ç¤¾åŒº</a>
</li>
			</ul>
			<p>Laravel is a trademark of Taylor Otwell. Copyright &copy; Taylor Otwell.</p>
			<p class="less-significant"><a href="javascript:if(confirm('http://jackmcdade.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://jackmcdade.com/'" tppabs="http://jackmcdade.com/">Design by Jack McDade</a></p>

			<p class="less-significant">
				<a href="javascript:if(confirm('http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao'" tppabs="http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao" target="_blank">ç”± UCloud èµåŠ©  <img src="dYfOYswiQY.png" tppabs="https://dn-phphub.qbox.me/uploads/images/201605/03/1/dYfOYswiQY.png" width="98" data-toggle="tooltip" data-placement="top" title="æœ¬ç«™æœåŠ¡å™¨ç”± UCloud èµåŠ©"></a>.
		      </p>
		</footer>

	</div>

	<script src="laravel.js" tppabs="http://laravel-china.org/assets/js/laravel.js"></script>
	<script src="viewport-units-buggyfill.js" tppabs="http://laravel-china.org/assets/js/viewport-units-buggyfill.js"></script>
	<script>window.viewportUnitsBuggyfill.init();</script>
    <script>

		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','analytics.js'/*tpa=http://7xijlf.com2.z0.glb.qiniucdn.com/js/analytics.js*/,'ga');

		ga('create', 'UA-53903425-7', 'auto');
		ga('send', 'pageview');

		$(window).load(function() {
		  // When the page has loaded
		  $(".main-content").fadeIn(10);
		});
    </script>
</body>
</html>
