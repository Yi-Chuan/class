<!doctype html>
<html>
<head>
	<meta charset=UTF-8"utf-8">
	<title>Laravel 5.1 ä¸­æ–‡æ–‡æ¡£ï¼šæµ‹è¯•
</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="author" content="@summerblue">
	<meta name="description" content="æµ‹è¯•,ç®€ä»‹,æµ‹è¯•åº”ç”¨ç¨‹åº,ä¸ä½ çš„åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’,æµ‹è¯• JSON APIs,Sessions å’Œè®¤è¯,åœç”¨ä¸­é—´ä»¶,è‡ªå®šä¹‰ HTTP è¯·æ±‚,PHPUnit æ–­è¨€,ä½¿ç”¨æ•°æ®åº“,æ¯æ¬¡æµ‹è¯•ç»“æŸåé‡ç½®æ•°æ®åº“,æ¨¡å‹å·¥å‚,æ¨¡æ‹Ÿ,æ¨¡æ‹Ÿäº‹ä»¶,æ¨¡æ‹Ÿä»»åŠ¡,æ¨¡æ‹Ÿ Facades,ç®€ä»‹,Laravel åœ¨åˆ›å»ºæ—¶å°±å·²è€ƒè™‘åˆ°æµ‹è¯•çš„éƒ¨åˆ†ã€‚äº‹å®ä¸Šï¼Œ Laravel é»˜è®¤å°±æ”¯æŒç”¨ PHPUnit æ¥åšæµ‹è¯•ï¼Œå¹¶ä¸ºä½ çš„åº”ç”¨ç¨‹åºåˆ›å»ºå¥½äº†...
">
	<meta name="keywords" content="æµ‹è¯•,laravel5.1æ–‡æ¡£,laravel5.1ä¸­æ–‡æ–‡æ¡£,laravelä¸­å›½,laravelä¸­æ–‡,laravelæ¡†æ¶ä¸­æ–‡,laravelæ–‡æ¡£,laravelæ¡†æ¶ä¸­å›½,laravelä¸­æ–‡æ–‡æ¡£
">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--[if lte IE 9]>
		<script src="html5shiv.min.js" tppabs="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
	<![endif]-->
	<link rel="stylesheet" href="laravel.css" tppabs="http://laravel-china.org/assets/css/laravel.css">
	<style media="screen">
		div.main-content {
		  display: none;
		}
		.loading-effect {
			position: fixed;
			left: 50%;
			top:300px;
		    z-index: -1;
		}
	</style>
</head>
<body class="docs language-php ">

	<span class="overlay"></span>

	<div class="loading-effect">
		<div class="loader-inner line-scale">
		      <div></div>
		      <div></div>
		      <div></div>
		      <div></div>
		      <div></div>
		  </div>
	</div>


	<div class="main-content">

		<nav class="main">
			<div class="container">
				<a href="javascript:if(confirm('http://laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/" class="brand">
					<img src="laravel-logo.png" tppabs="http://laravel-china.org/assets/img/laravel-logo.png" height="30">
					Laravel
				</a>

				<div class="responsive-sidebar-nav">
					<a href="#" class="toggle-slide menu-link btn">&#9776;</a>
				</div>

									<div class="switcher">
	<div class="dropdown">
		<button class="btn dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
			<!--<span class="faint">v</span> -->
			5.1
			<span class="caret"></span>
		</button>
		<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
							<li role="presentation">
					<a role="menuitem" tabindex="-1" href="testing.htm" tppabs="http://laravel-china.org/docs/5.1/testing">5.1</a>
				</li>
							<li role="presentation">
					<a role="menuitem" tabindex="-1" href="testing-1.htm" tppabs="http://laravel-china.org/docs/4.2/testing">4.2</a>
				</li>
					</ul>
	</div>
</div>
				
				<ul class="main-nav">
					<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">æ–‡æ¡£</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS é€ŸæŸ¥è¡¨</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel ç¤¾åŒº</a>
</li>
				</ul>
			</div>
		</nav>

		<nav id="slide-menu" class="slide-menu" role="navigation">

	<div class="brand">
		<a href="javascript:if(confirm('http://laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/">
			<img src="laravel-logo-white.png" tppabs="http://laravel-china.org/assets/img/laravel-logo-white.png" height="50">
		</a>
	</div>

	<ul class="slide-main-nav">
		<li><a href="javascript:if(confirm('http://laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/'" tppabs="http://laravel-china.org/">Home</a></li>
		<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">æ–‡æ¡£</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS é€ŸæŸ¥è¡¨</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel ç¤¾åŒº</a>
</li>
	</ul>

	<div class="slide-docs-nav">
		<h2>æ–‡æ¡£</h2>

		<a type="button" class="turnofflight"><i class="fa fa-lightbulb-o"></i> <i class="fa fa-star-o"></i> å¤œé—´æ¨¡å¼ </a>
		<ul>
<li>å‰è¨€
<ul>
<li><a href="about.htm" tppabs="http://laravel-china.org/docs/5.1/about">ç¿»è¯‘è¯´æ˜</a></li>
<li><a href="releases.htm" tppabs="http://laravel-china.org/docs/5.1/releases">å‘è¡Œè¯´æ˜</a></li>
<li><a href="upgrade.htm" tppabs="http://laravel-china.org/docs/5.1/upgrade">å‡çº§å¯¼å¼•</a></li>
<li><a href="contributions.htm" tppabs="http://laravel-china.org/docs/5.1/contributions">è´¡çŒ®å¯¼å¼•</a></li>
<li><a href="javascript:if(confirm('http://laravel-china.org/api/5.1  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/api/5.1'" tppabs="http://laravel-china.org/api/5.1">API æ–‡æ¡£</a></li>
</ul></li>
<li>ç¯å¢ƒé…ç½®
<ul>
<li><a href="installation.htm" tppabs="http://laravel-china.org/docs/5.1/installation">å®‰è£…</a></li>
<li><a href="homestead.htm" tppabs="http://laravel-china.org/docs/5.1/homestead">Homestead</a></li>
</ul></li>
<li>åŸºæœ¬åŠŸèƒ½
<ul>
<li><a href="routing.htm" tppabs="http://laravel-china.org/docs/5.1/routing">è·¯ç”±</a></li>
<li><a href="middleware.htm" tppabs="http://laravel-china.org/docs/5.1/middleware">ä¸­é—´ä»¶</a></li>
<li><a href="controllers.htm" tppabs="http://laravel-china.org/docs/5.1/controllers">æ§åˆ¶å™¨</a></li>
<li><a href="requests.htm" tppabs="http://laravel-china.org/docs/5.1/requests">è¯·æ±‚</a></li>
<li><a href="responses.htm" tppabs="http://laravel-china.org/docs/5.1/responses">å“åº”</a></li>
<li><a href="views.htm" tppabs="http://laravel-china.org/docs/5.1/views">è§†å›¾</a></li>
<li><a href="blade.htm" tppabs="http://laravel-china.org/docs/5.1/blade">Blade æ¨¡æ¿</a></li>
</ul></li>
<li>æ•™ç¨‹
<ul>
<li><a href="quickstart.htm" tppabs="http://laravel-china.org/docs/5.1/quickstart">åˆçº§ä»»åŠ¡æ¸…å•</a></li>
<li><a href="quickstart-intermediate.htm" tppabs="http://laravel-china.org/docs/5.1/quickstart-intermediate">ä¸­çº§ä»»åŠ¡æ¸…å•</a></li>
</ul></li>
<li>ç³»ç»Ÿæ¶æ„
<ul>
<li><a href="lifecycle.htm" tppabs="http://laravel-china.org/docs/5.1/lifecycle">è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ</a></li>
<li><a href="structure.htm" tppabs="http://laravel-china.org/docs/5.1/structure">åº”ç”¨ç¨‹åºç»“æ„</a></li>
<li><a href="providers.htm" tppabs="http://laravel-china.org/docs/5.1/providers">æœåŠ¡æä¾›è€…</a></li>
<li><a href="container.htm" tppabs="http://laravel-china.org/docs/5.1/container">æœåŠ¡å®¹å™¨</a></li>
<li><a href="contracts.htm" tppabs="http://laravel-china.org/docs/5.1/contracts">Contracts</a></li>
<li><a href="facades.htm" tppabs="http://laravel-china.org/docs/5.1/facades">Facades</a></li>
</ul></li>
<li>ç³»ç»ŸæœåŠ¡
<ul>
<li><a href="authentication.htm" tppabs="http://laravel-china.org/docs/5.1/authentication">ç”¨æˆ·è®¤è¯</a></li>
<li><a href="authorization.htm" tppabs="http://laravel-china.org/docs/5.1/authorization">ç”¨æˆ·æˆæƒ</a></li>
<li><a href="artisan.htm" tppabs="http://laravel-china.org/docs/5.1/artisan">Artisan å‘½ä»¤è¡Œ</a></li>
<li><a href="billing.htm" tppabs="http://laravel-china.org/docs/5.1/billing">äº¤æ˜“</a></li>
<li><a href="cache.htm" tppabs="http://laravel-china.org/docs/5.1/cache">ç¼“å­˜</a></li>
<li><a href="collections.htm" tppabs="http://laravel-china.org/docs/5.1/collections">é›†åˆ</a></li>
<li><a href="elixir.htm" tppabs="http://laravel-china.org/docs/5.1/elixir">Elixir</a></li>
<li><a href="encryption.htm" tppabs="http://laravel-china.org/docs/5.1/encryption">åŠ å¯†ä¸è§£å¯†</a></li>
<li><a href="errors.htm" tppabs="http://laravel-china.org/docs/5.1/errors">é”™è¯¯ä¸æ—¥å¿—</a></li>
<li><a href="events.htm" tppabs="http://laravel-china.org/docs/5.1/events">äº‹ä»¶</a></li>
<li><a href="filesystem.htm" tppabs="http://laravel-china.org/docs/5.1/filesystem">æ–‡ä»¶ç³»ç»Ÿä¸äº‘å­˜å‚¨</a></li>
<li><a href="hashing.htm" tppabs="http://laravel-china.org/docs/5.1/hashing">å“ˆå¸Œ</a></li>
<li><a href="helpers.htm" tppabs="http://laravel-china.org/docs/5.1/helpers">è¾…åŠ©å‡½æ•°</a></li>
<li><a href="localization.htm" tppabs="http://laravel-china.org/docs/5.1/localization">æœ¬åœ°åŒ–</a></li>
<li><a href="mail.htm" tppabs="http://laravel-china.org/docs/5.1/mail">é‚®ä»¶</a></li>
<li><a href="packages.htm" tppabs="http://laravel-china.org/docs/5.1/packages">æ‰©å±•åŒ…å¼€å‘</a></li>
<li><a href="pagination.htm" tppabs="http://laravel-china.org/docs/5.1/pagination">åˆ†é¡µ</a></li>
<li><a href="queues.htm" tppabs="http://laravel-china.org/docs/5.1/queues">é˜Ÿåˆ—</a></li>
<li><a href="redis.htm" tppabs="http://laravel-china.org/docs/5.1/redis">Redis</a></li>
<li><a href="session.htm" tppabs="http://laravel-china.org/docs/5.1/session">Session</a></li>
<li><a href="envoy.htm" tppabs="http://laravel-china.org/docs/5.1/envoy">Envoy</a></li>
<li><a href="scheduling.htm" tppabs="http://laravel-china.org/docs/5.1/scheduling">ä»»åŠ¡è°ƒåº¦</a></li>
<li><a href="testing.htm" tppabs="http://laravel-china.org/docs/5.1/testing">æµ‹è¯•</a></li>
<li><a href="validation.htm" tppabs="http://laravel-china.org/docs/5.1/validation">è¡¨å•éªŒè¯</a></li>
</ul></li>
<li>æ•°æ®åº“
<ul>
<li><a href="database.htm" tppabs="http://laravel-china.org/docs/5.1/database">å…¥é—¨</a></li>
<li><a href="queries.htm" tppabs="http://laravel-china.org/docs/5.1/queries">æŸ¥è¯¢æ„é€ å™¨</a></li>
<li><a href="migrations.htm" tppabs="http://laravel-china.org/docs/5.1/migrations">æ•°æ®åº“è¿ç§»</a></li>
<li><a href="seeding.htm" tppabs="http://laravel-china.org/docs/5.1/seeding">æ•°æ®å¡«å……</a></li>
</ul></li>
<li>Eloquent ORM
<ul>
<li><a href="eloquent.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent">å…¥é—¨</a></li>
<li><a href="eloquent-relationships.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-relationships">æ¨¡å‹å…³è”</a></li>
<li><a href="eloquent-collections.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-collections">Eloquent é›†åˆ</a></li>
<li><a href="eloquent-mutators.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-mutators">Getter/Setter</a></li>
<li><a href="eloquent-serialization.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-serialization">åºåˆ—åŒ–</a></li>
</ul></li>
</ul>
	</div>

</nav>

<div class="docs-wrapper container">

	<section class="sidebar">

		<div class="header">
			<a type="button" class="btn btn-primary btn-lg btn-block turnofflight"><i class="fa fa-lightbulb-o"></i> <i class="fa fa-star-o"></i> å¤œé—´æ¨¡å¼ </a>
		</div>

		<ul>
<li>å‰è¨€
<ul>
<li><a href="about.htm" tppabs="http://laravel-china.org/docs/5.1/about">ç¿»è¯‘è¯´æ˜</a></li>
<li><a href="releases.htm" tppabs="http://laravel-china.org/docs/5.1/releases">å‘è¡Œè¯´æ˜</a></li>
<li><a href="upgrade.htm" tppabs="http://laravel-china.org/docs/5.1/upgrade">å‡çº§å¯¼å¼•</a></li>
<li><a href="contributions.htm" tppabs="http://laravel-china.org/docs/5.1/contributions">è´¡çŒ®å¯¼å¼•</a></li>
<li><a href="javascript:if(confirm('http://laravel-china.org/api/5.1  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/api/5.1'" tppabs="http://laravel-china.org/api/5.1">API æ–‡æ¡£</a></li>
</ul></li>
<li>ç¯å¢ƒé…ç½®
<ul>
<li><a href="installation.htm" tppabs="http://laravel-china.org/docs/5.1/installation">å®‰è£…</a></li>
<li><a href="homestead.htm" tppabs="http://laravel-china.org/docs/5.1/homestead">Homestead</a></li>
</ul></li>
<li>åŸºæœ¬åŠŸèƒ½
<ul>
<li><a href="routing.htm" tppabs="http://laravel-china.org/docs/5.1/routing">è·¯ç”±</a></li>
<li><a href="middleware.htm" tppabs="http://laravel-china.org/docs/5.1/middleware">ä¸­é—´ä»¶</a></li>
<li><a href="controllers.htm" tppabs="http://laravel-china.org/docs/5.1/controllers">æ§åˆ¶å™¨</a></li>
<li><a href="requests.htm" tppabs="http://laravel-china.org/docs/5.1/requests">è¯·æ±‚</a></li>
<li><a href="responses.htm" tppabs="http://laravel-china.org/docs/5.1/responses">å“åº”</a></li>
<li><a href="views.htm" tppabs="http://laravel-china.org/docs/5.1/views">è§†å›¾</a></li>
<li><a href="blade.htm" tppabs="http://laravel-china.org/docs/5.1/blade">Blade æ¨¡æ¿</a></li>
</ul></li>
<li>æ•™ç¨‹
<ul>
<li><a href="quickstart.htm" tppabs="http://laravel-china.org/docs/5.1/quickstart">åˆçº§ä»»åŠ¡æ¸…å•</a></li>
<li><a href="quickstart-intermediate.htm" tppabs="http://laravel-china.org/docs/5.1/quickstart-intermediate">ä¸­çº§ä»»åŠ¡æ¸…å•</a></li>
</ul></li>
<li>ç³»ç»Ÿæ¶æ„
<ul>
<li><a href="lifecycle.htm" tppabs="http://laravel-china.org/docs/5.1/lifecycle">è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ</a></li>
<li><a href="structure.htm" tppabs="http://laravel-china.org/docs/5.1/structure">åº”ç”¨ç¨‹åºç»“æ„</a></li>
<li><a href="providers.htm" tppabs="http://laravel-china.org/docs/5.1/providers">æœåŠ¡æä¾›è€…</a></li>
<li><a href="container.htm" tppabs="http://laravel-china.org/docs/5.1/container">æœåŠ¡å®¹å™¨</a></li>
<li><a href="contracts.htm" tppabs="http://laravel-china.org/docs/5.1/contracts">Contracts</a></li>
<li><a href="facades.htm" tppabs="http://laravel-china.org/docs/5.1/facades">Facades</a></li>
</ul></li>
<li>ç³»ç»ŸæœåŠ¡
<ul>
<li><a href="authentication.htm" tppabs="http://laravel-china.org/docs/5.1/authentication">ç”¨æˆ·è®¤è¯</a></li>
<li><a href="authorization.htm" tppabs="http://laravel-china.org/docs/5.1/authorization">ç”¨æˆ·æˆæƒ</a></li>
<li><a href="artisan.htm" tppabs="http://laravel-china.org/docs/5.1/artisan">Artisan å‘½ä»¤è¡Œ</a></li>
<li><a href="billing.htm" tppabs="http://laravel-china.org/docs/5.1/billing">äº¤æ˜“</a></li>
<li><a href="cache.htm" tppabs="http://laravel-china.org/docs/5.1/cache">ç¼“å­˜</a></li>
<li><a href="collections.htm" tppabs="http://laravel-china.org/docs/5.1/collections">é›†åˆ</a></li>
<li><a href="elixir.htm" tppabs="http://laravel-china.org/docs/5.1/elixir">Elixir</a></li>
<li><a href="encryption.htm" tppabs="http://laravel-china.org/docs/5.1/encryption">åŠ å¯†ä¸è§£å¯†</a></li>
<li><a href="errors.htm" tppabs="http://laravel-china.org/docs/5.1/errors">é”™è¯¯ä¸æ—¥å¿—</a></li>
<li><a href="events.htm" tppabs="http://laravel-china.org/docs/5.1/events">äº‹ä»¶</a></li>
<li><a href="filesystem.htm" tppabs="http://laravel-china.org/docs/5.1/filesystem">æ–‡ä»¶ç³»ç»Ÿä¸äº‘å­˜å‚¨</a></li>
<li><a href="hashing.htm" tppabs="http://laravel-china.org/docs/5.1/hashing">å“ˆå¸Œ</a></li>
<li><a href="helpers.htm" tppabs="http://laravel-china.org/docs/5.1/helpers">è¾…åŠ©å‡½æ•°</a></li>
<li><a href="localization.htm" tppabs="http://laravel-china.org/docs/5.1/localization">æœ¬åœ°åŒ–</a></li>
<li><a href="mail.htm" tppabs="http://laravel-china.org/docs/5.1/mail">é‚®ä»¶</a></li>
<li><a href="packages.htm" tppabs="http://laravel-china.org/docs/5.1/packages">æ‰©å±•åŒ…å¼€å‘</a></li>
<li><a href="pagination.htm" tppabs="http://laravel-china.org/docs/5.1/pagination">åˆ†é¡µ</a></li>
<li><a href="queues.htm" tppabs="http://laravel-china.org/docs/5.1/queues">é˜Ÿåˆ—</a></li>
<li><a href="redis.htm" tppabs="http://laravel-china.org/docs/5.1/redis">Redis</a></li>
<li><a href="session.htm" tppabs="http://laravel-china.org/docs/5.1/session">Session</a></li>
<li><a href="envoy.htm" tppabs="http://laravel-china.org/docs/5.1/envoy">Envoy</a></li>
<li><a href="scheduling.htm" tppabs="http://laravel-china.org/docs/5.1/scheduling">ä»»åŠ¡è°ƒåº¦</a></li>
<li><a href="testing.htm" tppabs="http://laravel-china.org/docs/5.1/testing">æµ‹è¯•</a></li>
<li><a href="validation.htm" tppabs="http://laravel-china.org/docs/5.1/validation">è¡¨å•éªŒè¯</a></li>
</ul></li>
<li>æ•°æ®åº“
<ul>
<li><a href="database.htm" tppabs="http://laravel-china.org/docs/5.1/database">å…¥é—¨</a></li>
<li><a href="queries.htm" tppabs="http://laravel-china.org/docs/5.1/queries">æŸ¥è¯¢æ„é€ å™¨</a></li>
<li><a href="migrations.htm" tppabs="http://laravel-china.org/docs/5.1/migrations">æ•°æ®åº“è¿ç§»</a></li>
<li><a href="seeding.htm" tppabs="http://laravel-china.org/docs/5.1/seeding">æ•°æ®å¡«å……</a></li>
</ul></li>
<li>Eloquent ORM
<ul>
<li><a href="eloquent.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent">å…¥é—¨</a></li>
<li><a href="eloquent-relationships.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-relationships">æ¨¡å‹å…³è”</a></li>
<li><a href="eloquent-collections.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-collections">Eloquent é›†åˆ</a></li>
<li><a href="eloquent-mutators.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-mutators">Getter/Setter</a></li>
<li><a href="eloquent-serialization.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-serialization">åºåˆ—åŒ–</a></li>
</ul></li>
</ul>
	</section>

	<article>

		<div class="alert alert-warning" role="alert">

			<h4>æ‹¥æŠ± Laravel 5.1 LTS</h4>
			<p>
				å¼ºçƒˆå»ºè®®åœ¨ 2018 å¹´ä¹‹å‰ä½¿ç”¨ Laravel 5.1 æ¥æ„å»ºé¡¹ç›®ï¼ŒLaravel 5.1 æ˜¯ LTS çš„å‘è¡Œç‰ˆæœ¬, å‘è¡Œäº 2015 å¹´ 6 æœˆä»½ï¼Œè‡ªå‘å¸ƒèµ·æä¾›ä¸¤å¹´æ—¶é—´çš„ Bug ä¿®å¤ï¼ˆ2017 å¹´ 6 æœˆï¼‰, 3 å¹´æ—¶é—´çš„å®‰å…¨ä¿®å¤ï¼ˆ2018 å¹´ 6 æœˆï¼‰ã€‚
			</p>
			 <p>
			 	LTS ç‰ˆæœ¬æ˜¯æ­¤é¡¹ç›®èƒ½æä¾›çš„æœ€é•¿æ—¶é—´ç»´æŠ¤ç‰ˆæœ¬ã€‚ä¸€èˆ¬çš„å‘è¡Œç‰ˆæœ¬, åªæä¾› 6 ä¸ªæœˆçš„ Bug ä¿®å¤æ”¯æŒ, ä¸€å¹´çš„å®‰å…¨ä¿®å¤æ”¯æŒ.
			 </p>
		</div>

		<div class="main-content">
			<h1>æµ‹è¯•</h1>
<ul>
<li><a href="#introduction">ç®€ä»‹</a></li>
<li><a href="#application-testing">æµ‹è¯•åº”ç”¨ç¨‹åº</a>
<ul>
<li><a href="#interacting-with-your-application">ä¸ä½ çš„åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’</a></li>
<li><a href="#testing-json-apis">æµ‹è¯• JSON APIs</a></li>
<li><a href="#sessions-and-authentication">Sessions å’Œè®¤è¯</a></li>
<li><a href="#disabling-middleware">åœç”¨ä¸­é—´ä»¶</a></li>
<li><a href="#custom-http-requests">è‡ªå®šä¹‰ HTTP è¯·æ±‚</a></li>
<li><a href="#phpunit-assertions">PHPUnit æ–­è¨€</a></li>
</ul></li>
<li><a href="#working-with-databases">ä½¿ç”¨æ•°æ®åº“</a>
<ul>
<li><a href="#resetting-the-database-after-each-test">æ¯æ¬¡æµ‹è¯•ç»“æŸåé‡ç½®æ•°æ®åº“</a></li>
<li><a href="#model-factories">æ¨¡å‹å·¥å‚</a></li>
</ul></li>
<li><a href="#mocking">æ¨¡æ‹Ÿ</a>
<ul>
<li><a href="#mocking-events">æ¨¡æ‹Ÿäº‹ä»¶</a></li>
<li><a href="#mocking-jobs">æ¨¡æ‹Ÿä»»åŠ¡</a></li>
<li><a href="#mocking-facades">æ¨¡æ‹Ÿ Facades</a></li>
</ul></li>
</ul>
<p><a name="introduction"></a></p>
<h2>ç®€ä»‹</h2>
<p>Laravel åœ¨åˆ›å»ºæ—¶å°±å·²è€ƒè™‘åˆ°æµ‹è¯•çš„éƒ¨åˆ†ã€‚äº‹å®ä¸Šï¼Œ Laravel é»˜è®¤å°±æ”¯æŒç”¨ PHPUnit æ¥åšæµ‹è¯•ï¼Œå¹¶ä¸ºä½ çš„åº”ç”¨ç¨‹åºåˆ›å»ºå¥½äº† <code>phpunit.xml</code> æ–‡ä»¶ã€‚æ¡†æ¶è¿˜æä¾›äº†ä¸€äº›ä¾¿åˆ©çš„è¾…åŠ©å‡½æ•°ï¼Œè®©ä½ å¯ä»¥æ›´ç›´è§‚çš„æµ‹è¯•åº”ç”¨ç¨‹åºã€‚</p>
<p>åœ¨ <code>tests</code> ç›®å½•ä¸­æœ‰æä¾›ä¸€ä¸ª <code>ExampleTest.php</code> çš„ç¤ºä¾‹æ–‡ä»¶ã€‚å®‰è£…æ–°çš„ Laravel åº”ç”¨ç¨‹åºä¹‹åï¼Œåªéœ€åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œ <code>phpunit</code> å°±å¯ä»¥è¿›è¡Œæµ‹è¯•ã€‚</p>
<h3>æµ‹è¯•ç¯å¢ƒ</h3>
<p>åœ¨è¿è¡Œæµ‹è¯•æ—¶ï¼ŒLaravel ä¼šè‡ªåŠ¨å°†ç¯å¢ƒå˜é‡è®¾ç½®ä¸º <code>testing</code>ï¼Œå¹¶å°† Session åŠç¼“å­˜ä»¥ <code>æ•°ç»„</code> çš„å½¢å¼å­˜å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æµ‹è¯•æ—¶ä¸ä¼šä¿å­˜ä»»ä½•çš„ Session æˆ–ç¼“å­˜æ•°æ®ã€‚</p>
<p>ä½ å¯ä»¥éšæ„åˆ›å»ºå…¶å®ƒå¿…è¦çš„æµ‹è¯•ç¯å¢ƒé…ç½®ã€‚<code>testing</code> çš„ç¯å¢ƒå˜é‡å¯ä»¥åœ¨ <code>phpunit.xml</code> æ–‡ä»¶ä¸­è¢«ä¿®æ”¹ã€‚</p>
<h3>å®šä¹‰å¹¶è¿è¡Œæµ‹è¯•</h3>
<p>è¦åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹ï¼Œå¯ä½¿ç”¨ <code>make:test</code> Artisan å‘½ä»¤ï¼š</p>
<pre><code>php artisan make:test UserTest</code></pre>
<p>æ­¤å‘½ä»¤ä¼šæ”¾ç½®ä¸€ä¸ªæ–°çš„ <code>UserTest</code> ç±»è‡³ä½ çš„ <code>tests</code> ç›®å½•ã€‚æ¥ç€å°±å¯ä»¥åƒå¹³å¸¸ä½¿ç”¨ PHPUnit ä¸€æ ·æ¥å®šä¹‰æµ‹è¯•æ–¹æ³•ã€‚è¦è¿è¡Œæµ‹è¯•åªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œ <code>phpunit</code> å‘½ä»¤å³å¯ï¼š</p>
<pre><code>&lt;?php

use Illuminate\Foundation\Testing\WithoutMiddleware;
use Illuminate\Foundation\Testing\DatabaseMigrations;
use Illuminate\Foundation\Testing\DatabaseTransactions;

class UserTest extends TestCase
{
    /**
     * ä¸€ä¸ªåŸºæœ¬çš„æµ‹è¯•æ ·ä¾‹ã€‚
     *
     * @return void
     */
    public function testExample()
    {
        $this-&gt;assertTrue(true);
    }
}</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœè¦åœ¨ä½ çš„ç±»è‡ªå®šä¹‰è‡ªå·±çš„ <code>setUp</code> æ–¹æ³•ï¼Œè¯·ç¡®ä¿è°ƒç”¨äº† <code>parent::setUp</code>ã€‚</p>
</blockquote>
<p><a name="application-testing"></a></p>
<h2>æµ‹è¯•åº”ç”¨ç¨‹åº</h2>
<p>Laravel ä¸º HTTP è¯·æ±‚çš„ç”Ÿæˆå’Œå‘é€æ“ä½œã€è¾“å‡ºçš„æ£€æŸ¥ï¼Œç”šè‡³è¡¨å•çš„å¡«å†™éƒ½æä¾›äº†éå¸¸æµåˆ©çš„ APIã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥çœ‹çœ‹ <code>tests</code> ç›®å½•ä¸­çš„ <code>ExampleTest.php</code> æ–‡ä»¶ï¼š</p>
<pre><code>&lt;?php

use Illuminate\Foundation\Testing\WithoutMiddleware;
use Illuminate\Foundation\Testing\DatabaseTransactions;

class ExampleTest extends TestCase
{
    /**
     * ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½æµ‹è¯•æ ·ä¾‹ã€‚
     *
     * @return void
     */
    public function testBasicExample()
    {
        $this-&gt;visit('/')
             -&gt;see('Laravel 5')
             -&gt;dontSee('Rails');
    }
}</code></pre>
<p><code>visit</code> æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª <code>GET</code> è¯·æ±‚ï¼Œ<code>see</code> æ–¹æ³•åˆ™æ–­è¨€åœ¨è¿”å›çš„å“åº”ä¸­ä¼šæœ‰æŒ‡å®šçš„æ–‡æœ¬ï¼Œ<code>dontSee</code> æ–¹æ³•æ–­è¨€åœ¨è¿”å›çš„å“åº”ä¸­ä¸ä¼šæœ‰æŒ‡å®šçš„æ–‡æœ¬ã€‚è¿™æ˜¯ Laravel æ‰€æä¾›çš„æœ€åŸºæœ¬çš„åº”ç”¨ç¨‹åºæµ‹è¯•ã€‚</p>
<p><a name="interacting-with-your-application"></a></p>
<h3>ä¸ä½ çš„åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’</h3>
<p>å½“ç„¶ï¼Œé™¤äº†æ–­è¨€æ–‡æœ¬æ˜¯å¦å­˜åœ¨äºä¸€ä¸ªæŒ‡å®šçš„å“åº”ä¸­ï¼Œä½ è¿˜å¯ä»¥åšæ›´å¤šçš„äº¤äº’ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ç‚¹å‡»é“¾æ¥åŠå¡«å†™è¡¨å•çš„ä¾‹å­ï¼š</p>
<h4>ç‚¹å‡»é“¾æ¥</h4>
<p>åœ¨è¿™ä¸ªæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ä¼šç”Ÿæˆä¸€ä¸ªè¯·æ±‚å¹¶ã€Œç‚¹å‡»ã€è¿”å›å“åº”ä¸­çš„é“¾æ¥ï¼Œæ¥ç€æ–­è¨€æˆ‘ä»¬ä¼šåœç•™åœ¨æŒ‡å®šçš„ URI ä¸Šã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾åœ¨å“åº”ä¸­æœ‰ä¸ªé“¾æ¥ï¼Œå¹¶å†™ç€ã€ŒAbout Usã€ï¼š</p>
<pre><code>&lt;a href="/about-us"&gt;About Us&lt;/a&gt;</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•ï¼Œç‚¹å‡»é“¾æ¥å¹¶æ–­è¨€ç”¨æˆ·ä¼šåœç•™åœ¨æ­£ç¡®çš„é¡µé¢ï¼š</p>
<pre><code>public function testBasicExample()
{
    $this-&gt;visit('/')
         -&gt;click('About Us')
         -&gt;seePageIs('/about-us');
}</code></pre>
<h4>ä½¿ç”¨è¡¨å•</h4>
<p>Laravel è¿˜æä¾›äº†å‡ ç§ç”¨äºæµ‹è¯•è¡¨å•çš„æ–¹æ³•ã€‚é€šè¿‡ <code>type</code>ã€<code>select</code>ã€<code>check</code>ã€<code>attach</code> åŠ <code>press</code> æ–¹æ³•è®©ä½ ä¸è¡¨å•çš„æ‰€æœ‰è¾“å…¥æ¡†è¿›è¡Œäº¤äº’ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬æƒ³åƒä¸€ä¸‹æœ‰ä¸ªåœ¨åº”ç”¨ç¨‹åºæ³¨å†Œé¡µé¢çš„è¡¨å•ï¼š</p>
<pre><code>&lt;form action="/register" method="POST"&gt;
    {!! csrf_field() !!}

    &lt;div&gt;
        Name: &lt;input type="text" name="name"&gt;
    &lt;/div&gt;

    &lt;div&gt;
        &lt;input type="checkbox" value="yes" name="terms"&gt; Accept Terms
    &lt;/div&gt;

    &lt;div&gt;
        &lt;input type="submit" value="Register"&gt;
    &lt;/div&gt;
&lt;/form&gt;</code></pre>
<p>æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•æ¥å¡«å†™æ­¤è¡¨å•ï¼Œå¹¶æ£€æŸ¥ç»“æœï¼š</p>
<pre><code>public function testNewUserRegistration()
{
    $this-&gt;visit('/register')
         -&gt;type('Taylor', 'name')
         -&gt;check('terms')
         -&gt;press('Register')
         -&gt;seePageIs('/dashboard');
}</code></pre>
<p>å½“ç„¶ï¼Œå¦‚æœä½ çš„è¡¨å•ä¸­åŒ…å«äº†ç±»ä¼¼å•é€‰æ¡†æˆ–ä¸‹æ‹‰å¼èœå•çš„å…¶å®ƒè¾“å…¥æ¡†ï¼Œä¹Ÿå¯ä»¥å¾ˆè½»æ¾çš„å¡«å…¥è¿™äº›ç±»å‹çš„åŒºåŸŸã€‚ä»¥ä¸‹æ˜¯æ¯ä¸ªè¡¨å•çš„æ–¹æ³•æ“ä½œåˆ—è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$this-&gt;type($text, $elementName)</code></td>
<td>ã€Œè¾“å…¥ï¼ˆtypeï¼‰ã€æ–‡æœ¬åœ¨ä¸€ä¸ªæŒ‡å®šçš„åŒºåŸŸ</td>
</tr>
<tr>
<td><code>$this-&gt;select($value, $elementName)</code></td>
<td>ã€Œé€‰æ‹©ï¼ˆselectï¼‰ã€ä¸€ä¸ªå•é€‰æ¡†æˆ–ä¸‹æ‹‰å¼èœå•çš„åŒºåŸŸ</td>
</tr>
<tr>
<td><code>$this-&gt;check($elementName)</code></td>
<td>ã€Œå‹¾é€‰ï¼ˆCheckï¼‰ã€ä¸€ä¸ªå¤é€‰æ¡†çš„åŒºåŸŸ</td>
</tr>
<tr>
<td><code>$this-&gt;attach($pathToFile, $elementName)</code></td>
<td>ã€Œé™„åŠ ï¼ˆAttachï¼‰ã€ä¸€ä¸ªæ–‡ä»¶è‡³è¡¨å•</td>
</tr>
<tr>
<td><code>$this-&gt;press($buttonTextOrElementName)</code></td>
<td>ã€ŒæŒ‰ä¸‹ï¼ˆPressï¼‰ã€ä¸€ä¸ªæŒ‡å®šæ–‡æœ¬æˆ–åç§°çš„æŒ‰é’®</td>
</tr>
</tbody>
</table>
<h4>ä½¿ç”¨é™„ä»¶</h4>
<p>å¦‚æœä½ çš„è¡¨å•åŒ…å« <code>file</code> çš„è¾“å…¥æ¡†ç±»å‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>attach</code> æ–¹æ³•æ¥é™„åŠ æ–‡ä»¶ï¼š</p>
<pre><code>public function testPhotoCanBeUploaded()
{
    $this-&gt;visit('/upload')
         -&gt;name('File Name', 'name')
         -&gt;attach($absolutePathToFile, 'photo')
         -&gt;press('Upload')
         -&gt;see('Upload Successful!');
}</code></pre>
<p><a name="testing-json-apis"></a></p>
<h3>æµ‹è¯• JSON APIs</h3>
<p>Laravel ä¹Ÿæä¾›äº†å‡ ä¸ªè¾…åŠ©å‡½æ•°æ¥æµ‹è¯• JSON API åŠå…¶å“åº”ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>get</code>ã€<code>post</code>ã€<code>put</code>ã€<code>patch</code> åŠ <code>delete</code> æ–¹æ³•å¯ä»¥ç”¨äºå‘å‡ºå„ç§ HTTP åŠ¨ä½œçš„è¯·æ±‚ã€‚ä½ ä¹Ÿå¯ä»¥è½»æ¾çš„ä¼ å…¥æ•°æ®æˆ–æ ‡å¤´åˆ°è¿™äº›æ–¹æ³•ä¸Šã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•ï¼Œå°† <code>POST</code> è¯·æ±‚å‘é€è‡³ <code>/user</code> ï¼Œå¹¶æ–­è¨€å…¶ä¼šè¿”å› JSON æ ¼å¼çš„æŒ‡å®šæ•°ç»„ï¼š</p>
<pre><code>&lt;?php

class ExampleTest extends TestCase
{
    /**
     * ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½æµ‹è¯•ç¤ºä¾‹ã€‚
     *
     * @return void
     */
    public function testBasicExample()
    {
        $this-&gt;post('/user', ['name' =&gt; 'Sally'])
             -&gt;seeJson([
                 'created' =&gt; true,
             ]);
    }
}</code></pre>
<p><code>seeJson</code> æ–¹æ³•ä¼šå°†ä¼ å…¥çš„æ•°ç»„è½¬æ¢æˆ JSONï¼Œå¹¶éªŒè¯è¯¥ JSON ç‰‡æ®µæ˜¯å¦å­˜åœ¨äºåº”ç”¨ç¨‹åºè¿”å›çš„ JSON å“åº”ä¸­çš„<strong>ä»»ä½•ä½ç½®</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿æœ‰å…¶å®ƒçš„å±æ€§å­˜åœ¨äºè¯¥ JSON å“åº”ä¸­ï¼Œä½†æ˜¯åªè¦æŒ‡å®šçš„ç‰‡æ®µå­˜åœ¨ï¼Œæ­¤æµ‹è¯•ä¾¿ä¼šé€šè¿‡ã€‚</p>
<h4>éªŒè¯å®Œå…¨åŒ¹é…çš„ JSON</h4>
<p>å¦‚æœä½ æƒ³éªŒè¯ä¼ å…¥çš„æ•°ç»„æ˜¯å¦ä¸åº”ç”¨ç¨‹åºè¿”å›çš„ JSON <strong>å®Œå…¨</strong>åŒ¹é…ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>seeJsonEquals</code> æ–¹æ³•ï¼š</p>
<pre><code>&lt;?php

class ExampleTest extends TestCase
{
    /**
     * ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½æµ‹è¯•ç¤ºä¾‹ã€‚
     *
     * @return void
     */
    public function testBasicExample()
    {
        $this-&gt;post('/user', ['name' =&gt; 'Sally'])
             -&gt;seeJsonEquals([
                 'created' =&gt; true,
             ]);
    }
}</code></pre>
<p><a name="sessions-and-authentication"></a></p>
<h3>Sessions å’Œè®¤è¯</h3>
<p>Laravel æä¾›äº†å‡ ä¸ªå¯åœ¨æµ‹è¯•æ—¶ä½¿ç”¨ Session çš„è¾…åŠ©å‡½æ•°ã€‚é¦–å…ˆï¼Œä½ éœ€è¦è®¾ç½® Session æ•°æ®è‡³æŒ‡å®šçš„æ•°ç»„ä¸­ï¼Œå¹¶ä½¿ç”¨ <code>withSession</code> æ–¹æ³•ã€‚åœ¨åº”ç”¨ç¨‹åºçš„æµ‹è¯•è¯·æ±‚å‘é€ä¹‹å‰ï¼Œå¯å…ˆç»™æ•°æ®åŠ è½½ sessionï¼š</p>
<pre><code>&lt;?php

class ExampleTest extends TestCase
{
    public function testApplication()
    {
        $this-&gt;withSession(['foo' =&gt; 'bar'])
             -&gt;visit('/');
    }
}</code></pre>
<p>å½“ç„¶ï¼Œä¸€èˆ¬ä½¿ç”¨ Session æ—¶éƒ½æ˜¯ç”¨äºç»´æŒç”¨æˆ·çš„çŠ¶æ€ï¼Œå¦‚è®¤è¯ç”¨æˆ·ã€‚<code>actingAs</code> è¾…åŠ©å‡½æ•°æä¾›äº†ç®€å•çš„æ–¹å¼æ¥è®©æŒ‡å®šçš„ç”¨æˆ·è®¤è¯ä¸ºå½“å‰çš„ç”¨æˆ·ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="#model-factories">æ¨¡å‹å·¥å‚</a>æ¥ç”Ÿæˆå¹¶è®¤è¯ç”¨æˆ·ï¼š</p>
<pre><code>&lt;?php

class ExampleTest extends TestCase
{
    public function testApplication()
    {
        $user = factory(App\User::class)-&gt;create();

        $this-&gt;actingAs($user)
             -&gt;withSession(['foo' =&gt; 'bar'])
             -&gt;visit('/')
             -&gt;see('Hello, '.$user-&gt;name);
    }
}</code></pre>
<p><a name="disabling-middleware"></a></p>
<h3>åœç”¨ä¸­é—´ä»¶</h3>
<p>æµ‹è¯•åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ ä¼šå‘ç°ï¼Œåœ¨æŸäº›æµ‹è¯•ä¸­åœç”¨<a href="middleware.htm" tppabs="http://laravel-china.org/docs/5.1/middleware">ä¸­é—´ä»¶</a>æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚è¿™è®©ä½ å¯ä»¥éš”ç¦»ä»»ä½•ä¸­é—´ä»¶çš„æ‰€æœ‰å½±å“ï¼Œä»¥ä¾¿æ›´å¥½çš„æµ‹è¯•è·¯ç”±åŠæ§åˆ¶å™¨ã€‚Laravel åŒ…å«äº†ä¸€ä¸ªç®€æ´çš„ <code>WithoutMiddleware</code> traitï¼Œä½ èƒ½åœ¨æµ‹è¯•ç±»ä¸­ä½¿ç”¨å®ƒæ¥è‡ªåŠ¨åœç”¨æ‰€æœ‰çš„ä¸­é—´ä»¶ï¼š</p>
<pre><code>&lt;?php

use Illuminate\Foundation\Testing\WithoutMiddleware;
use Illuminate\Foundation\Testing\DatabaseTransactions;

class ExampleTest extends TestCase
{
    use WithoutMiddleware;

    //
}</code></pre>
<p>å¦‚æœä½ åªæƒ³è¦åœ¨æŸå‡ ä¸ªæµ‹è¯•æ–¹æ³•ä¸­åœç”¨ä¸­é—´ä»¶ï¼Œåˆ™å¯ä»¥åœ¨æµ‹è¯•æ–¹æ³•ä¸­è°ƒç”¨ <code>withoutMiddleware</code> æ–¹æ³•ï¼š</p>
<pre><code>&lt;?php

class ExampleTest extends TestCase
{
    /**
     * ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½æµ‹è¯•ç¤ºä¾‹ã€‚
     *
     * @return void
     */
    public function testBasicExample()
    {
        $this-&gt;withoutMiddleware();

        $this-&gt;visit('/')
             -&gt;see('Laravel 5');
    }
}</code></pre>
<p><a name="custom-http-requests"></a></p>
<h3>è‡ªå®šä¹‰ HTTP è¯·æ±‚</h3>
<p>å¦‚æœä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ HTTP è¯·æ±‚åˆ°åº”ç”¨ç¨‹åºä¸Šï¼Œå¹¶è·å–å®Œæ•´çš„ <code>Illuminate\Http\Response</code> å¯¹è±¡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>call</code> æ–¹æ³•ï¼š</p>
<pre><code>public function testApplication()
{
    $response = $this-&gt;call('GET', '/');

    $this-&gt;assertEquals(200, $response-&gt;status());
}</code></pre>
<p>å¦‚æœä½ åˆ›å»ºçš„æ˜¯ <code>POST</code>ã€<code>PUT</code>ã€æˆ–æ˜¯ <code>PATCH</code> è¯·æ±‚ï¼Œåˆ™å¯ä»¥åœ¨è¯·æ±‚æ—¶ä¼ å…¥ä¸€ä¸ªæ•°ç»„ä½œä¸ºè¾“å…¥æ•°æ®ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è·¯ç”±åŠæ§åˆ¶å™¨ä¸­é€šè¿‡<a href="requests.htm" tppabs="http://laravel-china.org/docs/5.1/requests">è¯·æ±‚å®ä¾‹</a>å–ç”¨è¿™äº›æ•°æ®ï¼š</p>
<pre><code>   $response = $this-&gt;call('POST', '/user', ['name' =&gt; 'Taylor']);</code></pre>
<p><a name="phpunit-assertions"></a></p>
<h3>PHPUnit æ–­è¨€</h3>
<p>Laravel ä¸º <a href="javascript:if(confirm('https://phpunit.de/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://phpunit.de/'" tppabs="https://phpunit.de/">PHPUnit</a> æµ‹è¯•æä¾›äº†ä¸€äº›é¢å¤–çš„æ–­è¨€æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-&gt;assertResponseOk();</code></td>
<td>æ–­è¨€å®¢æˆ·ç«¯çš„å“åº”æ‹¥æœ‰ OK çŠ¶æ€ç ã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertResponseStatus($code);</code></td>
<td>æ–­è¨€å®¢æˆ·ç«¯çš„å“åº”æ‹¥æœ‰æŒ‡å®šçš„çŠ¶æ€ç ã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertViewHas($key, $value = null);</code></td>
<td>æ–­è¨€å“åº”è§†å›¾æ‹¥æœ‰æŒ‡å®šçš„éƒ¨åˆ†ç»‘å®šæ•°æ®ã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertViewHasAll(array $bindings);</code></td>
<td>æ–­è¨€å“åº”è§†å›¾æ‹¥æœ‰æŒ‡å®šçš„ç»‘å®šæ•°æ®åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertViewMissing($key);</code></td>
<td>æ–­è¨€å“åº”è§†å›¾ä¸åŒ…å«æŒ‡å®šçš„éƒ¨åˆ†ç»‘å®šæ•°æ®ã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertRedirectedTo($uri, $with = []);</code></td>
<td>æ–­è¨€å®¢æˆ·ç«¯æ˜¯å¦è¢«é‡å®šå‘è‡³æŒ‡å®šçš„ URIã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertRedirectedToRoute($name, $parameters = [], $with = []);</code></td>
<td>æ–­è¨€å®¢æˆ·ç«¯æ˜¯å¦è¢«é‡å®šå‘åˆ°æŒ‡å®šçš„è·¯ç”±ã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertRedirectedToAction($name, $parameters = [], $with = []);</code></td>
<td>æ–­è¨€å®¢æˆ·ç«¯æ˜¯å¦è¢«é‡å®šå‘åˆ°æŒ‡å®šçš„è¡Œä¸ºã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertSessionHas($key, $value = null);</code></td>
<td>æ–­è¨€ session ä¸­æœ‰æŒ‡å®šçš„å€¼ã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertSessionHasAll(array $bindings);</code></td>
<td>æ–­è¨€ session ä¸­æœ‰æŒ‡å®šçš„åˆ—è¡¨å€¼ã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertSessionHasErrors($bindings = [], $format = null);</code></td>
<td>æ–­è¨€ session æœ‰é”™è¯¯çš„ç»‘å®šã€‚</td>
</tr>
<tr>
<td><code>-&gt;assertHasOldInput();</code></td>
<td>æ–­è¨€ session æœ‰æ—§çš„è¾“å…¥æ•°æ®ã€‚</td>
</tr>
</tbody>
</table>
<p><a name="working-with-databases"></a></p>
<h2>ä½¿ç”¨æ•°æ®åº“</h2>
<p>Laravel ä¹Ÿæä¾›äº†å¤šç§æœ‰ç”¨çš„å·¥å…·æ¥è®©ä½ æ›´å®¹æ˜“çš„æµ‹è¯•ä½¿ç”¨æ•°æ®åº“çš„åº”ç”¨ç¨‹åºã€‚é¦–å…ˆï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>seeInDatabase</code> è¾…åŠ©å‡½æ•°ï¼Œæ¥æ–­è¨€æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨ä¸æŒ‡å®šæ¡ä»¶äº’ç›¸åŒ¹é…çš„æ•°æ®ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³éªŒè¯ <code>users</code> æ•°æ®è¡¨ä¸­æ˜¯å¦å­˜åœ¨ <code>email</code> å€¼ä¸º <code>sally@example.com</code> çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä»¥ä¸‹çš„æ–¹å¼æ¥åšæµ‹è¯•ï¼š</p>
<pre><code>public function testDatabase()
{
    // åˆ›å»ºè°ƒç”¨è‡³åº”ç”¨ç¨‹åº...

    $this-&gt;seeInDatabase('users', ['email' =&gt; 'sally@example.com']);
}</code></pre>
<p>å½“ç„¶ï¼Œä½¿ç”¨ <code>seeInDatabase</code> æ–¹æ³•åŠå…¶å®ƒçš„è¾…åŠ©å‡½æ•°åªæ˜¯ä¸ºäº†æ–¹ä¾¿ã€‚ä½ ä¹Ÿå¯ä»¥éšæ„ä½¿ç”¨ PHPUnit å†…ç½®çš„æ‰€æœ‰æ–­è¨€æ–¹æ³•æ¥æ‰©å……æµ‹è¯•ã€‚</p>
<p><a name="resetting-the-database-after-each-test"></a></p>
<h3>æ¯æ¬¡æµ‹è¯•ç»“æŸåé‡ç½®æ•°æ®åº“</h3>
<p>åœ¨æ¯æ¬¡æµ‹è¯•ç»“æŸåéƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œé‡ç½®ï¼Œè¿™æ ·å‰é¢çš„æµ‹è¯•æ•°æ®å°±ä¸ä¼šå¹²æ‰°åˆ°åé¢çš„æµ‹è¯•ã€‚</p>
<h4>ä½¿ç”¨è¿ç§»</h4>
<p>å…¶ä¸­æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯åœ¨æ¯æ¬¡æµ‹è¯•åéƒ½è¿˜åŸæ•°æ®åº“ï¼Œå¹¶åœ¨ä¸‹æ¬¡æµ‹è¯•å‰è¿è¡Œè¿ç§»ã€‚Laravel æä¾›äº†ç®€æ´çš„ <code>DatabaseMigrations</code> traitï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ å¤„ç†å¥½è¿™äº›æ“ä½œã€‚ä½ åªéœ€åœ¨æµ‹è¯•ç±»ä¸­ä½¿ç”¨æ­¤ trait å³å¯ï¼š</p>
<pre><code>&lt;?php

use Illuminate\Foundation\Testing\WithoutMiddleware;
use Illuminate\Foundation\Testing\DatabaseMigrations;
use Illuminate\Foundation\Testing\DatabaseTransactions;

class ExampleTest extends TestCase
{
    use DatabaseMigrations;

    /**
     * ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½æµ‹è¯•ç¤ºä¾‹ã€‚
     *
     * @return void
     */
    public function testBasicExample()
    {
        $this-&gt;visit('/')
             -&gt;see('Laravel 5');
    }
}</code></pre>
<h4>ä½¿ç”¨äº‹åŠ¡</h4>
<p>å¦ä¸€ä¸ªæ–¹å¼ï¼Œå°±æ˜¯å°†æ¯ä¸ªæµ‹è¯•æ¡ˆä¾‹éƒ½åŒ…å«åœ¨æ•°æ®åº“äº‹åŠ¡ä¸­ã€‚Laravel æä¾›äº†ä¸€ä¸ªç®€æ´çš„ <code>DatabaseTransactions</code> trait æ¥è‡ªåŠ¨å¸®ä½ å¤„ç†å¥½è¿™äº›æ“ä½œï¼š</p>
<pre><code>&lt;?php

use Illuminate\Foundation\Testing\WithoutMiddleware;
use Illuminate\Foundation\Testing\DatabaseMigrations;
use Illuminate\Foundation\Testing\DatabaseTransactions;

class ExampleTest extends TestCase
{
    use DatabaseTransactions;

    /**
     * ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½æµ‹è¯•ç¤ºä¾‹ã€‚
     *
     * @return void
     */
    public function testBasicExample()
    {
        $this-&gt;visit('/')
             -&gt;see('Laravel 5');
    }
}</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong>æ­¤ trait çš„äº‹åŠ¡åªåŒ…å«é»˜è®¤çš„æ•°æ®åº“è¿æ¥ã€‚</p>
</blockquote>
<p><a name="model-factories"></a></p>
<h3>æ¨¡å‹å·¥å‚</h3>
<p>æµ‹è¯•æ—¶ï¼Œå¸¸å¸¸éœ€è¦åœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰å†™å…¥ä¸€äº›æ•°æ®åˆ°æ•°æ®åº“ä¸­ã€‚åˆ›å»ºæµ‹è¯•æ•°æ®æ—¶ï¼Œé™¤äº†æ‰‹åŠ¨çš„æ¥è®¾ç½®æ¯ä¸ªå­—æ®µçš„å€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <a href="eloquent.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent">Eloquent æ¨¡å‹</a>çš„ã€Œå·¥å‚ã€æ¥è®¾ç½®æ¯ä¸ªå±æ€§çš„é»˜è®¤å€¼ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ å¯ä»¥å…ˆæŸ¥çœ‹ä¸‹åº”ç”¨ç¨‹åºçš„ <code>database/factories/ModelFactory.php</code> æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶åŒ…å«ä¸€ä¸ªç°æˆçš„å·¥å‚å®šä¹‰ï¼š</p>
<pre><code>$factory-&gt;define(App\User::class, function (Faker\Generator $faker) {
    return [
        'name' =&gt; $faker-&gt;name,
        'email' =&gt; $faker-&gt;email,
        'password' =&gt; bcrypt(str_random(10)),
        'remember_token' =&gt; str_random(10),
    ];
});</code></pre>
<p>é—­åŒ…å†…ä¸ºå·¥å‚çš„å®šä¹‰ï¼Œä½ å¯ä»¥è¿”å›æ¨¡å‹ä¸­æ‰€æœ‰å±æ€§çš„é»˜è®¤æµ‹è¯•å€¼ã€‚åœ¨è¯¥é—­åŒ…å†…ä¼šæ¥æ”¶åˆ° <a href="javascript:if(confirm('https://github.com/fzaninotto/Faker  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://github.com/fzaninotto/Faker'" tppabs="https://github.com/fzaninotto/Faker">Faker</a> PHP å‡½æ•°åº“çš„å®ä¾‹ï¼Œå®ƒå¯ä»¥è®©ä½ å¾ˆæ–¹ä¾¿çš„ç”Ÿæˆå„ç§éšæœºæ•°æ®ä»¥è¿›è¡Œæµ‹è¯•ã€‚</p>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥éšæ„å°†è‡ªå·±é¢å¤–çš„å·¥å‚å¢åŠ è‡³ <code>ModelFactory.php</code> æ–‡ä»¶ã€‚</p>
<h4>å¤šä¸ªå·¥å‚ç±»å‹</h4>
<p>æœ‰æ—¶ä½ å¯èƒ½å¸Œæœ›é’ˆå¯¹åŒä¸€ä¸ª Eloquent æ¨¡å‹ç±»æ¥åˆ›å»ºå¤šä¸ªå·¥å‚ã€‚ä¾‹å¦‚ï¼Œé™¤äº†ä¸€èˆ¬ç”¨æˆ·çš„å·¥å‚ä¹‹å¤–ï¼Œè¿˜æœ‰ã€Œç®¡ç†å‘˜ã€å·¥å‚ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>defineAs</code> æ–¹æ³•æ¥å®šä¹‰è¿™ä¸ªå·¥å‚ï¼š</p>
<pre><code>$factory-&gt;defineAs(App\User::class, 'admin', function ($faker) {
    return [
        'name' =&gt; $faker-&gt;name,
        'email' =&gt; $faker-&gt;email,
        'password' =&gt; str_random(10),
        'remember_token' =&gt; str_random(10),
        'admin' =&gt; true,
    ];
});</code></pre>
<p>é™¤äº†ä»ä¸€èˆ¬ç”¨æˆ·å·¥å‚å¤åˆ¶æ‰€æœ‰åŸºæœ¬å±æ€§ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>raw</code> æ–¹æ³•æ¥è·å–æ‰€æœ‰åŸºæœ¬å±æ€§ã€‚ä¸€æ—¦ä½ è·å–åˆ°è¿™äº›å±æ€§ï¼Œå°±å¯ä»¥è½»æ¾çš„ä¸ºå…¶å¢åŠ ä»»ä½•é¢å¤–å€¼ï¼š</p>
<pre><code>$factory-&gt;defineAs(App\User::class, 'admin', function ($faker) use ($factory) {
    $user = $factory-&gt;raw(App\User::class);

    return array_merge($user, ['admin' =&gt; true]);
});</code></pre>
<h4>åœ¨æµ‹è¯•ä¸­ä½¿ç”¨å·¥å‚</h4>
<p>åœ¨å·¥å‚å®šä¹‰åï¼Œå°±å¯ä»¥åœ¨æµ‹è¯•æˆ–æ˜¯æ•°æ®åº“çš„å¡«å……æ–‡ä»¶ä¸­ï¼Œé€šè¿‡å…¨å±€çš„ <code>factory</code> å‡½æ•°æ¥ç”Ÿæˆæ¨¡å‹å®ä¾‹ã€‚æ¥ç€è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å‡ ä¸ªåˆ›å»ºæ¨¡å‹çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬ä¼šä½¿ç”¨ <code>make</code> æ–¹æ³•åˆ›å»ºæ¨¡å‹ï¼Œä½†ä¸å°†å®ƒä»¬ä¿å­˜è‡³æ•°æ®åº“ï¼š</p>
<pre><code>public function testDatabase()
{
    $user = factory(App\User::class)-&gt;make();

    // åœ¨æµ‹è¯•ä¸­ä½¿ç”¨æ¨¡å‹...
}</code></pre>
<p>å¦‚æœä½ æƒ³é‡å†™æ¨¡å‹ä¸­çš„æŸäº›é»˜è®¤å€¼ï¼Œåˆ™å¯ä»¥ä¼ é€’ä¸€ä¸ªåŒ…å«æ•°å€¼çš„æ•°ç»„è‡³ <code>make</code> æ–¹æ³•ã€‚åªæœ‰æŒ‡å®šçš„æ•°å€¼ä¼šè¢«æ›¿æ¢ï¼Œå…¶å®ƒå‰©ä½™çš„æ•°å€¼åˆ™ä¼šæŒ‰ç…§å·¥å‚æŒ‡å®šçš„é»˜è®¤å€¼æ¥è®¾ç½®ï¼š</p>
<pre><code>$user = factory(App\User::class)-&gt;make([
    'name' =&gt; 'Abigail',
   ]);</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªå«æœ‰å¤šä¸ªæ¨¡å‹çš„é›†åˆï¼Œæˆ–åˆ›å»ºä¸€ä¸ªæŒ‡å®šç±»å‹çš„æ¨¡å‹ï¼š</p>
<pre><code>// åˆ›å»ºä¸‰ä¸ª App\User å®ä¾‹...
$users = factory(App\User::class, 3)-&gt;make();

// åˆ›å»ºä¸€ä¸ª App\Userã€Œç®¡ç†å‘˜ã€å®ä¾‹...
$user = factory(App\User::class, 'admin')-&gt;make();

// åˆ›å»ºä¸‰ä¸ª App\Userã€Œç®¡ç†å‘˜ã€å®ä¾‹...
$users = factory(App\User::class, 'admin', 3)-&gt;make();</code></pre>
<h4>ä¿å­˜å·¥å‚æ¨¡å‹</h4>
<p>ä½ ä¸ä»…å¯ä½¿ç”¨ <code>create</code> æ–¹æ³•æ¥åˆ›å»ºæ¨¡å‹å®ä¾‹ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥ä½¿ç”¨ Eloquent çš„ <code>save</code> æ–¹æ³•æ¥å°†å®ƒä»¬ä¿å­˜è‡³æ•°æ®åº“ï¼š</p>
<pre><code>public function testDatabase()
{
    $user = factory(App\User::class)-&gt;create();

    // åœ¨æµ‹è¯•ä¸­ä½¿ç”¨æ¨¡å‹...
}</code></pre>
<p>åŒæ ·çš„ï¼Œä½ å¯ä»¥åœ¨æ•°ç»„ä¼ é€’è‡³ <code>create</code> æ–¹æ³•æ—¶é‡å†™æ¨¡å‹çš„å±æ€§ï¼š</p>
<pre><code>$user = factory(App\User::class)-&gt;create([
    'name' =&gt; 'Abigail',
   ]);</code></pre>
<h4>å¢åŠ å…³è”è‡³æ¨¡å‹</h4>
<p>ä½ ç”šè‡³å¯ä»¥ä¿å­˜å¤šä¸ªæ¨¡å‹åˆ°æ•°æ®åº“ä¸Šã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šå¢åŠ å…³è”è‡³æˆ‘ä»¬æ‰€åˆ›å»ºçš„æ¨¡å‹ã€‚å½“ä½¿ç”¨ <code>create</code> æ–¹æ³•åˆ›å»ºå¤šä¸ªæ¨¡å‹æ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª Eloquent <a href="eloquent-collections.htm" tppabs="http://laravel-china.org/docs/5.1/eloquent-collections">é›†åˆå®ä¾‹</a>ï¼Œè®©ä½ èƒ½å¤Ÿä½¿ç”¨é›†åˆæ‰€æä¾›çš„ä¾¿åˆ©å‡½æ•°ï¼Œåƒæ˜¯ <code>each</code>ï¼š</p>
<pre><code>$users = factory(App\User::class, 3)
           -&gt;create()
           -&gt;each(function($u) {
                $u-&gt;posts()-&gt;save(factory(App\Post::class)-&gt;make());
            });</code></pre>
<p><a name="mocking"></a></p>
<h2>æ¨¡æ‹Ÿ</h2>
<p><a name="mocking-events"></a></p>
<h3>æ¨¡æ‹Ÿäº‹ä»¶</h3>
<p>å¦‚æœä½ æ­£åœ¨é¢‘ç¹åœ°ä½¿ç”¨ Laravel çš„äº‹ä»¶ç³»ç»Ÿï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨æµ‹è¯•æ—¶åœæ­¢æˆ–æ˜¯æ¨¡æ‹ŸæŸäº›äº‹ä»¶ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ æ­£åœ¨æµ‹è¯•ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ï¼Œä½ å¯èƒ½ä¸å¸Œæœ›æ‰€æœ‰ <code>UserRegistered</code> äº‹ä»¶çš„å¤„ç†è¿›ç¨‹éƒ½è¢«è¿è¡Œï¼Œå› ä¸ºå®ƒä»¬ä¼šè§¦å‘ã€Œæ¬¢è¿ã€é‚®ä»¶çš„å‘é€ã€‚</p>
<p>Laravel æä¾›äº†ç®€æ´çš„ <code>expectsEvents</code> æ–¹æ³•ï¼Œä»¥éªŒè¯é¢„æœŸçš„äº‹ä»¶æœ‰è¢«è¿è¡Œï¼Œå¯é˜²æ­¢è¯¥äº‹ä»¶çš„ä»»ä½•å¤„ç†è¿›ç¨‹è¢«è¿è¡Œï¼š</p>
<pre><code>&lt;?php

class ExampleTest extends TestCase
{
    public function testUserRegistration()
    {
        $this-&gt;expectsEvents(App\Events\UserRegistered::class);

        // æµ‹è¯•ç”¨æˆ·æ³¨å†Œçš„ä»£ç ...
    }
}</code></pre>
<p>å¦‚æœä½ å¸Œæœ›é˜²æ­¢æ‰€æœ‰äº‹ä»¶çš„å¤„ç†è¿›ç¨‹è¢«è¿è¡Œï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>withoutEvents</code> æ–¹æ³•ï¼š</p>
<pre><code>&lt;?php

class ExampleTest extends TestCase
{
    public function testUserRegistration()
    {
        $this-&gt;withoutEvents();

        // æµ‹è¯•ç”¨æˆ·æ³¨å†Œçš„ä»£ç ...
    }
}</code></pre>
<p><a name="mocking-jobs"></a></p>
<h3>æ¨¡æ‹Ÿä»»åŠ¡</h3>
<p>æœ‰æ—¶ä½ å¯èƒ½å¸Œæœ›å½“è¯·æ±‚å‘é€è‡³åº”ç”¨ç¨‹åºæ—¶ï¼Œç®€å•çš„å¯¹æ§åˆ¶å™¨æ‰€æ´¾é€çš„ä»»åŠ¡è¿›è¡Œæµ‹è¯•ã€‚è¿™ä¹ˆåšèƒ½å¤Ÿè®©ä½ éš”ç¦»æµ‹è¯•è·¯ç”±æˆ–æ§åˆ¶å™¨ï¼Œè®¾ç½®é™¤äº†ä»»åŠ¡ä»¥å¤–çš„é€»è¾‘ã€‚å½“ç„¶ï¼Œåœ¨æ­¤ä¹‹åä½ ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬çš„æµ‹è¯•æ¡ˆä¾‹ä¸­æ¥æµ‹è¯•è¯¥ä»»åŠ¡ã€‚</p>
<p>Laravel æä¾›äº†ä¸€ä¸ªç®€æ´çš„ <code>expectsJobs</code> æ–¹æ³•ï¼Œä»¥éªŒè¯é¢„æœŸçš„ä»»åŠ¡æœ‰è¢«æ´¾é€ï¼Œä½†ä»»åŠ¡æœ¬èº«ä¸ä¼šè¢«è¿è¡Œï¼š</p>
<pre><code>&lt;?php

class ExampleTest extends TestCase
{
    public function testPurchasePodcast()
    {
        $this-&gt;expectsJobs(App\Jobs\PurchasePodcast::class);

        // æµ‹è¯•è´­ä¹° podcast çš„ä»£ç ...
    }
}</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> æ­¤æ–¹æ³•åªæ£€æµ‹ <code>DispatchesJobs</code> trait çš„æ´¾é€æ–¹æ³•æ‰€æ´¾é€å‡ºçš„ä»»åŠ¡ã€‚å®ƒå¹¶ä¸ä¼šæ£€æµ‹ç›´æ¥å‘é€åˆ° <code>Queue::push</code> çš„ä»»åŠ¡ã€‚</p>
</blockquote>
<p><a name="mocking-facades"></a></p>
<h3>æ¨¡æ‹Ÿ Facades</h3>
<p>æµ‹è¯•æ—¶ï¼Œä½ å¯èƒ½æ—¶å¸¸éœ€è¦æ¨¡æ‹Ÿè°ƒç”¨ä¸€ä¸ª Laravel <a href="facades.htm" tppabs="http://laravel-china.org/docs/5.1/facades">facade</a>ã€‚å¯å‚è€ƒä¸‹æ–¹çš„æ§åˆ¶å™¨è¡Œä¸ºï¼š</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use Cache;
use Illuminate\Routing\Controller;

class UserController extends Controller
{
    /**
     * æ˜¾ç¤ºåº”ç”¨ç¨‹åºæ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨ã€‚
     *
     * @return Response
     */
    public function index()
    {
        $value = Cache::get('key');

        //
    }
}</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>shouldReceive</code> æ–¹æ³•æ¨¡æ‹Ÿè°ƒç”¨ <code>Cache</code> facadeï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª <a href="javascript:if(confirm('https://github.com/padraic/mockery  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://github.com/padraic/mockery'" tppabs="https://github.com/padraic/mockery">Mockery</a> æ¨¡æ‹Ÿçš„å®ä¾‹ã€‚å› ä¸º facades å®é™…ä¸Šå·²ç»è¢« Laravel çš„<a href="container.htm" tppabs="http://laravel-china.org/docs/5.1/container">æœåŠ¡å®¹å™¨</a>è§£å†³å¹¶ç®¡ç†ç€ï¼Œå®ƒä»¬æ¯”èµ·ä¸€èˆ¬çš„é™æ€ç±»æ›´æœ‰å¯æµ‹æ€§ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬æ¥æ¨¡æ‹Ÿè°ƒç”¨ <code>Cache</code> facadeï¼š</p>
<pre><code>&lt;?php

class FooTest extends TestCase
{
    public function testGetIndex()
    {
        Cache::shouldReceive('get')
                    -&gt;once()
                    -&gt;with('key')
                    -&gt;andReturn('value');

        $this-&gt;visit('/users')-&gt;see('value');
    }
}</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> ä½ ä¸åº”è¯¥æ¨¡æ‹Ÿ <code>Request</code> facadeã€‚åº”è¯¥åœ¨æµ‹è¯•æ—¶ä½¿ç”¨å¦‚ <code>call</code> åŠ <code>post</code> è¿™æ ·çš„ HTTP è¾…åŠ©å‡½æ•°æ¥ä¼ é€’ä½ æƒ³è¦çš„æ•°æ®ã€‚</p>
</blockquote>
		</div>

		<div class="main-footer" style="border-top:1px dashed rgba(0, 0, 0, 0.1);padding-top: 30px;margin-top:30px;margin-bottom: 20px;">
			<div class="prev-next-wrap clearfix">

									<a class="btn btn-default pull-left" href="scheduling.htm" tppabs="http://laravel-china.org/docs/5.1/scheduling"><i class="fa fa-arrow-left"></i> ä»»åŠ¡è°ƒåº¦</a>
				
			    &nbsp;
								    <a class="btn btn-default pull-right" href="validation.htm" tppabs="http://laravel-china.org/docs/5.1/validation">è¡¨å•éªŒè¯ <i class="fa fa-arrow-right"></i></a>
							</div>
		</div>

	</article>
</div>

		<footer class="main">
			<ul>
				<li class="nav-docs"><a href="javascript:if(confirm('http://laravel-china.org/docs  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://laravel-china.org/docs'" tppabs="http://laravel-china.org/docs">æ–‡æ¡£</a></li>
<li class="nav-laracasts"><a href="javascript:if(confirm('https://laracasts.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://laracasts.com/'" tppabs="https://laracasts.com/" target="_blank">Laracasts</a></li>
<li class="nav-docs"><a href="javascript:if(confirm('http://lumen.laravel-china.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://lumen.laravel-china.org/'" tppabs="http://lumen.laravel-china.org/">Lumen</a></li>
<li class="nav-forge"><a href="javascript:if(confirm('https://cs.phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://cs.phphub.org/'" tppabs="https://cs.phphub.org/" target="_blank">Laravel LTS é€ŸæŸ¥è¡¨</a></li>
<li class="dropdown">
	<a href="javascript:if(confirm('https://phphub.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ÊÇÒ»¸öÊ¹ÓÃÎ´Ö§³ÖĞ­ÒéµÄµØÖ·(ÀıÈç: gopher)¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='https://phphub.org/'" tppabs="https://phphub.org/" target="_blank">Laravel ç¤¾åŒº</a>
</li>
			</ul>
			<p>Laravel is a trademark of Taylor Otwell. Copyright &copy; Taylor Otwell.</p>
			<p class="less-significant"><a href="javascript:if(confirm('http://jackmcdade.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://jackmcdade.com/'" tppabs="http://jackmcdade.com/">Design by Jack McDade</a></p>

			<p class="less-significant">
				<a href="javascript:if(confirm('http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao'" tppabs="http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=phphub&utm_medium=display&utm_content=yejiao&ytag=phphubyejiao" target="_blank">ç”± UCloud èµåŠ©  <img src="dYfOYswiQY.png" tppabs="https://dn-phphub.qbox.me/uploads/images/201605/03/1/dYfOYswiQY.png" width="98" data-toggle="tooltip" data-placement="top" title="æœ¬ç«™æœåŠ¡å™¨ç”± UCloud èµåŠ©"></a>.
		      </p>
		</footer>

	</div>

	<script src="laravel.js" tppabs="http://laravel-china.org/assets/js/laravel.js"></script>
	<script src="viewport-units-buggyfill.js" tppabs="http://laravel-china.org/assets/js/viewport-units-buggyfill.js"></script>
	<script>window.viewportUnitsBuggyfill.init();</script>
    <script>

		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','analytics.js'/*tpa=http://7xijlf.com2.z0.glb.qiniucdn.com/js/analytics.js*/,'ga');

		ga('create', 'UA-53903425-7', 'auto');
		ga('send', 'pageview');

		$(window).load(function() {
		  // When the page has loaded
		  $(".main-content").fadeIn(10);
		});
    </script>
</body>
</html>
